(()=>{"use strict";class t{constructor(t){this.selector=t,this.element=document.querySelector(`#${t}`),this.closeBtn=this.element.querySelector(`#btnClose${t}`),this.closeBtn.addEventListener("click",(()=>{this.close()}))}toggle(){this.element.hasAttribute("open")?this.close():this.open()}open(){this.element.setAttribute("open","")}close(){this.element.removeAttribute("open"),window.localStorage.setItem("startup","false")}}class e{constructor(){this.opacity=255,this.visible=!0,this.data=[[]],this.x=0,this.y=0,this.width=0,this.height=0}}const s=new class{constructor(t="New palette"){this.name=t,this.colors=[[]]}addColor(t){this.colors.push(t)}removeColor(t){this.colors.splice(t,1)}setColor(t,e){this.colors[t]=e}getColor(t){return this.colors[t]}}("Default");s.colors=[[0,0,0,255],[255,255,255,255],[255,0,0,255],[0,255,0,255],[0,0,255,255]];class i{constructor(){this.data=[],this.width=16,this.height=16,this.palette=s,this.data=[new e]}}class o{constructor(t,e){this.selector=t,this.app=e,this.commands={n:()=>{this.app.newFile()},e:()=>{},w:()=>{this.app.saveFile()},h:()=>{this.app.ui.helpDialog.toggle(),this.app.ui.log("Help")},p:()=>{this.app.ui.paletteDialog.toggle(),this.app.ui.log("Open palette")},P:()=>{},log:t=>{this.app.ui.log(t)}},this.element=document.querySelector(`#${t}`),this.element.addEventListener("keydown",(t=>{"Enter"===t.key&&(this.execute(this.element.value),this.close())}))}open(){this.element.classList.add("open"),this.element.focus(),this.element.value=":"}close(){this.element.classList.remove("open"),this.element.value=""}execute(t){t=t.slice(1);const[e,...s]=t.split(" ");console.log(e,s),e in this.commands?this.commands[e](...s):this.app.ui.log(`command not found: ${e}`)}}class a{constructor(t){this.app=t,this.items=[],this.cursor=this.items.length-1}add(t){this.items.push(t),this.cursor=this.items.length-1}clearFromCursor(){this.items.splice(this.cursor+1)}undo(){this.cursor>0&&(this.cursor--,this.app.ctx.putImageData(this.items[this.cursor],0,0))}redo(){this.cursor<this.items.length-1&&(this.cursor++,this.app.ctx.putImageData(this.items[this.cursor],0,0))}}class h{constructor(e){this.app=e,this.startupDialog=new t("DialogStartup"),this.helpDialog=new t("DialogHelp"),this.inputCommand=new o("InputCmd",this.app),this.zoomElement=document.querySelector("#zoom"),this.primaryColorElement=document.querySelector("#toolPrColor"),this.statusLine=document.querySelector("#statusLine"),this.paletteDialog=new t("DialogPalette"),this.paletteWrap=document.querySelector("#paletteWrap"),this.paletteTitle=document.querySelector("#paletteTitle"),this.app=e,window.localStorage.getItem("startup")&&"true"!==window.localStorage.getItem("startup")||this.startupDialog.open(),this.update()}renderPalette(){this.paletteWrap.innerHTML="",this.paletteTitle.textContent=this.app.palette.name,this.app.palette.colors.forEach(((t,e)=>{const s=document.createElement("div");s.classList.add("color-swatch"),s.style.backgroundColor=`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`,this.paletteWrap.append(s),s.addEventListener("click",(()=>{this.app.primaryColor=t,this.update()}))}))}log(t){this.to&&clearTimeout(this.to),this.statusLine.classList.add("open"),this.statusLine.textContent=t,this.to=setTimeout((()=>{this.statusLine.classList.remove("open"),this.statusLine.textContent=""}),2e3)}update(){this.renderPalette(),this.zoomElement.textContent=100*this.app.zoom+"%",this.primaryColorElement.style.backgroundColor=`rgba(${this.app.primaryColor[0]}, ${this.app.primaryColor[1]}, ${this.app.primaryColor[2]}, ${this.app.primaryColor[3]})`}}const l=new class{constructor(){this.history=new a(this),this.zoom=25,this.tool="pencil",this.layer=0,this.color=1,this.file=new i,this.palette=s,this.primaryColor=this.palette.getColor(0),this.palettes=[this.palette],this.ui=new h(this),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.style.backgroundColor="white",this.canvas.width=this.file.width,this.canvas.height=this.file.height,this.canvas.style.width=this.file.width*this.zoom+"px",this.canvas.style.height=this.file.height*this.zoom+"px",this.canvas.style.imageRendering="pixelated",this.canvas.addEventListener("wheel",(t=>{t.preventDefault(),this.zoomChange(t.deltaY)})),document.body.querySelector("#main").append(this.canvas);const t=this.ctx.createImageData(16,16);for(let e=0;e>this.file.data.length;e++)for(let i=0;i<16;i++)for(let o=0;o<16;o++){const a=this.file.palette?this.file.palette.getColor(this.file.data[e].data[i][o]):s.getColor(this.file.data[e].data[i][o]),h=4*(16*i+o);t.data[h]=a[0],t.data[h+1]=a[1],t.data[h+2]=a[2],t.data[h+3]=a[3]}this.ctx.putImageData(t,0,0),this.canvas.addEventListener("click",(e=>{this.history.add(this.ctx.getImageData(0,0,16,16));const s=this.canvas.getBoundingClientRect(),i=Math.floor((e.clientX-s.left)/this.zoom),o=4*(16*Math.floor((e.clientY-s.top)/this.zoom)+i);t.data[o]=this.primaryColor[0],t.data[o+1]=this.primaryColor[1],t.data[o+2]=this.primaryColor[2],t.data[o+3]=this.primaryColor[3],this.ctx.putImageData(t,0,0),this.history.add(this.ctx.getImageData(0,0,16,16))})),this.canvas.addEventListener("mousemove",(e=>{if(1===e.buttons){this.history.add(this.ctx.getImageData(0,0,16,16));const s=this.canvas.getBoundingClientRect(),i=Math.floor((e.clientX-s.left)/this.zoom),o=4*(16*Math.floor((e.clientY-s.top)/this.zoom)+i);t.data[o]=this.primaryColor[0],t.data[o+1]=this.primaryColor[1],t.data[o+2]=this.primaryColor[2],t.data[o+3]=this.primaryColor[3],this.ctx.putImageData(t,0,0),this.history.add(this.ctx.getImageData(0,0,16,16))}})),document.addEventListener("keydown",(t=>{if(t.metaKey&&"="===t.key)return t.preventDefault(),void this.zoomIn();if(t.metaKey&&"-"===t.key)return t.preventDefault(),void this.zoomOut();if(t.metaKey&&"0"===t.key)return t.preventDefault(),void this.zoomReset();if(t.metaKey&&"z"===t.key)return t.preventDefault(),void this.undo();switch(t.key){case"Space":this.ui.inputCommand.element.classList.contains("open")||(t.preventDefault(),this.canvas.style.cursor="grab",this.canvas.addEventListener("mousemove",(t=>{1===t.buttons&&(this.canvas.style.cursor="grabbing",this.canvas.style.left=`${t.movementX}px`,this.canvas.style.top=`${t.movementY}px`)})));break;case"?":t.preventDefault(),this.ui.helpDialog.toggle();break;case"Escape":t.preventDefault(),this.ui.inputCommand.element.classList.contains("open")?this.ui.inputCommand.close():this.ui.inputCommand.open()}})),document.addEventListener("keyup",(t=>{if(" "===t.key)t.preventDefault(),this.canvas.style.cursor="default"})),this.update()}update(){this.canvas.style.width=this.file.width*this.zoom+"px",this.canvas.style.height=this.file.height*this.zoom+"px",this.ui.update()}newFile(){console.log("new")}saveFile(){console.log("save")}undo(){this.history.undo()}redo(){this.history.redo()}zoomChange(t=0){const e=Math.sign(t);this.zoom+=8*e,this.update()}zoomIn(){console.log("zoom in"),this.zoom<128&&this.zoomChange(1)}zoomOut(){console.log("zoom out"),this.zoom>1&&this.zoomChange(-1)}zoomReset(){console.log("zoom reset"),this.zoom=25,this.update()}changeTool(t){this.tool=t}};window.app=l})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNULENBQ0FBLFNBQ0lwRixLQUFLd0csT0FBT2IsTUFBTXRFLE1BQVdyQixLQUFLc0csS0FBS2pGLE1BQVFyQixLQUFLa0csS0FBMUIsS0FDMUJsRyxLQUFLd0csT0FBT2IsTUFBTXJFLE9BQVl0QixLQUFLc0csS0FBS2hGLE9BQVN0QixLQUFLa0csS0FBM0IsS0FDM0JsRyxLQUFLNkMsR0FBR3VDLFFBQ1osQ0FDQTVDLFVBQ0l3QixRQUFRakIsSUFBSSxNQUNoQixDQUNBSixXQUNJcUIsUUFBUWpCLElBQUksT0FDaEIsQ0FDQXdCLE9BQ0l2RSxLQUFLbUcsUUFBUTVCLE1BQ2pCLENBQ0FHLE9BQ0kxRSxLQUFLbUcsUUFBUXpCLE1BQ2pCLENBQ0FrQyxXQUFXdUIsRUFBSyxHQUNaLE1BQU1DLEVBQVFmLEtBQUtnQixLQUFLRixHQUN4Qm5JLEtBQUtrRyxNQUFnQixFQUFSa0MsRUFDYnBJLEtBQUtvRixRQUNULENBQ0F5QyxTQUNJN0QsUUFBUWpCLElBQUksV0FDUi9DLEtBQUtrRyxLQUFPLEtBQ1psRyxLQUFLNEcsV0FBVyxFQUV4QixDQUNBa0IsVUFDSTlELFFBQVFqQixJQUFJLFlBQ1IvQyxLQUFLa0csS0FBTyxHQUNabEcsS0FBSzRHLFlBQVksRUFFekIsQ0FDQW1CLFlBQ0kvRCxRQUFRakIsSUFBSSxjQUNaL0MsS0FBS2tHLEtBQU8sR0FDWmxHLEtBQUtvRixRQUNULENBQ0FrRCxXQUFXbEMsR0FDUHBHLEtBQUtvRyxLQUFPQSxDQUNoQixHQzFQSnhGLE9BQU95QixJQUFNQSxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9kaWFsb2cudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9sYXllci50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL3BhbGV0dGUudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9maWxlLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvaW5wdXQtY29tbWFuZC50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIERpYWxvZ0VsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7c2VsZWN0b3J9YCk7XG4gICAgICAgIHRoaXMuY2xvc2VCdG4gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihgI2J0bkNsb3NlJHtzZWxlY3Rvcn1gKTtcbiAgICAgICAgdGhpcy5jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9nZ2xlKCkge1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZShcIm9wZW5cIikpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJvcGVuXCIsIFwiXCIpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcIm9wZW5cIik7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInN0YXJ0dXBcIiwgXCJmYWxzZVwiKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBMYXllciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub3BhY2l0eSA9IDI1NTtcbiAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kYXRhID0gW1tdXTtcbiAgICAgICAgdGhpcy54ID0gMDtcbiAgICAgICAgdGhpcy55ID0gMDtcbiAgICAgICAgdGhpcy53aWR0aCA9IDA7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMDtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQYWxldHRlIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lID0gXCJOZXcgcGFsZXR0ZVwiKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29sb3JzID0gW1tdXTtcbiAgICB9XG4gICAgYWRkQ29sb3IoY29sb3IpIHtcbiAgICAgICAgdGhpcy5jb2xvcnMucHVzaChjb2xvcik7XG4gICAgfVxuICAgIHJlbW92ZUNvbG9yKGluZGV4KSB7XG4gICAgICAgIHRoaXMuY29sb3JzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIHNldENvbG9yKGluZGV4LCBjb2xvcikge1xuICAgICAgICB0aGlzLmNvbG9yc1tpbmRleF0gPSBjb2xvcjtcbiAgICB9XG4gICAgZ2V0Q29sb3IoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3JzW2luZGV4XTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgZGVmYXVsdFBhbGV0dGUgPSBuZXcgUGFsZXR0ZShcIkRlZmF1bHRcIik7XG5kZWZhdWx0UGFsZXR0ZS5jb2xvcnMgPSBbXG4gICAgWzAsIDAsIDAsIDI1NV0sXG4gICAgWzI1NSwgMjU1LCAyNTUsIDI1NV0sXG4gICAgWzI1NSwgMCwgMCwgMjU1XSxcbiAgICBbMCwgMjU1LCAwLCAyNTVdLFxuICAgIFswLCAwLCAyNTUsIDI1NV0sXG5dO1xuIiwiaW1wb3J0IExheWVyIGZyb20gXCIuL2xheWVyXCI7XG5pbXBvcnQgeyBkZWZhdWx0UGFsZXR0ZSB9IGZyb20gXCIuL3BhbGV0dGVcIjtcbmV4cG9ydCBjbGFzcyBXaXpGaWxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gW107XG4gICAgICAgIHRoaXMud2lkdGggPSAxNjtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAxNjtcbiAgICAgICAgdGhpcy5wYWxldHRlID0gZGVmYXVsdFBhbGV0dGU7XG4gICAgICAgIHRoaXMuZGF0YSA9IFtuZXcgTGF5ZXIoKV07XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5wdXRDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgYXBwKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuY29tbWFuZHMgPSB7XG4gICAgICAgICAgICBuOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAubmV3RmlsZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGU6ICgpID0+IHsgfSxcbiAgICAgICAgICAgIHc6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5zYXZlRmlsZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGg6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC51aS5oZWxwRGlhbG9nLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnVpLmxvZyhcIkhlbHBcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnVpLnBhbGV0dGVEaWFsb2cudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkubG9nKFwiT3BlbiBwYWxldHRlXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFA6ICgpID0+IHsgfSxcbiAgICAgICAgICAgIGxvZzogKG1zZykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnVpLmxvZyhtc2cpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7c2VsZWN0b3J9YCk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGUodGhpcy5lbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5mb2N1cygpO1xuICAgICAgICB0aGlzLmVsZW1lbnQudmFsdWUgPSBcIjpcIjtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gXCJcIjtcbiAgICB9XG4gICAgZXhlY3V0ZShjbWQpIHtcbiAgICAgICAgY21kID0gY21kLnNsaWNlKDEpO1xuICAgICAgICBjb25zdCBbY29tbWFuZCwgLi4uYXJnc10gPSBjbWQuc3BsaXQoXCIgXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhjb21tYW5kLCBhcmdzKTtcbiAgICAgICAgaWYgKGNvbW1hbmQgaW4gdGhpcy5jb21tYW5kcykge1xuICAgICAgICAgICAgdGhpcy5jb21tYW5kc1tjb21tYW5kXSguLi5hcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXBwLnVpLmxvZyhgY29tbWFuZCBub3QgZm91bmQ6ICR7Y29tbWFuZH1gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCBEaWFsb2dFbGVtZW50IGZyb20gXCIuL2RpYWxvZ1wiO1xuaW1wb3J0IHsgV2l6RmlsZSB9IGZyb20gXCIuL2ZpbGVcIjtcbmltcG9ydCBJbnB1dENvbW1hbmQgZnJvbSBcIi4vaW5wdXQtY29tbWFuZFwiO1xuaW1wb3J0IHsgZGVmYXVsdFBhbGV0dGUgfSBmcm9tIFwiLi9wYWxldHRlXCI7XG5jbGFzcyBIaXN0b3J5IHtcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7XG4gICAgfVxuICAgIGFkZChpdGVtKSB7XG4gICAgICAgIHRoaXMuaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7XG4gICAgfVxuICAgIGNsZWFyRnJvbUN1cnNvcigpIHtcbiAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UodGhpcy5jdXJzb3IgKyAxKTtcbiAgICB9XG4gICAgdW5kbygpIHtcbiAgICAgICAgaWYgKHRoaXMuY3Vyc29yID4gMCkge1xuICAgICAgICAgICAgdGhpcy5jdXJzb3ItLTtcbiAgICAgICAgICAgIHRoaXMuYXBwLmN0eC5wdXRJbWFnZURhdGEodGhpcy5pdGVtc1t0aGlzLmN1cnNvcl0sIDAsIDApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlZG8oKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuaXRlbXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgdGhpcy5jdXJzb3IrKztcbiAgICAgICAgICAgIHRoaXMuYXBwLmN0eC5wdXRJbWFnZURhdGEodGhpcy5pdGVtc1t0aGlzLmN1cnNvcl0sIDAsIDApO1xuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgVUkge1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5zdGFydHVwRGlhbG9nID0gbmV3IERpYWxvZ0VsZW1lbnQoXCJEaWFsb2dTdGFydHVwXCIpO1xuICAgICAgICB0aGlzLmhlbHBEaWFsb2cgPSBuZXcgRGlhbG9nRWxlbWVudChcIkRpYWxvZ0hlbHBcIik7XG4gICAgICAgIHRoaXMuaW5wdXRDb21tYW5kID0gbmV3IElucHV0Q29tbWFuZChcIklucHV0Q21kXCIsIHRoaXMuYXBwKTtcbiAgICAgICAgdGhpcy56b29tRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjem9vbVwiKTtcbiAgICAgICAgdGhpcy5wcmltYXJ5Q29sb3JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b29sUHJDb2xvclwiKTtcbiAgICAgICAgdGhpcy5zdGF0dXNMaW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzdGF0dXNMaW5lXCIpO1xuICAgICAgICB0aGlzLnBhbGV0dGVEaWFsb2cgPSBuZXcgRGlhbG9nRWxlbWVudChcIkRpYWxvZ1BhbGV0dGVcIik7XG4gICAgICAgIHRoaXMucGFsZXR0ZVdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BhbGV0dGVXcmFwXCIpO1xuICAgICAgICB0aGlzLnBhbGV0dGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGFsZXR0ZVRpdGxlXCIpO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgaWYgKCF3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzdGFydHVwXCIpIHx8XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzdGFydHVwXCIpID09PSBcInRydWVcIikge1xuICAgICAgICAgICAgdGhpcy5zdGFydHVwRGlhbG9nLm9wZW4oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgICByZW5kZXJQYWxldHRlKCkge1xuICAgICAgICB0aGlzLnBhbGV0dGVXcmFwLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIHRoaXMucGFsZXR0ZVRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5hcHAucGFsZXR0ZS5uYW1lO1xuICAgICAgICB0aGlzLmFwcC5wYWxldHRlLmNvbG9ycy5mb3JFYWNoKChjb2xvciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJjb2xvci1zd2F0Y2hcIik7XG4gICAgICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBgcmdiYSgke2NvbG9yWzBdfSwgJHtjb2xvclsxXX0sICR7Y29sb3JbMl19LCAke2NvbG9yWzNdfSlgO1xuICAgICAgICAgICAgdGhpcy5wYWxldHRlV3JhcC5hcHBlbmQoZWwpO1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5wcmltYXJ5Q29sb3IgPSBjb2xvcjtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsb2cobXNnKSB7XG4gICAgICAgIHRoaXMudG8gJiYgY2xlYXJUaW1lb3V0KHRoaXMudG8pO1xuICAgICAgICB0aGlzLnN0YXR1c0xpbmUuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG4gICAgICAgIHRoaXMuc3RhdHVzTGluZS50ZXh0Q29udGVudCA9IG1zZztcbiAgICAgICAgdGhpcy50byA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNMaW5lLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNMaW5lLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgfSwgMjAwMCk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQYWxldHRlKCk7XG4gICAgICAgIHRoaXMuem9vbUVsZW1lbnQudGV4dENvbnRlbnQgPSBgJHt0aGlzLmFwcC56b29tICogMTAwfSVgO1xuICAgICAgICB0aGlzLnByaW1hcnlDb2xvckVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYHJnYmEoJHt0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMF19LCAke3RoaXMuYXBwLnByaW1hcnlDb2xvclsxXX0sICR7dGhpcy5hcHAucHJpbWFyeUNvbG9yWzJdfSwgJHt0aGlzLmFwcC5wcmltYXJ5Q29sb3JbM119KWA7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gbmV3IEhpc3RvcnkodGhpcyk7XG4gICAgICAgIHRoaXMuem9vbSA9IDI1O1xuICAgICAgICB0aGlzLnRvb2wgPSBcInBlbmNpbFwiO1xuICAgICAgICB0aGlzLmxheWVyID0gMDtcbiAgICAgICAgdGhpcy5jb2xvciA9IDE7XG4gICAgICAgIHRoaXMuZmlsZSA9IG5ldyBXaXpGaWxlKCk7XG4gICAgICAgIHRoaXMucGFsZXR0ZSA9IGRlZmF1bHRQYWxldHRlO1xuICAgICAgICB0aGlzLnByaW1hcnlDb2xvciA9IHRoaXMucGFsZXR0ZS5nZXRDb2xvcigwKTtcbiAgICAgICAgdGhpcy5wYWxldHRlcyA9IFt0aGlzLnBhbGV0dGVdO1xuICAgICAgICB0aGlzLnVpID0gbmV3IFVJKHRoaXMpO1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5maWxlLndpZHRoO1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmZpbGUuaGVpZ2h0O1xuICAgICAgICAvL3pvb20gY2FudmFzXG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLndpZHRoID0gYCR7dGhpcy5maWxlLndpZHRoICogdGhpcy56b29tfXB4YDtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5maWxlLmhlaWdodCAqIHRoaXMuem9vbX1weGA7XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmltYWdlUmVuZGVyaW5nID0gXCJwaXhlbGF0ZWRcIjtcbiAgICAgICAgLy8gYWJpbGl0eSB0byB6b29tIGluIGFuZCBvdXQgd2l0aCBtb3VzZSB3aGVlbFxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuem9vbUNoYW5nZShlLmRlbHRhWSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpblwiKS5hcHBlbmQodGhpcy5jYW52YXMpO1xuICAgICAgICBjb25zdCBpbWFnZURhdGEgPSB0aGlzLmN0eC5jcmVhdGVJbWFnZURhdGEoMTYsIDE2KTtcbiAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPiB0aGlzLmZpbGUuZGF0YS5sZW5ndGg7IGwrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCAxNjsgeSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCAxNjsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gdGhpcy5maWxlLnBhbGV0dGVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5maWxlLnBhbGV0dGUuZ2V0Q29sb3IodGhpcy5maWxlLmRhdGFbbF0uZGF0YVt5XVt4XSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZGVmYXVsdFBhbGV0dGUuZ2V0Q29sb3IodGhpcy5maWxlLmRhdGFbbF0uZGF0YVt5XVt4XSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gKHkgKiAxNiArIHgpICogNDtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXhdID0gY29sb3JbMF07XG4gICAgICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSBjb2xvclsxXTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSA9IGNvbG9yWzJdO1xuICAgICAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDNdID0gY29sb3JbM107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICAgICAgICAvLyBhYmlsaXR5IHRvIGRyYXcgcGl4ZWwgd2l0aCBtb3VzZSBjbGlja1xuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5hZGQodGhpcy5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDE2LCAxNikpO1xuICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IoKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgLyB0aGlzLnpvb20pO1xuICAgICAgICAgICAgY29uc3QgeSA9IE1hdGguZmxvb3IoKGUuY2xpZW50WSAtIHJlY3QudG9wKSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9ICh5ICogMTYgKyB4KSAqIDQ7XG4gICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleF0gPSB0aGlzLnByaW1hcnlDb2xvclswXTtcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSB0aGlzLnByaW1hcnlDb2xvclsxXTtcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gPSB0aGlzLnByaW1hcnlDb2xvclsyXTtcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgM10gPSB0aGlzLnByaW1hcnlDb2xvclszXTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICAgICAgICAgICAgdGhpcy5oaXN0b3J5LmFkZCh0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgMTYsIDE2KSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBhYmlsaXR5IHRvIGRyYXcgcGl4ZWwgd2l0aCBtb3VzZSBtb3ZlXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbnMgPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnkuYWRkKHRoaXMuY3R4LmdldEltYWdlRGF0YSgwLCAwLCAxNiwgMTYpKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IoKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgLyB0aGlzLnpvb20pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKChlLmNsaWVudFkgLSByZWN0LnRvcCkgLyB0aGlzLnpvb20pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gKHkgKiAxNiArIHgpICogNDtcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleF0gPSB0aGlzLnByaW1hcnlDb2xvclswXTtcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDFdID0gdGhpcy5wcmltYXJ5Q29sb3JbMV07XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSA9IHRoaXMucHJpbWFyeUNvbG9yWzJdO1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgM10gPSB0aGlzLnByaW1hcnlDb2xvclszXTtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnkuYWRkKHRoaXMuY3R4LmdldEltYWdlRGF0YSgwLCAwLCAxNiwgMTYpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIGFiaWxpdHkgdG8gdW5kbyBjaGFuZ2VzIHdpdGggY21kICsgelxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUubWV0YUtleSAmJiBlLmtleSA9PT0gXCI9XCIpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy56b29tSW4oKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5tZXRhS2V5ICYmIGUua2V5ID09PSBcIi1cIikge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnpvb21PdXQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5tZXRhS2V5ICYmIGUua2V5ID09PSBcIjBcIikge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnpvb21SZXNldCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLm1ldGFLZXkgJiYgZS5rZXkgPT09IFwielwiKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudW5kbygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBob2xkIHNwYWNlIGFuZCBtb3ZlIG1vdXNlLCBtb3ZlIGNhbnZhc1xuICAgICAgICAgICAgICAgIGNhc2UgXCJTcGFjZVwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudWkuaW5wdXRDb21tYW5kLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3BlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuY3Vyc29yID0gXCJncmFiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuYnV0dG9ucyA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSBcImdyYWJiaW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmxlZnQgPSBgJHtlLm1vdmVtZW50WH1weGA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLnRvcCA9IGAke2UubW92ZW1lbnRZfXB4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiP1wiOlxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudWkuaGVscERpYWxvZy50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkVzY2FwZVwiOlxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVpLmlucHV0Q29tbWFuZC5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcIm9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudWkuaW5wdXRDb21tYW5kLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVpLmlucHV0Q29tbWFuZC5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCIgXCI6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS53aWR0aCA9IGAke3RoaXMuZmlsZS53aWR0aCAqIHRoaXMuem9vbX1weGA7XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuZmlsZS5oZWlnaHQgKiB0aGlzLnpvb219cHhgO1xuICAgICAgICB0aGlzLnVpLnVwZGF0ZSgpO1xuICAgIH1cbiAgICBuZXdGaWxlKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIm5ld1wiKTtcbiAgICB9XG4gICAgc2F2ZUZpbGUoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwic2F2ZVwiKTtcbiAgICB9XG4gICAgdW5kbygpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5LnVuZG8oKTtcbiAgICB9XG4gICAgcmVkbygpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5LnJlZG8oKTtcbiAgICB9XG4gICAgem9vbUNoYW5nZShkdCA9IDApIHtcbiAgICAgICAgY29uc3QgZGVsdGEgPSBNYXRoLnNpZ24oZHQpO1xuICAgICAgICB0aGlzLnpvb20gKz0gZGVsdGEgKiA4O1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgICB6b29tSW4oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiem9vbSBpblwiKTtcbiAgICAgICAgaWYgKHRoaXMuem9vbSA8IDEyOCkge1xuICAgICAgICAgICAgdGhpcy56b29tQ2hhbmdlKDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHpvb21PdXQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiem9vbSBvdXRcIik7XG4gICAgICAgIGlmICh0aGlzLnpvb20gPiAxKSB7XG4gICAgICAgICAgICB0aGlzLnpvb21DaGFuZ2UoLTEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHpvb21SZXNldCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ6b29tIHJlc2V0XCIpO1xuICAgICAgICB0aGlzLnpvb20gPSAyNTtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gICAgY2hhbmdlVG9vbCh0b29sKSB7XG4gICAgICAgIHRoaXMudG9vbCA9IHRvb2w7XG4gICAgfVxufVxuIiwiaW1wb3J0IEFwcCBmcm9tIFwiLi9hcHBcIjtcbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcbi8vQHRzLWlnbm9yZVxud2luZG93LmFwcCA9IGFwcDtcbiJdLCJuYW1lcyI6WyJEaWFsb2dFbGVtZW50IiwiY29uc3RydWN0b3IiLCJzZWxlY3RvciIsInRoaXMiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xvc2VCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwiY2xvc2UiLCJ0b2dnbGUiLCJoYXNBdHRyaWJ1dGUiLCJvcGVuIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkxheWVyIiwib3BhY2l0eSIsInZpc2libGUiLCJkYXRhIiwieCIsInkiLCJ3aWR0aCIsImhlaWdodCIsImRlZmF1bHRQYWxldHRlIiwibmFtZSIsImNvbG9ycyIsImFkZENvbG9yIiwiY29sb3IiLCJwdXNoIiwicmVtb3ZlQ29sb3IiLCJpbmRleCIsInNwbGljZSIsInNldENvbG9yIiwiZ2V0Q29sb3IiLCJXaXpGaWxlIiwicGFsZXR0ZSIsIklucHV0Q29tbWFuZCIsImFwcCIsImNvbW1hbmRzIiwibiIsIm5ld0ZpbGUiLCJlIiwidyIsInNhdmVGaWxlIiwiaCIsInVpIiwiaGVscERpYWxvZyIsImxvZyIsInAiLCJwYWxldHRlRGlhbG9nIiwiUCIsIm1zZyIsImtleSIsImV4ZWN1dGUiLCJ2YWx1ZSIsImNsYXNzTGlzdCIsImFkZCIsImZvY3VzIiwicmVtb3ZlIiwiY21kIiwic2xpY2UiLCJjb21tYW5kIiwiYXJncyIsInNwbGl0IiwiY29uc29sZSIsIkhpc3RvcnkiLCJpdGVtcyIsImN1cnNvciIsImxlbmd0aCIsIml0ZW0iLCJjbGVhckZyb21DdXJzb3IiLCJ1bmRvIiwiY3R4IiwicHV0SW1hZ2VEYXRhIiwicmVkbyIsIlVJIiwic3RhcnR1cERpYWxvZyIsImlucHV0Q29tbWFuZCIsInpvb21FbGVtZW50IiwicHJpbWFyeUNvbG9yRWxlbWVudCIsInN0YXR1c0xpbmUiLCJwYWxldHRlV3JhcCIsInBhbGV0dGVUaXRsZSIsImdldEl0ZW0iLCJ1cGRhdGUiLCJyZW5kZXJQYWxldHRlIiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJmb3JFYWNoIiwiZWwiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJhcHBlbmQiLCJwcmltYXJ5Q29sb3IiLCJ0byIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJ6b29tIiwiaGlzdG9yeSIsInRvb2wiLCJsYXllciIsImZpbGUiLCJwYWxldHRlcyIsImNhbnZhcyIsImdldENvbnRleHQiLCJpbWFnZVJlbmRlcmluZyIsInByZXZlbnREZWZhdWx0Iiwiem9vbUNoYW5nZSIsImRlbHRhWSIsImJvZHkiLCJpbWFnZURhdGEiLCJjcmVhdGVJbWFnZURhdGEiLCJsIiwiZ2V0SW1hZ2VEYXRhIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIk1hdGgiLCJmbG9vciIsImNsaWVudFgiLCJsZWZ0IiwiY2xpZW50WSIsInRvcCIsImJ1dHRvbnMiLCJtZXRhS2V5Iiwiem9vbUluIiwiem9vbU91dCIsInpvb21SZXNldCIsImNvbnRhaW5zIiwibW92ZW1lbnRYIiwibW92ZW1lbnRZIiwiZHQiLCJkZWx0YSIsInNpZ24iLCJjaGFuZ2VUb29sIl0sInNvdXJjZVJvb3QiOiIifQ==