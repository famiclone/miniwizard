(()=>{"use strict";class t{constructor(t="New layer",e=!1){this.name=t,this.locked=e,this.opacity=255,this.visible=!0,this.data=[[]]}}const e=new class{constructor(t="New palette"){this.name=t,this.colors=[[]]}addColor(t){this.colors.push(t)}removeColor(t){this.colors.splice(t,1)}setColor(t,e){this.colors[t]=e}getColor(t){return this.colors[t]}}("Default");e.colors=[[0,0,0,255],[252,252,252,255],[248,248,248,255],[188,188,188,255],[124,124,124,255],[164,228,252,255],[60,188,252,255],[0,120,248,255],[0,0,252,255],[184,184,248,255],[104,136,252,255],[0,88,248,255],[0,0,188,255],[216,184,248,255],[152,120,248,255],[104,68,252,255],[68,40,188,255],[248,184,248,255],[248,120,248,255],[216,0,204,255],[148,0,132,255],[248,164,192,255],[248,88,152,255],[228,0,88,255],[168,0,32,255],[240,208,176,255],[248,120,88,255],[248,56,0,255],[168,16,0,255],[252,224,168,255],[252,160,68,255],[228,92,16,255],[136,20,0,255],[248,216,120,255],[248,184,0,255],[172,124,0,255],[80,40,0,255],[216,248,120,255],[184,248,24,255],[0,184,0,255],[0,120,0,255],[184,248,184,255],[88,216,84,255],[0,168,0,255],[0,104,0,255],[184,248,216,255],[88,248,152,255],[0,168,68,255],[0,88,0,255],[0,252,252,255],[0,232,216,255],[0,136,136,255],[0,64,88,255],[248,216,248,255],[120,120,120,255]];class s{constructor(){this.data=[],this.width=16,this.height=16,this.palette=e,this.data=[new t("Background",!0)]}}class i{constructor(t){this.app=t,this.items=[],this.cursor=this.items.length-1}add(t){this.items.push(t),this.cursor=this.items.length-1}clearFromCursor(){this.items.splice(this.cursor+1)}undo(){}redo(){}}class o{constructor(t){this.app=t,this.zoom=25,this.file=this.app.files[this.app.fileIndex],this._canvas=document.createElement("canvas"),this._ctx=this.canvas.getContext("2d"),this.canvas.style.backgroundColor="white",this.canvas.width=this.app.files[this.app.fileIndex].width,this.canvas.height=this.app.files[this.app.fileIndex].height,this.canvas.style.imageRendering="pixelated",this.setZoom(this.zoom),this.canvas.addEventListener("wheel",(t=>{t.preventDefault(),this.zoomChange(t.deltaY)})),document.body.querySelector("#main").append(this.canvas);const s=this.ctx.createImageData(16,16),i=this.app.files[this.app.fileIndex];for(let t=0;t>i.data.length;t++)for(let o=0;o<16;o++)for(let a=0;a<16;a++){const n=i.palette?i.palette.getColor(i.data[t].data[o][a]):e.getColor(i.data[t].data[o][a]),l=4*(16*o+a);s.data[l]=n[0],s.data[l+1]=n[1],s.data[l+2]=n[2],s.data[l+3]=n[3]}this.ctx.putImageData(s,0,0),this.canvas.addEventListener("click",(t=>{this.app.history.add(this.ctx.getImageData(0,0,16,16));const e=this.canvas.getBoundingClientRect(),i=Math.floor((t.clientX-e.left)/this.zoom),o=4*(16*Math.floor((t.clientY-e.top)/this.zoom)+i);s.data[o]=this.app.primaryColor[0],s.data[o+1]=this.app.primaryColor[1],s.data[o+2]=this.app.primaryColor[2],s.data[o+3]=this.app.primaryColor[3],this.ctx.putImageData(s,0,0),this.app.history.add(this.ctx.getImageData(0,0,16,16))})),this.canvas.addEventListener("mousemove",(t=>{if(1===t.buttons){this.app.history.add(this.ctx.getImageData(0,0,16,16));const e=this.canvas.getBoundingClientRect(),i=Math.floor((t.clientX-e.left)/this.zoom),o=4*(16*Math.floor((t.clientY-e.top)/this.zoom)+i);s.data[o]=this.app.primaryColor[0],s.data[o+1]=this.app.primaryColor[1],s.data[o+2]=this.app.primaryColor[2],s.data[o+3]=this.app.primaryColor[3],this.ctx.putImageData(s,0,0),this.app.history.add(this.ctx.getImageData(0,0,16,16))}}))}get canvas(){return this._canvas}get ctx(){return this._ctx}setZoom(t){this.zoom=t,this.canvas.style.width=this.file.width*this.zoom+"px",this.canvas.style.height=this.file.height*this.zoom+"px",this.update()}zoomChange(t=0){const e=Math.sign(t);this.zoom+=8*e,this.setZoom(this.zoom)}zoomIn(){console.log("zoom in"),this.zoom<128&&this.zoomChange(1)}zoomOut(){console.log("zoom out"),this.zoom>1&&this.zoomChange(-1)}zoomReset(){console.log("zoom reset"),this.setZoom(25)}update(){requestAnimationFrame(this.update.bind(this))}}class a{constructor(t){this.selector=t,this.element=document.querySelector(`#${t}`),this.closeBtn=this.element.querySelector(`#btnClose${t}`),this.closeBtn.addEventListener("click",(()=>{this.close()}))}toggle(){this.element.hasAttribute("open")?this.close():this.open()}open(){this.element.setAttribute("open","")}close(){this.element.removeAttribute("open"),window.localStorage.setItem("startup","false")}}class n{constructor(t,e){this.selector=t,this.app=e,this.commands={n:()=>{this.app.newFile()},e:()=>{},w:t=>{this.app.saveFile(t)},h:()=>{this.app.ui.helpDialog.toggle(),this.app.ui.log("Help")},p:()=>{this.app.ui.paletteDialog.toggle(),this.app.ui.log("Open palette")},P:()=>{},log:t=>{this.app.ui.log(t)}},this.element=document.querySelector(`#${t}`),this.element.addEventListener("keydown",(t=>{"Enter"===t.key&&(this.execute(this.element.value),this.close())}))}open(){this.element.classList.add("open"),this.element.focus(),this.element.value=":"}close(){this.element.classList.remove("open"),this.element.value=""}execute(t){t=t.slice(1);const[e,...s]=t.split(" ");console.log(e,s),e in this.commands?this.commands[e](...s):this.app.ui.log(`command not found: ${e}`)}}class l{constructor(t){this.title=t,this.id=Date.now().toString(),this.element=document.createElement("div"),this.tabTitle=document.createElement("span"),this.element.id=this.id,this.element.classList.add("tab"),this.closeBtn=document.createElement("button"),this.closeBtn.id=`#btnClose${this.id}`,this.closeBtn.textContent="X",this.tabTitle.textContent=t,this.element.append(this.tabTitle,this.closeBtn),document.querySelector("#tabs").appendChild(this.element),this.closeBtn.addEventListener("click",(()=>{this.close()}))}deactivateTab(){this.element.classList.remove("active")}activateTab(){this.element.classList.add("active")}rename(t){this.title=t,this.tabTitle.textContent=t}close(){this.element.removeAttribute("open")}}class h{constructor(t){this.app=t,this.startupDialog=new a("DialogStartup"),this.helpDialog=new a("DialogHelp"),this.inputCommand=new n("InputCmd",this.app),this.zoomElement=document.querySelector("#zoom"),this.primaryColorElement=document.querySelector("#toolPrColor"),this.statusLine=document.querySelector("#statusLine"),this.paletteDialog=new a("DialogPalette"),this.paletteWrap=document.querySelector("#paletteWrap"),this.paletteTitle=document.querySelector("#paletteTitle"),this.tabs=document.querySelector("#tabs"),this.app=t,window.localStorage.getItem("startup")&&"true"!==window.localStorage.getItem("startup")||this.startupDialog.open(),this.tabs.append(new l("Untitled").element),this.update()}renderPalette(){this.paletteWrap.innerHTML="",this.paletteTitle.textContent=this.app.palette.name,this.app.palette.colors.forEach(((t,e)=>{const s=document.createElement("div");s.classList.add("color-swatch"),s.style.backgroundColor=`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`,this.paletteWrap.append(s),s.addEventListener("click",(()=>{this.app.primaryColor=t,this.update()}))}))}log(t){this.to&&clearTimeout(this.to),this.statusLine.classList.add("open"),this.statusLine.textContent=t,this.to=setTimeout((()=>{this.statusLine.classList.remove("open"),this.statusLine.textContent=""}),2e3)}update(){this.renderPalette(),this.zoomElement.textContent=100*this.app.zoom+"%",this.primaryColorElement.style.backgroundColor=`rgba(${this.app.primaryColor[0]}, ${this.app.primaryColor[1]}, ${this.app.primaryColor[2]}, ${this.app.primaryColor[3]})`}}const r=new class{constructor(){this.history=new i(this),this.zoom=25,this.tool="pencil",this.color=1,this.files=[new s,new s],this.fileIndex=0,this.palette=e,this.primaryColor=this.palette.getColor(0),this.palettes=[this.palette],this.ui=new h(this),this.layerIndex=0,this.renderer=new o(this),this.setup()}setup(){document.addEventListener("keydown",(t=>{if(t.metaKey&&"="===t.key)return t.preventDefault(),void this.renderer.zoomIn();if(t.metaKey&&"-"===t.key)return t.preventDefault(),void this.renderer.zoomOut();if(t.metaKey&&"0"===t.key)return t.preventDefault(),void this.renderer.zoomReset();if(t.metaKey&&"z"===t.key)return t.preventDefault(),void this.undo();switch(t.key){case"Space":this.ui.inputCommand.element.classList.contains("open")||(t.preventDefault(),this.renderer.canvas.style.cursor="grab",this.renderer.canvas.addEventListener("mousemove",(t=>{1===t.buttons&&(this.renderer.canvas.style.cursor="grabbing",this.renderer.canvas.style.left=`${t.movementX}px`,this.renderer.canvas.style.top=`${t.movementY}px`)})));break;case"?":t.preventDefault(),this.ui.helpDialog.toggle();break;case"Escape":t.preventDefault(),this.ui.inputCommand.element.classList.contains("open")?this.ui.inputCommand.close():this.ui.inputCommand.open()}})),document.addEventListener("keyup",(t=>{if(" "===t.key)t.preventDefault(),this.renderer.canvas.style.cursor="default"})),this.update()}update(){this.renderer.update(),this.ui.update()}fill(t,e,s,i){const o=this.files[this.fileIndex].data[this.layerIndex].data;t<0||t>=o.length||e<0||e>=o[0].length||o[t][e]!==i&&o[t][e]===s&&(o[t][e]=i,this.fill(t+1,e,s,i),this.fill(t-1,e,s,i),this.fill(t,e+1,s,i),this.fill(t,e-1,s,i))}newFile(){console.log("new")}saveFile(t){console.log("save file as "+t)}undo(){this.history.undo()}redo(){this.history.redo()}changeTool(t){this.tool=t}};window.app=r})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJtYXBwaW5ncyI6Im1CQUFlLE1BQU1BLEVBQ2pCQyxZQUFZQyxFQUFPLFlBQWFDLEdBQVMsR0FDckNDLEtBQUtGLEtBQU9BLEVBQ1pFLEtBQUtELE9BQVNBLEVBQ2RDLEtBQUtDLFFBQVUsSUFDZkQsS0FBS0UsU0FBVSxFQUNmRixLQUFLRyxLQUFPLENBQUMsR0FDakIsRUNXRyxNQUFNQyxFQUFpQixJQWxCZixNQUNYUCxZQUFZQyxFQUFPLGVBQ2ZFLEtBQUtGLEtBQU9BLEVBQ1pFLEtBQUtLLE9BQVMsQ0FBQyxHQUNuQixDQUNBQyxTQUFTQyxHQUNMUCxLQUFLSyxPQUFPRyxLQUFLRCxFQUNyQixDQUNBRSxZQUFZQyxHQUNSVixLQUFLSyxPQUFPTSxPQUFPRCxFQUFPLEVBQzlCLENBQ0FFLFNBQVNGLEVBQU9ILEdBQ1pQLEtBQUtLLE9BQU9LLEdBQVNILENBQ3pCLENBQ0FNLFNBQVNILEdBQ0wsT0FBT1YsS0FBS0ssT0FBT0ssRUFDdkIsR0FFc0MsV0FFMUNOLEVBQWVDLE9BQVMsQ0FDcEIsQ0FBQyxFQUFHLEVBQUcsRUFBRyxLQUNWLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLEdBQUksSUFBSyxJQUFLLEtBQ2YsQ0FBQyxFQUFHLElBQUssSUFBSyxLQUNkLENBQUMsRUFBRyxFQUFHLElBQUssS0FDWixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxFQUFHLEdBQUksSUFBSyxLQUNiLENBQUMsRUFBRyxFQUFHLElBQUssS0FDWixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLEdBQUksSUFBSyxLQUNmLENBQUMsR0FBSSxHQUFJLElBQUssS0FDZCxDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLEVBQUcsSUFBSyxLQUNkLENBQUMsSUFBSyxFQUFHLElBQUssS0FDZCxDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxHQUFJLElBQUssS0FDZixDQUFDLElBQUssRUFBRyxHQUFJLEtBQ2IsQ0FBQyxJQUFLLEVBQUcsR0FBSSxLQUNiLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLElBQUssR0FBSSxLQUNmLENBQUMsSUFBSyxHQUFJLEVBQUcsS0FDYixDQUFDLElBQUssR0FBSSxFQUFHLEtBQ2IsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxHQUFJLEtBQ2YsQ0FBQyxJQUFLLEdBQUksR0FBSSxLQUNkLENBQUMsSUFBSyxHQUFJLEVBQUcsS0FDYixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLEVBQUcsS0FDZCxDQUFDLElBQUssSUFBSyxFQUFHLEtBQ2QsQ0FBQyxHQUFJLEdBQUksRUFBRyxLQUNaLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLElBQUssR0FBSSxLQUNmLENBQUMsRUFBRyxJQUFLLEVBQUcsS0FDWixDQUFDLEVBQUcsSUFBSyxFQUFHLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLEdBQUksSUFBSyxHQUFJLEtBQ2QsQ0FBQyxFQUFHLElBQUssRUFBRyxLQUNaLENBQUMsRUFBRyxJQUFLLEVBQUcsS0FDWixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsR0FBSSxJQUFLLElBQUssS0FDZixDQUFDLEVBQUcsSUFBSyxHQUFJLEtBQ2IsQ0FBQyxFQUFHLEdBQUksRUFBRyxLQUNYLENBQUMsRUFBRyxJQUFLLElBQUssS0FDZCxDQUFDLEVBQUcsSUFBSyxJQUFLLEtBQ2QsQ0FBQyxFQUFHLElBQUssSUFBSyxLQUNkLENBQUMsRUFBRyxHQUFJLEdBQUksS0FDWixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssTUN6RWIsTUFBTVMsRUFDVGpCLGNBQ0lHLEtBQUtHLEtBQU8sR0FDWkgsS0FBS2UsTUFBUSxHQUNiZixLQUFLZ0IsT0FBUyxHQUNkaEIsS0FBS2lCLFFBQVViLEVBQ2ZKLEtBQUtHLEtBQU8sQ0FBQyxJQUFJUCxFQUFNLGNBQWMsR0FDekMsRUNUVyxNQUFNc0IsRUFDakJyQixZQUFZc0IsR0FDUm5CLEtBQUttQixJQUFNQSxFQUNYbkIsS0FBS29CLE1BQVEsR0FDYnBCLEtBQUtxQixPQUFTckIsS0FBS29CLE1BQU1FLE9BQVMsQ0FDdEMsQ0FDQUMsSUFBSUMsR0FDQXhCLEtBQUtvQixNQUFNWixLQUFLZ0IsR0FDaEJ4QixLQUFLcUIsT0FBU3JCLEtBQUtvQixNQUFNRSxPQUFTLENBQ3RDLENBQ0FHLGtCQUNJekIsS0FBS29CLE1BQU1ULE9BQU9YLEtBQUtxQixPQUFTLEVBQ3BDLENBQ0FLLE9BS0EsQ0FDQUMsT0FLQSxFQ3ZCVyxNQUFNQyxFQUNqQi9CLFlBQVlzQixHQUNSbkIsS0FBS21CLElBQU1BLEVBQ1huQixLQUFLNkIsS0FBTyxHQUNaN0IsS0FBSzhCLEtBQU85QixLQUFLbUIsSUFBSVksTUFBTS9CLEtBQUttQixJQUFJYSxXQUNwQ2hDLEtBQUtpQyxRQUFVQyxTQUFTQyxjQUFjLFVBQ3RDbkMsS0FBS29DLEtBQU9wQyxLQUFLcUMsT0FBT0MsV0FBVyxNQUNuQ3RDLEtBQUtxQyxPQUFPRSxNQUFNQyxnQkFBa0IsUUFDcEN4QyxLQUFLcUMsT0FBT3RCLE1BQVFmLEtBQUttQixJQUFJWSxNQUFNL0IsS0FBS21CLElBQUlhLFdBQVdqQixNQUN2RGYsS0FBS3FDLE9BQU9yQixPQUFTaEIsS0FBS21CLElBQUlZLE1BQU0vQixLQUFLbUIsSUFBSWEsV0FBV2hCLE9BQ3hEaEIsS0FBS3FDLE9BQU9FLE1BQU1FLGVBQWlCLFlBQ25DekMsS0FBSzBDLFFBQVExQyxLQUFLNkIsTUFFbEI3QixLQUFLcUMsT0FBT00saUJBQWlCLFNBQVVDLElBQ25DQSxFQUFFQyxpQkFDRjdDLEtBQUs4QyxXQUFXRixFQUFFRyxPQUFPLElBRTdCYixTQUFTYyxLQUFLQyxjQUFjLFNBQVNDLE9BQU9sRCxLQUFLcUMsUUFDakQsTUFBTWMsRUFBWW5ELEtBQUtvRCxJQUFJQyxnQkFBZ0IsR0FBSSxJQUN6Q3ZCLEVBQU85QixLQUFLbUIsSUFBSVksTUFBTS9CLEtBQUttQixJQUFJYSxXQUNyQyxJQUFLLElBQUlzQixFQUFJLEVBQUdBLEVBQUl4QixFQUFLM0IsS0FBS21CLE9BQVFnQyxJQUNsQyxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUNwQixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUFLLENBQ3pCLE1BQU1qRCxFQUFRdUIsRUFBS2IsUUFDYmEsRUFBS2IsUUFBUUosU0FBU2lCLEVBQUszQixLQUFLbUQsR0FBR25ELEtBQUtvRCxHQUFHQyxJQUMzQ3BELEVBQWVTLFNBQVNpQixFQUFLM0IsS0FBS21ELEdBQUduRCxLQUFLb0QsR0FBR0MsSUFDN0M5QyxFQUF1QixHQUFWLEdBQUo2QyxFQUFTQyxHQUN4QkwsRUFBVWhELEtBQUtPLEdBQVNILEVBQU0sR0FDOUI0QyxFQUFVaEQsS0FBS08sRUFBUSxHQUFLSCxFQUFNLEdBQ2xDNEMsRUFBVWhELEtBQUtPLEVBQVEsR0FBS0gsRUFBTSxHQUNsQzRDLEVBQVVoRCxLQUFLTyxFQUFRLEdBQUtILEVBQU0sRUFDdEMsQ0FHUlAsS0FBS29ELElBQUlLLGFBQWFOLEVBQVcsRUFBRyxHQUVwQ25ELEtBQUtxQyxPQUFPTSxpQkFBaUIsU0FBVUMsSUFDbkM1QyxLQUFLbUIsSUFBSXVDLFFBQVFuQyxJQUFJdkIsS0FBS29ELElBQUlPLGFBQWEsRUFBRyxFQUFHLEdBQUksS0FDckQsTUFBTUMsRUFBTzVELEtBQUtxQyxPQUFPd0Isd0JBQ25CTCxFQUFJTSxLQUFLQyxPQUFPbkIsRUFBRW9CLFFBQVVKLEVBQUtLLE1BQVFqRSxLQUFLNkIsTUFFOUNuQixFQUF1QixHQUFWLEdBRFRvRCxLQUFLQyxPQUFPbkIsRUFBRXNCLFFBQVVOLEVBQUtPLEtBQU9uRSxLQUFLNkIsTUFDM0IyQixHQUV4QkwsRUFBVWhELEtBQUtPLEdBQVNWLEtBQUttQixJQUFJaUQsYUFBYSxHQUM5Q2pCLEVBQVVoRCxLQUFLTyxFQUFRLEdBQUtWLEtBQUttQixJQUFJaUQsYUFBYSxHQUNsRGpCLEVBQVVoRCxLQUFLTyxFQUFRLEdBQUtWLEtBQUttQixJQUFJaUQsYUFBYSxHQUNsRGpCLEVBQVVoRCxLQUFLTyxFQUFRLEdBQUtWLEtBQUttQixJQUFJaUQsYUFBYSxHQUNsRHBFLEtBQUtvRCxJQUFJSyxhQUFhTixFQUFXLEVBQUcsR0FDcENuRCxLQUFLbUIsSUFBSXVDLFFBQVFuQyxJQUFJdkIsS0FBS29ELElBQUlPLGFBQWEsRUFBRyxFQUFHLEdBQUksSUFBSSxJQUc3RDNELEtBQUtxQyxPQUFPTSxpQkFBaUIsYUFBY0MsSUFDdkMsR0FBa0IsSUFBZEEsRUFBRXlCLFFBQWUsQ0FDakJyRSxLQUFLbUIsSUFBSXVDLFFBQVFuQyxJQUFJdkIsS0FBS29ELElBQUlPLGFBQWEsRUFBRyxFQUFHLEdBQUksS0FDckQsTUFBTUMsRUFBTzVELEtBQUtxQyxPQUFPd0Isd0JBQ25CTCxFQUFJTSxLQUFLQyxPQUFPbkIsRUFBRW9CLFFBQVVKLEVBQUtLLE1BQVFqRSxLQUFLNkIsTUFFOUNuQixFQUF1QixHQUFWLEdBRFRvRCxLQUFLQyxPQUFPbkIsRUFBRXNCLFFBQVVOLEVBQUtPLEtBQU9uRSxLQUFLNkIsTUFDM0IyQixHQUd4QkwsRUFBVWhELEtBQUtPLEdBQVNWLEtBQUttQixJQUFJaUQsYUFBYSxHQUM5Q2pCLEVBQVVoRCxLQUFLTyxFQUFRLEdBQUtWLEtBQUttQixJQUFJaUQsYUFBYSxHQUNsRGpCLEVBQVVoRCxLQUFLTyxFQUFRLEdBQUtWLEtBQUttQixJQUFJaUQsYUFBYSxHQUNsRGpCLEVBQVVoRCxLQUFLTyxFQUFRLEdBQUtWLEtBQUttQixJQUFJaUQsYUFBYSxHQUNsRHBFLEtBQUtvRCxJQUFJSyxhQUFhTixFQUFXLEVBQUcsR0FDcENuRCxLQUFLbUIsSUFBSXVDLFFBQVFuQyxJQUFJdkIsS0FBS29ELElBQUlPLGFBQWEsRUFBRyxFQUFHLEdBQUksSUFDekQsSUFFUixDQUNJdEIsYUFDQSxPQUFPckMsS0FBS2lDLE9BQ2hCLENBQ0ltQixVQUNBLE9BQU9wRCxLQUFLb0MsSUFDaEIsQ0FDQU0sUUFBUWIsR0FDSjdCLEtBQUs2QixLQUFPQSxFQUNaN0IsS0FBS3FDLE9BQU9FLE1BQU14QixNQUFXZixLQUFLOEIsS0FBS2YsTUFBUWYsS0FBSzZCLEtBQTFCLEtBQzFCN0IsS0FBS3FDLE9BQU9FLE1BQU12QixPQUFZaEIsS0FBSzhCLEtBQUtkLE9BQVNoQixLQUFLNkIsS0FBM0IsS0FDM0I3QixLQUFLc0UsUUFDVCxDQUNBeEIsV0FBV3lCLEVBQUssR0FDWixNQUFNQyxFQUFRVixLQUFLVyxLQUFLRixHQUN4QnZFLEtBQUs2QixNQUFnQixFQUFSMkMsRUFDYnhFLEtBQUswQyxRQUFRMUMsS0FBSzZCLEtBQ3RCLENBQ0E2QyxTQUNJQyxRQUFRQyxJQUFJLFdBQ1I1RSxLQUFLNkIsS0FBTyxLQUNaN0IsS0FBSzhDLFdBQVcsRUFFeEIsQ0FDQStCLFVBQ0lGLFFBQVFDLElBQUksWUFDUjVFLEtBQUs2QixLQUFPLEdBQ1o3QixLQUFLOEMsWUFBWSxFQUV6QixDQUNBZ0MsWUFDSUgsUUFBUUMsSUFBSSxjQUNaNUUsS0FBSzBDLFFBQVEsR0FDakIsQ0FDQTRCLFNBQ0lTLHNCQUFzQi9FLEtBQUtzRSxPQUFPVSxLQUFLaEYsTUFDM0MsRUN6R1csTUFBTWlGLEVBQ2pCcEYsWUFBWXFGLEdBQ1JsRixLQUFLa0YsU0FBV0EsRUFDaEJsRixLQUFLbUYsUUFBVWpELFNBQVNlLGNBQWMsSUFBSWlDLEtBQzFDbEYsS0FBS29GLFNBQVdwRixLQUFLbUYsUUFBUWxDLGNBQWMsWUFBWWlDLEtBQ3ZEbEYsS0FBS29GLFNBQVN6QyxpQkFBaUIsU0FBUyxLQUNwQzNDLEtBQUtxRixPQUFPLEdBRXBCLENBQ0FDLFNBQ1F0RixLQUFLbUYsUUFBUUksYUFBYSxRQUMxQnZGLEtBQUtxRixRQUdMckYsS0FBS3dGLE1BRWIsQ0FDQUEsT0FDSXhGLEtBQUttRixRQUFRTSxhQUFhLE9BQVEsR0FDdEMsQ0FDQUosUUFDSXJGLEtBQUttRixRQUFRTyxnQkFBZ0IsUUFDN0JDLE9BQU9DLGFBQWFDLFFBQVEsVUFBVyxRQUMzQyxFQ3ZCVyxNQUFNQyxFQUNqQmpHLFlBQVlxRixFQUFVL0QsR0FDbEJuQixLQUFLa0YsU0FBV0EsRUFDaEJsRixLQUFLbUIsSUFBTUEsRUFDWG5CLEtBQUsrRixTQUFXLENBQ1pDLEVBQUcsS0FDQ2hHLEtBQUttQixJQUFJOEUsU0FBUyxFQUV0QnJELEVBQUcsT0FDSHNELEVBQUlDLElBQ0FuRyxLQUFLbUIsSUFBSWlGLFNBQVNELEVBQUssRUFFM0JFLEVBQUcsS0FDQ3JHLEtBQUttQixJQUFJbUYsR0FBR0MsV0FBV2pCLFNBQ3ZCdEYsS0FBS21CLElBQUltRixHQUFHMUIsSUFBSSxPQUFPLEVBRTNCNEIsRUFBRyxLQUNDeEcsS0FBS21CLElBQUltRixHQUFHRyxjQUFjbkIsU0FDMUJ0RixLQUFLbUIsSUFBSW1GLEdBQUcxQixJQUFJLGVBQWUsRUFFbkM4QixFQUFHLE9BQ0g5QixJQUFNK0IsSUFDRjNHLEtBQUttQixJQUFJbUYsR0FBRzFCLElBQUkrQixFQUFJLEdBRzVCM0csS0FBS21GLFFBQVVqRCxTQUFTZSxjQUFjLElBQUlpQyxLQUMxQ2xGLEtBQUttRixRQUFReEMsaUJBQWlCLFdBQVlDLElBQ3hCLFVBQVZBLEVBQUVnRSxNQUNGNUcsS0FBSzZHLFFBQVE3RyxLQUFLbUYsUUFBUTJCLE9BQzFCOUcsS0FBS3FGLFFBQ1QsR0FFUixDQUNBRyxPQUNJeEYsS0FBS21GLFFBQVE0QixVQUFVeEYsSUFBSSxRQUMzQnZCLEtBQUttRixRQUFRNkIsUUFDYmhILEtBQUttRixRQUFRMkIsTUFBUSxHQUN6QixDQUNBekIsUUFDSXJGLEtBQUttRixRQUFRNEIsVUFBVUUsT0FBTyxRQUM5QmpILEtBQUttRixRQUFRMkIsTUFBUSxFQUN6QixDQUNBRCxRQUFRSyxHQUNKQSxFQUFNQSxFQUFJQyxNQUFNLEdBQ2hCLE1BQU9DLEtBQVlDLEdBQVFILEVBQUlJLE1BQU0sS0FDckMzQyxRQUFRQyxJQUFJd0MsRUFBU0MsR0FDakJELEtBQVdwSCxLQUFLK0YsU0FDaEIvRixLQUFLK0YsU0FBU3FCLE1BQVlDLEdBRzFCckgsS0FBS21CLElBQUltRixHQUFHMUIsSUFBSSxzQkFBc0J3QyxJQUU5QyxFQ2xESixNQUFNRyxFQUNGMUgsWUFBWTJILEdBQ1J4SCxLQUFLd0gsTUFBUUEsRUFDYnhILEtBQUt5SCxHQUFLQyxLQUFLQyxNQUFNQyxXQUNyQjVILEtBQUttRixRQUFVakQsU0FBU0MsY0FBYyxPQUN0Q25DLEtBQUs2SCxTQUFXM0YsU0FBU0MsY0FBYyxRQUN2Q25DLEtBQUttRixRQUFRc0MsR0FBS3pILEtBQUt5SCxHQUN2QnpILEtBQUttRixRQUFRNEIsVUFBVXhGLElBQUksT0FDM0J2QixLQUFLb0YsU0FBV2xELFNBQVNDLGNBQWMsVUFDdkNuQyxLQUFLb0YsU0FBU3FDLEdBQUssWUFBWXpILEtBQUt5SCxLQUNwQ3pILEtBQUtvRixTQUFTMEMsWUFBYyxJQUM1QjlILEtBQUs2SCxTQUFTQyxZQUFjTixFQUM1QnhILEtBQUttRixRQUFRakMsT0FBT2xELEtBQUs2SCxTQUFVN0gsS0FBS29GLFVBQ3hDbEQsU0FBU2UsY0FBYyxTQUFTOEUsWUFBWS9ILEtBQUttRixTQUNqRG5GLEtBQUtvRixTQUFTekMsaUJBQWlCLFNBQVMsS0FDcEMzQyxLQUFLcUYsT0FBTyxHQUVwQixDQUNBMkMsZ0JBQ0loSSxLQUFLbUYsUUFBUTRCLFVBQVVFLE9BQU8sU0FDbEMsQ0FDQWdCLGNBQ0lqSSxLQUFLbUYsUUFBUTRCLFVBQVV4RixJQUFJLFNBQy9CLENBQ0EyRyxPQUFPVixHQUNIeEgsS0FBS3dILE1BQVFBLEVBQ2J4SCxLQUFLNkgsU0FBU0MsWUFBY04sQ0FDaEMsQ0FDQW5DLFFBQ0lyRixLQUFLbUYsUUFBUU8sZ0JBQWdCLE9BQ2pDLEVBRVcsTUFBTXlDLEVBQ2pCdEksWUFBWXNCLEdBQ1JuQixLQUFLbUIsSUFBTUEsRUFDWG5CLEtBQUtvSSxjQUFnQixJQUFJbkQsRUFBYyxpQkFDdkNqRixLQUFLdUcsV0FBYSxJQUFJdEIsRUFBYyxjQUNwQ2pGLEtBQUtxSSxhQUFlLElBQUl2QyxFQUFhLFdBQVk5RixLQUFLbUIsS0FDdERuQixLQUFLc0ksWUFBY3BHLFNBQVNlLGNBQWMsU0FDMUNqRCxLQUFLdUksb0JBQXNCckcsU0FBU2UsY0FBYyxnQkFDbERqRCxLQUFLd0ksV0FBYXRHLFNBQVNlLGNBQWMsZUFDekNqRCxLQUFLeUcsY0FBZ0IsSUFBSXhCLEVBQWMsaUJBQ3ZDakYsS0FBS3lJLFlBQWN2RyxTQUFTZSxjQUFjLGdCQUMxQ2pELEtBQUswSSxhQUFleEcsU0FBU2UsY0FBYyxpQkFDM0NqRCxLQUFLMkksS0FBT3pHLFNBQVNlLGNBQWMsU0FDbkNqRCxLQUFLbUIsSUFBTUEsRUFDTndFLE9BQU9DLGFBQWFnRCxRQUFRLFlBQ2MsU0FBM0NqRCxPQUFPQyxhQUFhZ0QsUUFBUSxZQUM1QjVJLEtBQUtvSSxjQUFjNUMsT0FFdkJ4RixLQUFLMkksS0FBS3pGLE9BQU8sSUFBSXFFLEVBQUksWUFBWXBDLFNBQ3JDbkYsS0FBS3NFLFFBQ1QsQ0FDQXVFLGdCQUNJN0ksS0FBS3lJLFlBQVlLLFVBQVksR0FDN0I5SSxLQUFLMEksYUFBYVosWUFBYzlILEtBQUttQixJQUFJRixRQUFRbkIsS0FDakRFLEtBQUttQixJQUFJRixRQUFRWixPQUFPMEksU0FBUSxDQUFDeEksRUFBT0csS0FDcEMsTUFBTXNJLEVBQUs5RyxTQUFTQyxjQUFjLE9BQ2xDNkcsRUFBR2pDLFVBQVV4RixJQUFJLGdCQUNqQnlILEVBQUd6RyxNQUFNQyxnQkFBa0IsUUFBUWpDLEVBQU0sT0FBT0EsRUFBTSxPQUFPQSxFQUFNLE9BQU9BLEVBQU0sTUFDaEZQLEtBQUt5SSxZQUFZdkYsT0FBTzhGLEdBQ3hCQSxFQUFHckcsaUJBQWlCLFNBQVMsS0FDekIzQyxLQUFLbUIsSUFBSWlELGFBQWU3RCxFQUN4QlAsS0FBS3NFLFFBQVEsR0FDZixHQUVWLENBQ0FNLElBQUkrQixHQUNBM0csS0FBS2lKLElBQU1DLGFBQWFsSixLQUFLaUosSUFDN0JqSixLQUFLd0ksV0FBV3pCLFVBQVV4RixJQUFJLFFBQzlCdkIsS0FBS3dJLFdBQVdWLFlBQWNuQixFQUM5QjNHLEtBQUtpSixHQUFLRSxZQUFXLEtBQ2pCbkosS0FBS3dJLFdBQVd6QixVQUFVRSxPQUFPLFFBQ2pDakgsS0FBS3dJLFdBQVdWLFlBQWMsRUFBRSxHQUNqQyxJQUNQLENBQ0F4RCxTQUNJdEUsS0FBSzZJLGdCQUNMN0ksS0FBS3NJLFlBQVlSLFlBQWlDLElBQWhCOUgsS0FBS21CLElBQUlVLEtBQVosSUFDL0I3QixLQUFLdUksb0JBQW9CaEcsTUFBTUMsZ0JBQWtCLFFBQVF4QyxLQUFLbUIsSUFBSWlELGFBQWEsT0FBT3BFLEtBQUttQixJQUFJaUQsYUFBYSxPQUFPcEUsS0FBS21CLElBQUlpRCxhQUFhLE9BQU9wRSxLQUFLbUIsSUFBSWlELGFBQWEsS0FDMUssRUNqRkosTUFBTWpELEVBQU0sSUNJRyxNQUNYdEIsY0FDSUcsS0FBSzBELFFBQVUsSUFBSXhDLEVBQVFsQixNQUMzQkEsS0FBSzZCLEtBQU8sR0FDWjdCLEtBQUtvSixLQUFPLFNBQ1pwSixLQUFLTyxNQUFRLEVBQ2JQLEtBQUsrQixNQUFRLENBQUMsSUFBSWpCLEVBQVcsSUFBSUEsR0FDakNkLEtBQUtnQyxVQUFZLEVBQ2pCaEMsS0FBS2lCLFFBQVViLEVBQ2ZKLEtBQUtvRSxhQUFlcEUsS0FBS2lCLFFBQVFKLFNBQVMsR0FDMUNiLEtBQUtxSixTQUFXLENBQUNySixLQUFLaUIsU0FDdEJqQixLQUFLc0csR0FBSyxJQUFJNkIsRUFBR25JLE1BQ2pCQSxLQUFLc0osV0FBYSxFQUNsQnRKLEtBQUt1SixTQUFXLElBQUkzSCxFQUFTNUIsTUFDN0JBLEtBQUt3SixPQUNULENBQ0FBLFFBRUl0SCxTQUFTUyxpQkFBaUIsV0FBWUMsSUFDbEMsR0FBSUEsRUFBRTZHLFNBQXFCLE1BQVY3RyxFQUFFZ0UsSUFHZixPQUZBaEUsRUFBRUMsc0JBQ0Y3QyxLQUFLdUosU0FBUzdFLFNBR2xCLEdBQUk5QixFQUFFNkcsU0FBcUIsTUFBVjdHLEVBQUVnRSxJQUdmLE9BRkFoRSxFQUFFQyxzQkFDRjdDLEtBQUt1SixTQUFTMUUsVUFHbEIsR0FBSWpDLEVBQUU2RyxTQUFxQixNQUFWN0csRUFBRWdFLElBR2YsT0FGQWhFLEVBQUVDLHNCQUNGN0MsS0FBS3VKLFNBQVN6RSxZQUdsQixHQUFJbEMsRUFBRTZHLFNBQXFCLE1BQVY3RyxFQUFFZ0UsSUFHZixPQUZBaEUsRUFBRUMsc0JBQ0Y3QyxLQUFLMEIsT0FHVCxPQUFRa0IsRUFBRWdFLEtBRU4sSUFBSyxRQUNJNUcsS0FBS3NHLEdBQUcrQixhQUFhbEQsUUFBUTRCLFVBQVUyQyxTQUFTLFVBQ2pEOUcsRUFBRUMsaUJBQ0Y3QyxLQUFLdUosU0FBU2xILE9BQU9FLE1BQU1sQixPQUFTLE9BQ3BDckIsS0FBS3VKLFNBQVNsSCxPQUFPTSxpQkFBaUIsYUFBY0MsSUFDOUIsSUFBZEEsRUFBRXlCLFVBQ0ZyRSxLQUFLdUosU0FBU2xILE9BQU9FLE1BQU1sQixPQUFTLFdBQ3BDckIsS0FBS3VKLFNBQVNsSCxPQUFPRSxNQUFNMEIsS0FBTyxHQUFHckIsRUFBRStHLGNBQ3ZDM0osS0FBS3VKLFNBQVNsSCxPQUFPRSxNQUFNNEIsSUFBTSxHQUFHdkIsRUFBRWdILGNBQzFDLEtBR1IsTUFDSixJQUFLLElBQ0RoSCxFQUFFQyxpQkFDRjdDLEtBQUtzRyxHQUFHQyxXQUFXakIsU0FDbkIsTUFDSixJQUFLLFNBQ0QxQyxFQUFFQyxpQkFDRTdDLEtBQUtzRyxHQUFHK0IsYUFBYWxELFFBQVE0QixVQUFVMkMsU0FBUyxRQUNoRDFKLEtBQUtzRyxHQUFHK0IsYUFBYWhELFFBR3JCckYsS0FBS3NHLEdBQUcrQixhQUFhN0MsT0FFakMsSUFFSnRELFNBQVNTLGlCQUFpQixTQUFVQyxJQUNoQyxHQUNTLE1BRERBLEVBQUVnRSxJQUVGaEUsRUFBRUMsaUJBQ0Y3QyxLQUFLdUosU0FBU2xILE9BQU9FLE1BQU1sQixPQUFTLFNBRTVDLElBRUpyQixLQUFLc0UsUUFDVCxDQUNBQSxTQUNJdEUsS0FBS3VKLFNBQVNqRixTQUNkdEUsS0FBS3NHLEdBQUdoQyxRQUNaLENBQ0F1RixLQUFLQyxFQUFRQyxFQUFRQyxFQUFhQyxHQUM5QixNQUFNQyxFQUFTbEssS0FBSytCLE1BQU0vQixLQUFLZ0MsV0FBVzdCLEtBQUtILEtBQUtzSixZQUFZbkosS0FFNUQySixFQUFTLEdBQ1RBLEdBQVVJLEVBQU81SSxRQUNqQnlJLEVBQVMsR0FDVEEsR0FBVUcsRUFBTyxHQUFHNUksUUFJcEI0SSxFQUFPSixHQUFRQyxLQUFZRSxHQUkzQkMsRUFBT0osR0FBUUMsS0FBWUMsSUFJL0JFLEVBQU9KLEdBQVFDLEdBQVVFLEVBRXpCakssS0FBSzZKLEtBQUtDLEVBQVMsRUFBR0MsRUFBUUMsRUFBYUMsR0FDM0NqSyxLQUFLNkosS0FBS0MsRUFBUyxFQUFHQyxFQUFRQyxFQUFhQyxHQUMzQ2pLLEtBQUs2SixLQUFLQyxFQUFRQyxFQUFTLEVBQUdDLEVBQWFDLEdBQzNDakssS0FBSzZKLEtBQUtDLEVBQVFDLEVBQVMsRUFBR0MsRUFBYUMsR0FDL0MsQ0FDQWhFLFVBQ0l0QixRQUFRQyxJQUFJLE1BQ2hCLENBQ0F3QixTQUFTRCxHQUNMeEIsUUFBUUMsSUFBSSxnQkFBa0J1QixFQUNsQyxDQUNBekUsT0FDSTFCLEtBQUswRCxRQUFRaEMsTUFDakIsQ0FDQUMsT0FDSTNCLEtBQUswRCxRQUFRL0IsTUFDakIsQ0FDQXdJLFdBQVdmLEdBQ1BwSixLQUFLb0osS0FBT0EsQ0FDaEIsR0QzSEp6RCxPQUFPeEUsSUFBTUEsQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RzYnAvLi9zcmMvbGF5ZXIudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9wYWxldHRlLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvZmlsZS50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL2hpc3RvcnkudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9yZW5kZXJlci50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL2RpYWxvZy50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL2lucHV0LWNvbW1hbmQudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy91aS50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvYXBwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIExheWVyIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lID0gXCJOZXcgbGF5ZXJcIiwgbG9ja2VkID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5sb2NrZWQgPSBsb2NrZWQ7XG4gICAgICAgIHRoaXMub3BhY2l0eSA9IDI1NTtcbiAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kYXRhID0gW1tdXTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQYWxldHRlIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lID0gXCJOZXcgcGFsZXR0ZVwiKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29sb3JzID0gW1tdXTtcbiAgICB9XG4gICAgYWRkQ29sb3IoY29sb3IpIHtcbiAgICAgICAgdGhpcy5jb2xvcnMucHVzaChjb2xvcik7XG4gICAgfVxuICAgIHJlbW92ZUNvbG9yKGluZGV4KSB7XG4gICAgICAgIHRoaXMuY29sb3JzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIHNldENvbG9yKGluZGV4LCBjb2xvcikge1xuICAgICAgICB0aGlzLmNvbG9yc1tpbmRleF0gPSBjb2xvcjtcbiAgICB9XG4gICAgZ2V0Q29sb3IoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3JzW2luZGV4XTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgZGVmYXVsdFBhbGV0dGUgPSBuZXcgUGFsZXR0ZShcIkRlZmF1bHRcIik7XG4vLyBORVMgcGFsZXR0ZVxuZGVmYXVsdFBhbGV0dGUuY29sb3JzID0gW1xuICAgIFswLCAwLCAwLCAyNTVdLFxuICAgIFsyNTIsIDI1MiwgMjUyLCAyNTVdLFxuICAgIFsyNDgsIDI0OCwgMjQ4LCAyNTVdLFxuICAgIFsxODgsIDE4OCwgMTg4LCAyNTVdLFxuICAgIFsxMjQsIDEyNCwgMTI0LCAyNTVdLFxuICAgIFsxNjQsIDIyOCwgMjUyLCAyNTVdLFxuICAgIFs2MCwgMTg4LCAyNTIsIDI1NV0sXG4gICAgWzAsIDEyMCwgMjQ4LCAyNTVdLFxuICAgIFswLCAwLCAyNTIsIDI1NV0sXG4gICAgWzE4NCwgMTg0LCAyNDgsIDI1NV0sXG4gICAgWzEwNCwgMTM2LCAyNTIsIDI1NV0sXG4gICAgWzAsIDg4LCAyNDgsIDI1NV0sXG4gICAgWzAsIDAsIDE4OCwgMjU1XSxcbiAgICBbMjE2LCAxODQsIDI0OCwgMjU1XSxcbiAgICBbMTUyLCAxMjAsIDI0OCwgMjU1XSxcbiAgICBbMTA0LCA2OCwgMjUyLCAyNTVdLFxuICAgIFs2OCwgNDAsIDE4OCwgMjU1XSxcbiAgICBbMjQ4LCAxODQsIDI0OCwgMjU1XSxcbiAgICBbMjQ4LCAxMjAsIDI0OCwgMjU1XSxcbiAgICBbMjE2LCAwLCAyMDQsIDI1NV0sXG4gICAgWzE0OCwgMCwgMTMyLCAyNTVdLFxuICAgIFsyNDgsIDE2NCwgMTkyLCAyNTVdLFxuICAgIFsyNDgsIDg4LCAxNTIsIDI1NV0sXG4gICAgWzIyOCwgMCwgODgsIDI1NV0sXG4gICAgWzE2OCwgMCwgMzIsIDI1NV0sXG4gICAgWzI0MCwgMjA4LCAxNzYsIDI1NV0sXG4gICAgWzI0OCwgMTIwLCA4OCwgMjU1XSxcbiAgICBbMjQ4LCA1NiwgMCwgMjU1XSxcbiAgICBbMTY4LCAxNiwgMCwgMjU1XSxcbiAgICBbMjUyLCAyMjQsIDE2OCwgMjU1XSxcbiAgICBbMjUyLCAxNjAsIDY4LCAyNTVdLFxuICAgIFsyMjgsIDkyLCAxNiwgMjU1XSxcbiAgICBbMTM2LCAyMCwgMCwgMjU1XSxcbiAgICBbMjQ4LCAyMTYsIDEyMCwgMjU1XSxcbiAgICBbMjQ4LCAxODQsIDAsIDI1NV0sXG4gICAgWzE3MiwgMTI0LCAwLCAyNTVdLFxuICAgIFs4MCwgNDAsIDAsIDI1NV0sXG4gICAgWzIxNiwgMjQ4LCAxMjAsIDI1NV0sXG4gICAgWzE4NCwgMjQ4LCAyNCwgMjU1XSxcbiAgICBbMCwgMTg0LCAwLCAyNTVdLFxuICAgIFswLCAxMjAsIDAsIDI1NV0sXG4gICAgWzE4NCwgMjQ4LCAxODQsIDI1NV0sXG4gICAgWzg4LCAyMTYsIDg0LCAyNTVdLFxuICAgIFswLCAxNjgsIDAsIDI1NV0sXG4gICAgWzAsIDEwNCwgMCwgMjU1XSxcbiAgICBbMTg0LCAyNDgsIDIxNiwgMjU1XSxcbiAgICBbODgsIDI0OCwgMTUyLCAyNTVdLFxuICAgIFswLCAxNjgsIDY4LCAyNTVdLFxuICAgIFswLCA4OCwgMCwgMjU1XSxcbiAgICBbMCwgMjUyLCAyNTIsIDI1NV0sXG4gICAgWzAsIDIzMiwgMjE2LCAyNTVdLFxuICAgIFswLCAxMzYsIDEzNiwgMjU1XSxcbiAgICBbMCwgNjQsIDg4LCAyNTVdLFxuICAgIFsyNDgsIDIxNiwgMjQ4LCAyNTVdLFxuICAgIFsxMjAsIDEyMCwgMTIwLCAyNTVdLFxuXTtcbiIsImltcG9ydCBMYXllciBmcm9tIFwiLi9sYXllclwiO1xuaW1wb3J0IHsgZGVmYXVsdFBhbGV0dGUgfSBmcm9tIFwiLi9wYWxldHRlXCI7XG5leHBvcnQgY2xhc3MgV2l6RmlsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgICB0aGlzLndpZHRoID0gMTY7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gMTY7XG4gICAgICAgIHRoaXMucGFsZXR0ZSA9IGRlZmF1bHRQYWxldHRlO1xuICAgICAgICB0aGlzLmRhdGEgPSBbbmV3IExheWVyKFwiQmFja2dyb3VuZFwiLCB0cnVlKV07XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGlzdG9yeSB7XG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLml0ZW1zID0gW107XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxO1xuICAgIH1cbiAgICBhZGQoaXRlbSkge1xuICAgICAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxO1xuICAgIH1cbiAgICBjbGVhckZyb21DdXJzb3IoKSB7XG4gICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKHRoaXMuY3Vyc29yICsgMSk7XG4gICAgfVxuICAgIHVuZG8oKSB7XG4gICAgICAgIC8vICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIC8vICAgIHRoaXMuY3Vyc29yLS07XG4gICAgICAgIC8vICAgIHRoaXMuYXBwLmZpbGVzW3RoaXMuYXBwLmZpbGVJbmRleF0uZGF0YS5wdXRJbWFnZURhdGEodGhpcy5pdGVtc1t0aGlzLmN1cnNvcl0sIDAsIDApO1xuICAgICAgICAvLyAgfVxuICAgIH1cbiAgICByZWRvKCkge1xuICAgICAgICAvLyAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5pdGVtcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIC8vICAgIHRoaXMuY3Vyc29yKys7XG4gICAgICAgIC8vICAgIHRoaXMuYXBwLmN0eC5wdXRJbWFnZURhdGEodGhpcy5pdGVtc1t0aGlzLmN1cnNvcl0sIDAsIDApO1xuICAgICAgICAvLyAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IGRlZmF1bHRQYWxldHRlIH0gZnJvbSBcIi4vcGFsZXR0ZVwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy56b29tID0gMjU7XG4gICAgICAgIHRoaXMuZmlsZSA9IHRoaXMuYXBwLmZpbGVzW3RoaXMuYXBwLmZpbGVJbmRleF07XG4gICAgICAgIHRoaXMuX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG4gICAgICAgIHRoaXMuX2N0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuYXBwLmZpbGVzW3RoaXMuYXBwLmZpbGVJbmRleF0ud2lkdGg7XG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuYXBwLmZpbGVzW3RoaXMuYXBwLmZpbGVJbmRleF0uaGVpZ2h0O1xuICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5pbWFnZVJlbmRlcmluZyA9IFwicGl4ZWxhdGVkXCI7XG4gICAgICAgIHRoaXMuc2V0Wm9vbSh0aGlzLnpvb20pO1xuICAgICAgICAvLyBhYmlsaXR5IHRvIHpvb20gaW4gYW5kIG91dCB3aXRoIG1vdXNlIHdoZWVsXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy56b29tQ2hhbmdlKGUuZGVsdGFZKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIiNtYWluXCIpLmFwcGVuZCh0aGlzLmNhbnZhcyk7XG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IHRoaXMuY3R4LmNyZWF0ZUltYWdlRGF0YSgxNiwgMTYpO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAuZmlsZXNbdGhpcy5hcHAuZmlsZUluZGV4XTtcbiAgICAgICAgZm9yIChsZXQgbCA9IDA7IGwgPiBmaWxlLmRhdGEubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgMTY7IHkrKykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgMTY7IHgrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xvciA9IGZpbGUucGFsZXR0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBmaWxlLnBhbGV0dGUuZ2V0Q29sb3IoZmlsZS5kYXRhW2xdLmRhdGFbeV1beF0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRQYWxldHRlLmdldENvbG9yKGZpbGUuZGF0YVtsXS5kYXRhW3ldW3hdKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSAoeSAqIDE2ICsgeCkgKiA0O1xuICAgICAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleF0gPSBjb2xvclswXTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSA9IGNvbG9yWzFdO1xuICAgICAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdID0gY29sb3JbMl07XG4gICAgICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgM10gPSBjb2xvclszXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdHgucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG4gICAgICAgIC8vIGFiaWxpdHkgdG8gZHJhdyBwaXhlbCB3aXRoIG1vdXNlIGNsaWNrXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcHAuaGlzdG9yeS5hZGQodGhpcy5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDE2LCAxNikpO1xuICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IoKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgLyB0aGlzLnpvb20pO1xuICAgICAgICAgICAgY29uc3QgeSA9IE1hdGguZmxvb3IoKGUuY2xpZW50WSAtIHJlY3QudG9wKSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9ICh5ICogMTYgKyB4KSAqIDQ7XG4gICAgICAgICAgICAvL3RoaXMuZmlsZXNbdGhpcy5maWxlSW5kZXhdLmRhdGFbdGhpcy5sYXllckluZGV4XS5kYXRhW3ldW3hdID0gdGhpcy5jb2xvcjtcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4XSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclswXTtcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSB0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMV07XG4gICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzJdO1xuICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAzXSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclszXTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICAgICAgICAgICAgdGhpcy5hcHAuaGlzdG9yeS5hZGQodGhpcy5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDE2LCAxNikpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gYWJpbGl0eSB0byBkcmF3IHBpeGVsIHdpdGggbW91c2UgbW92ZVxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5idXR0b25zID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAuaGlzdG9yeS5hZGQodGhpcy5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDE2LCAxNikpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB4ID0gTWF0aC5mbG9vcigoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IE1hdGguZmxvb3IoKGUuY2xpZW50WSAtIHJlY3QudG9wKSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSAoeSAqIDE2ICsgeCkgKiA0O1xuICAgICAgICAgICAgICAgIC8vdGhpcy5maWxlc1t0aGlzLmZpbGVJbmRleF0uZGF0YVt0aGlzLmxheWVySW5kZXhdLmRhdGFbeV1beF0gPVxuICAgICAgICAgICAgICAgIC8vIHRoaXMuY29sb3I7XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXhdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzBdO1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSB0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMV07XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclsyXTtcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDNdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzNdO1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLmhpc3RvcnkuYWRkKHRoaXMuY3R4LmdldEltYWdlRGF0YSgwLCAwLCAxNiwgMTYpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBjYW52YXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW52YXM7XG4gICAgfVxuICAgIGdldCBjdHgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdHg7XG4gICAgfVxuICAgIHNldFpvb20oem9vbSkge1xuICAgICAgICB0aGlzLnpvb20gPSB6b29tO1xuICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS53aWR0aCA9IGAke3RoaXMuZmlsZS53aWR0aCAqIHRoaXMuem9vbX1weGA7XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuZmlsZS5oZWlnaHQgKiB0aGlzLnpvb219cHhgO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgICB6b29tQ2hhbmdlKGR0ID0gMCkge1xuICAgICAgICBjb25zdCBkZWx0YSA9IE1hdGguc2lnbihkdCk7XG4gICAgICAgIHRoaXMuem9vbSArPSBkZWx0YSAqIDg7XG4gICAgICAgIHRoaXMuc2V0Wm9vbSh0aGlzLnpvb20pO1xuICAgIH1cbiAgICB6b29tSW4oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiem9vbSBpblwiKTtcbiAgICAgICAgaWYgKHRoaXMuem9vbSA8IDEyOCkge1xuICAgICAgICAgICAgdGhpcy56b29tQ2hhbmdlKDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHpvb21PdXQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiem9vbSBvdXRcIik7XG4gICAgICAgIGlmICh0aGlzLnpvb20gPiAxKSB7XG4gICAgICAgICAgICB0aGlzLnpvb21DaGFuZ2UoLTEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHpvb21SZXNldCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ6b29tIHJlc2V0XCIpO1xuICAgICAgICB0aGlzLnNldFpvb20oMjUpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEaWFsb2dFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3NlbGVjdG9yfWApO1xuICAgICAgICB0aGlzLmNsb3NlQnRuID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCNidG5DbG9zZSR7c2VsZWN0b3J9YCk7XG4gICAgICAgIHRoaXMuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvZ2dsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJvcGVuXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwib3BlblwiLCBcIlwiKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJvcGVuXCIpO1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzdGFydHVwXCIsIFwiZmFsc2VcIik7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5wdXRDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgYXBwKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuY29tbWFuZHMgPSB7XG4gICAgICAgICAgICBuOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAubmV3RmlsZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGU6ICgpID0+IHsgfSxcbiAgICAgICAgICAgIHc6ICh0eXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAuc2F2ZUZpbGUodHlwZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnVpLmhlbHBEaWFsb2cudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkubG9nKFwiSGVscFwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkucGFsZXR0ZURpYWxvZy50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC51aS5sb2coXCJPcGVuIHBhbGV0dGVcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgUDogKCkgPT4geyB9LFxuICAgICAgICAgICAgbG9nOiAobXNnKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkubG9nKG1zZyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtzZWxlY3Rvcn1gKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSh0aGlzLmVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9IFwiOlwiO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuICAgICAgICB0aGlzLmVsZW1lbnQudmFsdWUgPSBcIlwiO1xuICAgIH1cbiAgICBleGVjdXRlKGNtZCkge1xuICAgICAgICBjbWQgPSBjbWQuc2xpY2UoMSk7XG4gICAgICAgIGNvbnN0IFtjb21tYW5kLCAuLi5hcmdzXSA9IGNtZC5zcGxpdChcIiBcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKGNvbW1hbmQsIGFyZ3MpO1xuICAgICAgICBpZiAoY29tbWFuZCBpbiB0aGlzLmNvbW1hbmRzKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRzW2NvbW1hbmRdKC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hcHAudWkubG9nKGBjb21tYW5kIG5vdCBmb3VuZDogJHtjb21tYW5kfWApO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IERpYWxvZ0VsZW1lbnQgZnJvbSBcIi4vZGlhbG9nXCI7XG5pbXBvcnQgSW5wdXRDb21tYW5kIGZyb20gXCIuL2lucHV0LWNvbW1hbmRcIjtcbmNsYXNzIFRhYiB7XG4gICAgY29uc3RydWN0b3IodGl0bGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmlkID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnRhYlRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pZCA9IHRoaXMuaWQ7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFiXCIpO1xuICAgICAgICB0aGlzLmNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgdGhpcy5jbG9zZUJ0bi5pZCA9IGAjYnRuQ2xvc2Uke3RoaXMuaWR9YDtcbiAgICAgICAgdGhpcy5jbG9zZUJ0bi50ZXh0Q29udGVudCA9IFwiWFwiO1xuICAgICAgICB0aGlzLnRhYlRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmQodGhpcy50YWJUaXRsZSwgdGhpcy5jbG9zZUJ0bik7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFic1wiKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlVGFiKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICB9XG4gICAgYWN0aXZhdGVUYWIoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIH1cbiAgICByZW5hbWUodGl0bGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLnRhYlRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwib3BlblwiKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSSB7XG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnN0YXJ0dXBEaWFsb2cgPSBuZXcgRGlhbG9nRWxlbWVudChcIkRpYWxvZ1N0YXJ0dXBcIik7XG4gICAgICAgIHRoaXMuaGVscERpYWxvZyA9IG5ldyBEaWFsb2dFbGVtZW50KFwiRGlhbG9nSGVscFwiKTtcbiAgICAgICAgdGhpcy5pbnB1dENvbW1hbmQgPSBuZXcgSW5wdXRDb21tYW5kKFwiSW5wdXRDbWRcIiwgdGhpcy5hcHApO1xuICAgICAgICB0aGlzLnpvb21FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN6b29tXCIpO1xuICAgICAgICB0aGlzLnByaW1hcnlDb2xvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rvb2xQckNvbG9yXCIpO1xuICAgICAgICB0aGlzLnN0YXR1c0xpbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0YXR1c0xpbmVcIik7XG4gICAgICAgIHRoaXMucGFsZXR0ZURpYWxvZyA9IG5ldyBEaWFsb2dFbGVtZW50KFwiRGlhbG9nUGFsZXR0ZVwiKTtcbiAgICAgICAgdGhpcy5wYWxldHRlV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGFsZXR0ZVdyYXBcIik7XG4gICAgICAgIHRoaXMucGFsZXR0ZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwYWxldHRlVGl0bGVcIik7XG4gICAgICAgIHRoaXMudGFicyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFic1wiKTtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIGlmICghd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic3RhcnR1cFwiKSB8fFxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic3RhcnR1cFwiKSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnR1cERpYWxvZy5vcGVuKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YWJzLmFwcGVuZChuZXcgVGFiKFwiVW50aXRsZWRcIikuZWxlbWVudCk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIHJlbmRlclBhbGV0dGUoKSB7XG4gICAgICAgIHRoaXMucGFsZXR0ZVdyYXAuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgdGhpcy5wYWxldHRlVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLmFwcC5wYWxldHRlLm5hbWU7XG4gICAgICAgIHRoaXMuYXBwLnBhbGV0dGUuY29sb3JzLmZvckVhY2goKGNvbG9yLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChcImNvbG9yLXN3YXRjaFwiKTtcbiAgICAgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGByZ2JhKCR7Y29sb3JbMF19LCAke2NvbG9yWzFdfSwgJHtjb2xvclsyXX0sICR7Y29sb3JbM119KWA7XG4gICAgICAgICAgICB0aGlzLnBhbGV0dGVXcmFwLmFwcGVuZChlbCk7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnByaW1hcnlDb2xvciA9IGNvbG9yO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxvZyhtc2cpIHtcbiAgICAgICAgdGhpcy50byAmJiBjbGVhclRpbWVvdXQodGhpcy50byk7XG4gICAgICAgIHRoaXMuc3RhdHVzTGluZS5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcbiAgICAgICAgdGhpcy5zdGF0dXNMaW5lLnRleHRDb250ZW50ID0gbXNnO1xuICAgICAgICB0aGlzLnRvID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0xpbmUuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5cIik7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0xpbmUudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICB9LCAyMDAwKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLnJlbmRlclBhbGV0dGUoKTtcbiAgICAgICAgdGhpcy56b29tRWxlbWVudC50ZXh0Q29udGVudCA9IGAke3RoaXMuYXBwLnpvb20gKiAxMDB9JWA7XG4gICAgICAgIHRoaXMucHJpbWFyeUNvbG9yRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBgcmdiYSgke3RoaXMuYXBwLnByaW1hcnlDb2xvclswXX0sICR7dGhpcy5hcHAucHJpbWFyeUNvbG9yWzFdfSwgJHt0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMl19LCAke3RoaXMuYXBwLnByaW1hcnlDb2xvclszXX0pYDtcbiAgICB9XG59XG4iLCJpbXBvcnQgQXBwIGZyb20gXCIuL2FwcFwiO1xuY29uc3QgYXBwID0gbmV3IEFwcCgpO1xuLy9AdHMtaWdub3JlXG53aW5kb3cuYXBwID0gYXBwO1xuIiwiaW1wb3J0IHsgV2l6RmlsZSB9IGZyb20gXCIuL2ZpbGVcIjtcbmltcG9ydCBIaXN0b3J5IGZyb20gXCIuL2hpc3RvcnlcIjtcbmltcG9ydCB7IGRlZmF1bHRQYWxldHRlIH0gZnJvbSBcIi4vcGFsZXR0ZVwiO1xuaW1wb3J0IFJlbmRlcmVyIGZyb20gXCIuL3JlbmRlcmVyXCI7XG5pbXBvcnQgVUkgZnJvbSBcIi4vdWlcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHRoaXMpO1xuICAgICAgICB0aGlzLnpvb20gPSAyNTtcbiAgICAgICAgdGhpcy50b29sID0gXCJwZW5jaWxcIjtcbiAgICAgICAgdGhpcy5jb2xvciA9IDE7XG4gICAgICAgIHRoaXMuZmlsZXMgPSBbbmV3IFdpekZpbGUoKSwgbmV3IFdpekZpbGUoKV07XG4gICAgICAgIHRoaXMuZmlsZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5wYWxldHRlID0gZGVmYXVsdFBhbGV0dGU7XG4gICAgICAgIHRoaXMucHJpbWFyeUNvbG9yID0gdGhpcy5wYWxldHRlLmdldENvbG9yKDApO1xuICAgICAgICB0aGlzLnBhbGV0dGVzID0gW3RoaXMucGFsZXR0ZV07XG4gICAgICAgIHRoaXMudWkgPSBuZXcgVUkodGhpcyk7XG4gICAgICAgIHRoaXMubGF5ZXJJbmRleCA9IDA7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIodGhpcyk7XG4gICAgICAgIHRoaXMuc2V0dXAoKTtcbiAgICB9XG4gICAgc2V0dXAoKSB7XG4gICAgICAgIC8vIGFiaWxpdHkgdG8gdW5kbyBjaGFuZ2VzIHdpdGggY21kICsgelxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUubWV0YUtleSAmJiBlLmtleSA9PT0gXCI9XCIpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci56b29tSW4oKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5tZXRhS2V5ICYmIGUua2V5ID09PSBcIi1cIikge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnpvb21PdXQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5tZXRhS2V5ICYmIGUua2V5ID09PSBcIjBcIikge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnpvb21SZXNldCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLm1ldGFLZXkgJiYgZS5rZXkgPT09IFwielwiKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudW5kbygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBob2xkIHNwYWNlIGFuZCBtb3ZlIG1vdXNlLCBtb3ZlIGNhbnZhc1xuICAgICAgICAgICAgICAgIGNhc2UgXCJTcGFjZVwiOlxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudWkuaW5wdXRDb21tYW5kLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3BlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5jYW52YXMuc3R5bGUuY3Vyc29yID0gXCJncmFiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuYnV0dG9ucyA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSBcImdyYWJiaW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuY2FudmFzLnN0eWxlLmxlZnQgPSBgJHtlLm1vdmVtZW50WH1weGA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuY2FudmFzLnN0eWxlLnRvcCA9IGAke2UubW92ZW1lbnRZfXB4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiP1wiOlxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudWkuaGVscERpYWxvZy50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkVzY2FwZVwiOlxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVpLmlucHV0Q29tbWFuZC5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcIm9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudWkuaW5wdXRDb21tYW5kLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVpLmlucHV0Q29tbWFuZC5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCIgXCI6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5jYW52YXMuc3R5bGUuY3Vyc29yID0gXCJkZWZhdWx0XCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnVwZGF0ZSgpO1xuICAgICAgICB0aGlzLnVpLnVwZGF0ZSgpO1xuICAgIH1cbiAgICBmaWxsKHN0YXJ0WCwgc3RhcnRZLCB0YXJnZXRDb2xvciwgcmVwbGFjZUNvbG9yKSB7XG4gICAgICAgIGNvbnN0IG1hdHJpeCA9IHRoaXMuZmlsZXNbdGhpcy5maWxlSW5kZXhdLmRhdGFbdGhpcy5sYXllckluZGV4XS5kYXRhO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgc3RhcnQgY29vcmRpbmF0ZXMgYXJlIG91dCBvZiBib3VuZHNcbiAgICAgICAgaWYgKHN0YXJ0WCA8IDAgfHxcbiAgICAgICAgICAgIHN0YXJ0WCA+PSBtYXRyaXgubGVuZ3RoIHx8XG4gICAgICAgICAgICBzdGFydFkgPCAwIHx8XG4gICAgICAgICAgICBzdGFydFkgPj0gbWF0cml4WzBdLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YXJnZXQgdmFsdWUgbWF0Y2hlcyB0aGUgcmVwbGFjZW1lbnQgdmFsdWVcbiAgICAgICAgaWYgKG1hdHJpeFtzdGFydFhdW3N0YXJ0WV0gPT09IHJlcGxhY2VDb2xvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IHZhbHVlIG1hdGNoZXMgdGhlIHRhcmdldCB2YWx1ZVxuICAgICAgICBpZiAobWF0cml4W3N0YXJ0WF1bc3RhcnRZXSAhPT0gdGFyZ2V0Q29sb3IpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXBsYWNlIHRoZSBjdXJyZW50IHZhbHVlIHdpdGggdGhlIHJlcGxhY2VtZW50IHZhbHVlXG4gICAgICAgIG1hdHJpeFtzdGFydFhdW3N0YXJ0WV0gPSByZXBsYWNlQ29sb3I7XG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGZpbGwgYWRqYWNlbnQgY2VsbHNcbiAgICAgICAgdGhpcy5maWxsKHN0YXJ0WCArIDEsIHN0YXJ0WSwgdGFyZ2V0Q29sb3IsIHJlcGxhY2VDb2xvcik7IC8vIFJpZ2h0XG4gICAgICAgIHRoaXMuZmlsbChzdGFydFggLSAxLCBzdGFydFksIHRhcmdldENvbG9yLCByZXBsYWNlQ29sb3IpOyAvLyBMZWZ0XG4gICAgICAgIHRoaXMuZmlsbChzdGFydFgsIHN0YXJ0WSArIDEsIHRhcmdldENvbG9yLCByZXBsYWNlQ29sb3IpOyAvLyBEb3duXG4gICAgICAgIHRoaXMuZmlsbChzdGFydFgsIHN0YXJ0WSAtIDEsIHRhcmdldENvbG9yLCByZXBsYWNlQ29sb3IpOyAvLyBVcFxuICAgIH1cbiAgICBuZXdGaWxlKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIm5ld1wiKTtcbiAgICB9XG4gICAgc2F2ZUZpbGUodHlwZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInNhdmUgZmlsZSBhcyBcIiArIHR5cGUpO1xuICAgIH1cbiAgICB1bmRvKCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkudW5kbygpO1xuICAgIH1cbiAgICByZWRvKCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkucmVkbygpO1xuICAgIH1cbiAgICBjaGFuZ2VUb29sKHRvb2wpIHtcbiAgICAgICAgdGhpcy50b29sID0gdG9vbDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiTGF5ZXIiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJsb2NrZWQiLCJ0aGlzIiwib3BhY2l0eSIsInZpc2libGUiLCJkYXRhIiwiZGVmYXVsdFBhbGV0dGUiLCJjb2xvcnMiLCJhZGRDb2xvciIsImNvbG9yIiwicHVzaCIsInJlbW92ZUNvbG9yIiwiaW5kZXgiLCJzcGxpY2UiLCJzZXRDb2xvciIsImdldENvbG9yIiwiV2l6RmlsZSIsIndpZHRoIiwiaGVpZ2h0IiwicGFsZXR0ZSIsIkhpc3RvcnkiLCJhcHAiLCJpdGVtcyIsImN1cnNvciIsImxlbmd0aCIsImFkZCIsIml0ZW0iLCJjbGVhckZyb21DdXJzb3IiLCJ1bmRvIiwicmVkbyIsIlJlbmRlcmVyIiwiem9vbSIsImZpbGUiLCJmaWxlcyIsImZpbGVJbmRleCIsIl9jYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJfY3R4IiwiY2FudmFzIiwiZ2V0Q29udGV4dCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiaW1hZ2VSZW5kZXJpbmciLCJzZXRab29tIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInpvb21DaGFuZ2UiLCJkZWx0YVkiLCJib2R5IiwicXVlcnlTZWxlY3RvciIsImFwcGVuZCIsImltYWdlRGF0YSIsImN0eCIsImNyZWF0ZUltYWdlRGF0YSIsImwiLCJ5IiwieCIsInB1dEltYWdlRGF0YSIsImhpc3RvcnkiLCJnZXRJbWFnZURhdGEiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiTWF0aCIsImZsb29yIiwiY2xpZW50WCIsImxlZnQiLCJjbGllbnRZIiwidG9wIiwicHJpbWFyeUNvbG9yIiwiYnV0dG9ucyIsInVwZGF0ZSIsImR0IiwiZGVsdGEiLCJzaWduIiwiem9vbUluIiwiY29uc29sZSIsImxvZyIsInpvb21PdXQiLCJ6b29tUmVzZXQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiaW5kIiwiRGlhbG9nRWxlbWVudCIsInNlbGVjdG9yIiwiZWxlbWVudCIsImNsb3NlQnRuIiwiY2xvc2UiLCJ0b2dnbGUiLCJoYXNBdHRyaWJ1dGUiLCJvcGVuIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIklucHV0Q29tbWFuZCIsImNvbW1hbmRzIiwibiIsIm5ld0ZpbGUiLCJ3IiwidHlwZSIsInNhdmVGaWxlIiwiaCIsInVpIiwiaGVscERpYWxvZyIsInAiLCJwYWxldHRlRGlhbG9nIiwiUCIsIm1zZyIsImtleSIsImV4ZWN1dGUiLCJ2YWx1ZSIsImNsYXNzTGlzdCIsImZvY3VzIiwicmVtb3ZlIiwiY21kIiwic2xpY2UiLCJjb21tYW5kIiwiYXJncyIsInNwbGl0IiwiVGFiIiwidGl0bGUiLCJpZCIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInRhYlRpdGxlIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImRlYWN0aXZhdGVUYWIiLCJhY3RpdmF0ZVRhYiIsInJlbmFtZSIsIlVJIiwic3RhcnR1cERpYWxvZyIsImlucHV0Q29tbWFuZCIsInpvb21FbGVtZW50IiwicHJpbWFyeUNvbG9yRWxlbWVudCIsInN0YXR1c0xpbmUiLCJwYWxldHRlV3JhcCIsInBhbGV0dGVUaXRsZSIsInRhYnMiLCJnZXRJdGVtIiwicmVuZGVyUGFsZXR0ZSIsImlubmVySFRNTCIsImZvckVhY2giLCJlbCIsInRvIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInRvb2wiLCJwYWxldHRlcyIsImxheWVySW5kZXgiLCJyZW5kZXJlciIsInNldHVwIiwibWV0YUtleSIsImNvbnRhaW5zIiwibW92ZW1lbnRYIiwibW92ZW1lbnRZIiwiZmlsbCIsInN0YXJ0WCIsInN0YXJ0WSIsInRhcmdldENvbG9yIiwicmVwbGFjZUNvbG9yIiwibWF0cml4IiwiY2hhbmdlVG9vbCJdLCJzb3VyY2VSb290IjoiIn0=