(()=>{"use strict";class t{constructor(t="New layer",e=!1,i,s){this.name=t,this.locked=e,this.width=i,this.height=s,this.opacity=255,this.visible=!0,this.data=new ImageData(i,s)}}const e=new class{constructor(t="New palette"){this.name=t,this.colors=[[]]}addColor(t){this.colors.push(t)}removeColor(t){this.colors.splice(t,1)}setColor(t,e){this.colors[t]=e}getColor(t){return this.colors[t]}}("Default");e.colors=[[0,0,0,255],[252,252,252,255],[248,248,248,255],[188,188,188,255],[124,124,124,255],[164,228,252,255],[60,188,252,255],[0,120,248,255],[0,0,252,255],[184,184,248,255],[104,136,252,255],[0,88,248,255],[0,0,188,255],[216,184,248,255],[152,120,248,255],[104,68,252,255],[68,40,188,255],[248,184,248,255],[248,120,248,255],[216,0,204,255],[148,0,132,255],[248,164,192,255],[248,88,152,255],[228,0,88,255],[168,0,32,255],[240,208,176,255],[248,120,88,255],[248,56,0,255],[168,16,0,255],[252,224,168,255],[252,160,68,255],[228,92,16,255],[136,20,0,255],[248,216,120,255],[248,184,0,255],[172,124,0,255],[80,40,0,255],[216,248,120,255],[184,248,24,255],[0,184,0,255],[0,120,0,255],[184,248,184,255],[88,216,84,255],[0,168,0,255],[0,104,0,255],[184,248,216,255],[88,248,152,255],[0,168,68,255],[0,88,0,255],[0,252,252,255],[0,232,216,255],[0,136,136,255],[0,64,88,255],[248,216,248,255],[120,120,120,255]];class i{constructor(i,s){this.width=i,this.height=s,this.data=[],this.palette=e,this.data=[new t("Background",!0,i,s)]}}class s{constructor(t){this.app=t,this.items=[],this.cursor=this.items.length-1}add(t){this.items.push(t),this.cursor=this.items.length-1}clearFromCursor(){this.items.splice(this.cursor+1)}undo(){}redo(){}}class a{constructor(t){this.app=t,this.zoom=25,this.file=this.app.currentFile,this.grid=!0,this.gridSize=16,this._canvas=document.createElement("canvas"),this._ctx=this.canvas.getContext("2d"),this.canvas.style.backgroundColor="white",this.canvas.width=this.app.files[this.app.fileIndex].width,this.canvas.height=this.app.files[this.app.fileIndex].height,this.canvas.style.backgroundImage="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'><rect width='16' height='16' fill='none'/><rect x='0' y='0' width='8' height='8' fill='%23f0f0f0'/><rect x='8' y='8' width='8' height='8' fill='%23f0f0f0'/></svg>\")",this.canvas.style.backgroundSize="16px 16px",this.canvas.style.imageRendering="pixelated",this.setZoom(this.zoom),this.canvas.addEventListener("wheel",(t=>{t.preventDefault(),this.zoomChange(t.deltaY)})),document.body.querySelector("#main").append(this.canvas);const e=this.ctx.createImageData(this.file.width,this.file.height);this.canvas.addEventListener("click",(t=>{this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height));const i=this.canvas.getBoundingClientRect(),s=Math.floor((t.clientX-i.left)/this.zoom),a=4*(Math.floor((t.clientY-i.top)/this.zoom)*this.file.width+s);e.data[a]=this.app.primaryColor[0],e.data[a+1]=this.app.primaryColor[1],e.data[a+2]=this.app.primaryColor[2],e.data[a+3]=this.app.primaryColor[3],this.ctx.putImageData(e,0,0),this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height))})),this.canvas.addEventListener("mousemove",(t=>{if(1===t.buttons){this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height));const i=this.canvas.getBoundingClientRect(),s=Math.floor((t.clientX-i.left)/this.zoom),a=4*(Math.floor((t.clientY-i.top)/this.zoom)*this.file.width+s);e.data[a]=this.app.primaryColor[0],e.data[a+1]=this.app.primaryColor[1],e.data[a+2]=this.app.primaryColor[2],e.data[a+3]=this.app.primaryColor[3],this.ctx.putImageData(e,0,0),this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height))}}))}get canvas(){return this._canvas}get ctx(){return this._ctx}drawRect(t,e,i,s,a){this.ctx.fillStyle=a,this.ctx.fillRect(t,e,i,s)}fill(t,e,i,s){const a=this.file.data[this.app.layerIndex].data;if(t<0||t>=a.width||e<0||e>=a.height)return;const o=e*a.width+t;a.data[o]!==s&&a.data[o]===i&&(a.data[o]=s,this.fill(t+1,e,i,s),this.fill(t-1,e,i,s),this.fill(t,e+1,i,s),this.fill(t,e-1,i,s))}setZoom(t){this.zoom=t,this.canvas.style.width=this.file.width*this.zoom+"px",this.canvas.style.height=this.file.height*this.zoom+"px",this.update()}zoomChange(t=0){const e=Math.sign(t);this.zoom+=8*e,this.setZoom(this.zoom)}zoomIn(){console.log("zoom in"),this.zoom<128&&this.zoomChange(1)}zoomOut(){console.log("zoom out"),this.zoom>1&&this.zoomChange(-1)}zoomReset(){console.log("zoom reset"),this.setZoom(25)}update(){requestAnimationFrame(this.update.bind(this))}}class o{constructor(t){this.selector=t,this.element=document.querySelector(`#${t}`),this.closeBtn=this.element.querySelector(`#btnClose${t}`),this.closeBtn.addEventListener("click",(()=>{this.close()}))}toggle(){this.element.hasAttribute("open")?this.close():this.open()}open(){this.element.setAttribute("open","")}close(){this.element.removeAttribute("open"),window.localStorage.setItem("startup","false")}}class h{constructor(t,e){this.selector=t,this.app=e,this.commands={n:()=>{this.app.newFile()},nl:()=>{this.app.newLayer()},l:()=>{this.app.ui.layersDialog.toggle()},e:()=>{},w:(t,e)=>{this.app.saveFile(t,{scale:parseInt(e)})},h:()=>{this.app.ui.helpDialog.toggle(),this.app.ui.log("Help")},p:()=>{this.app.ui.paletteDialog.toggle(),this.app.ui.log("Open palette")},P:()=>{},log:t=>{this.app.ui.log(t)}},this.element=document.querySelector(`#${t}`),this.element.addEventListener("keydown",(t=>{"Enter"===t.key&&(this.execute(this.element.value),this.close())}))}open(){this.element.classList.add("open"),this.element.focus(),this.element.value=":"}close(){this.element.classList.remove("open"),this.element.value=""}execute(t){t=t.slice(1);const[e,...i]=t.split(" ");console.log(e,i),e in this.commands?this.commands[e](...i):this.app.ui.log(`command not found: ${e}`)}}class n{constructor(t){this.title=t,this.id=Date.now().toString(),this.element=document.createElement("div"),this.tabTitle=document.createElement("span"),this.element.id=this.id,this.element.classList.add("tab"),this.closeBtn=document.createElement("button"),this.closeBtn.id=`#btnClose${this.id}`,this.closeBtn.textContent="X",this.tabTitle.textContent=t,this.element.append(this.tabTitle,this.closeBtn),document.querySelector("#tabs").appendChild(this.element),this.closeBtn.addEventListener("click",(()=>{this.close()}))}deactivateTab(){this.element.classList.remove("active")}activateTab(){this.element.classList.add("active")}rename(t){this.title=t,this.tabTitle.textContent=t}close(){this.element.removeAttribute("open")}}class l{constructor(t){this.app=t,this.startupDialog=new o("DialogStartup"),this.helpDialog=new o("DialogHelp"),this.inputCommand=new h("InputCmd",this.app),this.zoomElement=document.querySelector("#zoom"),this.primaryColorElement=document.querySelector("#toolPrColor"),this.statusLine=document.querySelector("#statusLine"),this.layersDialog=new o("DialogLayers"),this.layersWrap=document.querySelector("#layersWrap"),this.paletteDialog=new o("DialogPalette"),this.paletteWrap=document.querySelector("#paletteWrap"),this.paletteTitle=document.querySelector("#paletteTitle"),this.tabs=document.querySelector("#tabs"),this.app=t,window.localStorage.getItem("startup")&&"true"!==window.localStorage.getItem("startup")||this.startupDialog.open(),this.tabs.append(new n("Untitled").element),this.update()}renderPalette(){this.paletteWrap.innerHTML="",this.paletteTitle.textContent=this.app.palette.name,this.app.palette.colors.forEach(((t,e)=>{const i=document.createElement("div");i.classList.add("color-swatch"),i.style.backgroundColor=`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`,this.paletteWrap.append(i),i.addEventListener("click",(()=>{this.app.primaryColor=t,this.update()}))}))}renderLayers(){this.layersWrap.innerHTML="",this.app.currentFile?.data.forEach(((t,e)=>{const i=document.createElement("div");i.classList.add("layer"),e===this.app.layerIndex&&i.classList.add("active"),i.textContent=t.name,i.addEventListener("click",(()=>{this.app.layerIndex=e,this.update()})),this.layersWrap.append(i)}))}log(t){this.to&&clearTimeout(this.to),this.statusLine.classList.add("open"),this.statusLine.textContent=t,this.to=setTimeout((()=>{this.statusLine.classList.remove("open"),this.statusLine.textContent=""}),2e3)}update(){this.renderPalette(),this.renderLayers(),this.zoomElement.textContent=100*this.app.zoom+"%",this.primaryColorElement.style.backgroundColor=`rgba(${this.app.primaryColor[0]}, ${this.app.primaryColor[1]}, ${this.app.primaryColor[2]}, ${this.app.primaryColor[3]})`}}const r=new class{constructor(){this.history=new s(this),this.zoom=25,this.tool="pencil",this.color=1,this.files=[],this.fileIndex=0,this.palette=e,this.primaryColor=this.palette.getColor(0),this.palettes=[this.palette],this.ui=new l(this),this.layerIndex=0,this.files.push(new i(16,16)),this.renderer=new a(this),this.setup()}get currentFile(){return this.files[this.fileIndex]}setup(){document.addEventListener("keydown",(t=>{if(t.metaKey&&"="===t.key)return t.preventDefault(),void this.renderer.zoomIn();if(t.metaKey&&"-"===t.key)return t.preventDefault(),void this.renderer.zoomOut();if(t.metaKey&&"0"===t.key)return t.preventDefault(),void this.renderer.zoomReset();if(t.metaKey&&"z"===t.key)return t.preventDefault(),void this.undo();switch(t.key){case"Space":this.ui.inputCommand.element.classList.contains("open")||(t.preventDefault(),this.renderer.canvas.style.cursor="grab",this.renderer.canvas.addEventListener("mousemove",(t=>{1===t.buttons&&(this.renderer.canvas.style.cursor="grabbing",this.renderer.canvas.style.left=`${t.movementX}px`,this.renderer.canvas.style.top=`${t.movementY}px`)})));break;case"?":t.preventDefault(),this.ui.helpDialog.toggle();break;case"Escape":t.preventDefault(),this.ui.inputCommand.element.classList.contains("open")?this.ui.inputCommand.close():this.ui.inputCommand.open()}})),document.addEventListener("keyup",(t=>{if(" "===t.key)t.preventDefault(),this.renderer.canvas.style.cursor="default"})),this.update()}update(){this.renderer.update(),this.ui.update()}newFile(){console.log("new")}newLayer(){const e=new t("Layer "+(this.currentFile.data.length+1),!1,this.currentFile.width,this.currentFile.height);this.currentFile.data.push(e),this.layerIndex=this.currentFile.data.length-1,this.update()}saveFile(t,e={scale:1}){if("png"===t){const i=this.renderer.canvas.toDataURL("image/png"),s=document.createElement("canvas"),a=s.getContext("2d"),o=new Image;return o.src=i,o.onload=()=>{s.width=o.width*e.scale,s.height=o.height*e.scale,a.drawImage(o,0,0,s.width,s.height);const t=document.createElement("a");t.href=s.toDataURL("image/png"),t.download="image.png",t.click()},void this.ui.log(`save file as ${t}`)}this.ui.log(`filetype ${t} is not supported`)}undo(){this.history.undo()}redo(){this.history.redo()}changeTool(t){this.tool=t}};window.app=r})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJtYXBwaW5ncyI6Im1CQUFlLE1BQU1BLEVBQ2pCQyxZQUFZQyxFQUFPLFlBQWFDLEdBQVMsRUFBT0MsRUFBT0MsR0FDbkRDLEtBQUtKLEtBQU9BLEVBQ1pJLEtBQUtILE9BQVNBLEVBQ2RHLEtBQUtGLE1BQVFBLEVBQ2JFLEtBQUtELE9BQVNBLEVBQ2RDLEtBQUtDLFFBQVUsSUFDZkQsS0FBS0UsU0FBVSxFQUNmRixLQUFLRyxLQUFPLElBQUlDLFVBQVVOLEVBQU9DLEVBQ3JDLEVDU0csTUFBTU0sRUFBaUIsSUFsQmYsTUFDWFYsWUFBWUMsRUFBTyxlQUNmSSxLQUFLSixLQUFPQSxFQUNaSSxLQUFLTSxPQUFTLENBQUMsR0FDbkIsQ0FDQUMsU0FBU0MsR0FDTFIsS0FBS00sT0FBT0csS0FBS0QsRUFDckIsQ0FDQUUsWUFBWUMsR0FDUlgsS0FBS00sT0FBT00sT0FBT0QsRUFBTyxFQUM5QixDQUNBRSxTQUFTRixFQUFPSCxHQUNaUixLQUFLTSxPQUFPSyxHQUFTSCxDQUN6QixDQUNBTSxTQUFTSCxHQUNMLE9BQU9YLEtBQUtNLE9BQU9LLEVBQ3ZCLEdBRXNDLFdBRTFDTixFQUFlQyxPQUFTLENBQ3BCLENBQUMsRUFBRyxFQUFHLEVBQUcsS0FDVixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxHQUFJLElBQUssSUFBSyxLQUNmLENBQUMsRUFBRyxJQUFLLElBQUssS0FDZCxDQUFDLEVBQUcsRUFBRyxJQUFLLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsRUFBRyxHQUFJLElBQUssS0FDYixDQUFDLEVBQUcsRUFBRyxJQUFLLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxHQUFJLElBQUssS0FDZixDQUFDLEdBQUksR0FBSSxJQUFLLEtBQ2QsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxFQUFHLElBQUssS0FDZCxDQUFDLElBQUssRUFBRyxJQUFLLEtBQ2QsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssR0FBSSxJQUFLLEtBQ2YsQ0FBQyxJQUFLLEVBQUcsR0FBSSxLQUNiLENBQUMsSUFBSyxFQUFHLEdBQUksS0FDYixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLEdBQUksS0FDZixDQUFDLElBQUssR0FBSSxFQUFHLEtBQ2IsQ0FBQyxJQUFLLEdBQUksRUFBRyxLQUNiLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLElBQUssR0FBSSxLQUNmLENBQUMsSUFBSyxHQUFJLEdBQUksS0FDZCxDQUFDLElBQUssR0FBSSxFQUFHLEtBQ2IsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxFQUFHLEtBQ2QsQ0FBQyxJQUFLLElBQUssRUFBRyxLQUNkLENBQUMsR0FBSSxHQUFJLEVBQUcsS0FDWixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLEdBQUksS0FDZixDQUFDLEVBQUcsSUFBSyxFQUFHLEtBQ1osQ0FBQyxFQUFHLElBQUssRUFBRyxLQUNaLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxHQUFJLElBQUssR0FBSSxLQUNkLENBQUMsRUFBRyxJQUFLLEVBQUcsS0FDWixDQUFDLEVBQUcsSUFBSyxFQUFHLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLEdBQUksSUFBSyxJQUFLLEtBQ2YsQ0FBQyxFQUFHLElBQUssR0FBSSxLQUNiLENBQUMsRUFBRyxHQUFJLEVBQUcsS0FDWCxDQUFDLEVBQUcsSUFBSyxJQUFL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LFVBQVUsYUFDckJPLEVBQUVFLFNBQVcsWUFDYkYsRUFBRUcsT0FBTyxPQUViOUwsS0FBS29ILEdBQUd6QixJQUFJLGdCQUFnQjJCLElBRWhDLENBQ0F0SCxLQUFLb0gsR0FBR3pCLElBQUksWUFBWTJCLHFCQUM1QixDQUNBN0YsT0FDSXpCLEtBQUswRCxRQUFRakMsTUFDakIsQ0FDQUMsT0FDSTFCLEtBQUswRCxRQUFRaEMsTUFDakIsQ0FDQXFLLFdBQVdyQixHQUNQMUssS0FBSzBLLEtBQU9BLENBQ2hCLEdEaklKaEUsT0FBT3hGLElBQU1BLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90c2JwLy4vc3JjL2xheWVyLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvcGFsZXR0ZS50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL2ZpbGUudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9oaXN0b3J5LnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9kaWFsb2cudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9pbnB1dC1jb21tYW5kLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvdWkudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL2FwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBMYXllciB7XG4gICAgY29uc3RydWN0b3IobmFtZSA9IFwiTmV3IGxheWVyXCIsIGxvY2tlZCA9IGZhbHNlLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMubG9ja2VkID0gbG9ja2VkO1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLm9wYWNpdHkgPSAyNTU7XG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBJbWFnZURhdGEod2lkdGgsIGhlaWdodCk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFsZXR0ZSB7XG4gICAgY29uc3RydWN0b3IobmFtZSA9IFwiTmV3IHBhbGV0dGVcIikge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmNvbG9ycyA9IFtbXV07XG4gICAgfVxuICAgIGFkZENvbG9yKGNvbG9yKSB7XG4gICAgICAgIHRoaXMuY29sb3JzLnB1c2goY29sb3IpO1xuICAgIH1cbiAgICByZW1vdmVDb2xvcihpbmRleCkge1xuICAgICAgICB0aGlzLmNvbG9ycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICBzZXRDb2xvcihpbmRleCwgY29sb3IpIHtcbiAgICAgICAgdGhpcy5jb2xvcnNbaW5kZXhdID0gY29sb3I7XG4gICAgfVxuICAgIGdldENvbG9yKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yc1tpbmRleF07XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGRlZmF1bHRQYWxldHRlID0gbmV3IFBhbGV0dGUoXCJEZWZhdWx0XCIpO1xuLy8gTkVTIHBhbGV0dGVcbmRlZmF1bHRQYWxldHRlLmNvbG9ycyA9IFtcbiAgICBbMCwgMCwgMCwgMjU1XSxcbiAgICBbMjUyLCAyNTIsIDI1MiwgMjU1XSxcbiAgICBbMjQ4LCAyNDgsIDI0OCwgMjU1XSxcbiAgICBbMTg4LCAxODgsIDE4OCwgMjU1XSxcbiAgICBbMTI0LCAxMjQsIDEyNCwgMjU1XSxcbiAgICBbMTY0LCAyMjgsIDI1MiwgMjU1XSxcbiAgICBbNjAsIDE4OCwgMjUyLCAyNTVdLFxuICAgIFswLCAxMjAsIDI0OCwgMjU1XSxcbiAgICBbMCwgMCwgMjUyLCAyNTVdLFxuICAgIFsxODQsIDE4NCwgMjQ4LCAyNTVdLFxuICAgIFsxMDQsIDEzNiwgMjUyLCAyNTVdLFxuICAgIFswLCA4OCwgMjQ4LCAyNTVdLFxuICAgIFswLCAwLCAxODgsIDI1NV0sXG4gICAgWzIxNiwgMTg0LCAyNDgsIDI1NV0sXG4gICAgWzE1MiwgMTIwLCAyNDgsIDI1NV0sXG4gICAgWzEwNCwgNjgsIDI1MiwgMjU1XSxcbiAgICBbNjgsIDQwLCAxODgsIDI1NV0sXG4gICAgWzI0OCwgMTg0LCAyNDgsIDI1NV0sXG4gICAgWzI0OCwgMTIwLCAyNDgsIDI1NV0sXG4gICAgWzIxNiwgMCwgMjA0LCAyNTVdLFxuICAgIFsxNDgsIDAsIDEzMiwgMjU1XSxcbiAgICBbMjQ4LCAxNjQsIDE5MiwgMjU1XSxcbiAgICBbMjQ4LCA4OCwgMTUyLCAyNTVdLFxuICAgIFsyMjgsIDAsIDg4LCAyNTVdLFxuICAgIFsxNjgsIDAsIDMyLCAyNTVdLFxuICAgIFsyNDAsIDIwOCwgMTc2LCAyNTVdLFxuICAgIFsyNDgsIDEyMCwgODgsIDI1NV0sXG4gICAgWzI0OCwgNTYsIDAsIDI1NV0sXG4gICAgWzE2OCwgMTYsIDAsIDI1NV0sXG4gICAgWzI1MiwgMjI0LCAxNjgsIDI1NV0sXG4gICAgWzI1MiwgMTYwLCA2OCwgMjU1XSxcbiAgICBbMjI4LCA5MiwgMTYsIDI1NV0sXG4gICAgWzEzNiwgMjAsIDAsIDI1NV0sXG4gICAgWzI0OCwgMjE2LCAxMjAsIDI1NV0sXG4gICAgWzI0OCwgMTg0LCAwLCAyNTVdLFxuICAgIFsxNzIsIDEyNCwgMCwgMjU1XSxcbiAgICBbODAsIDQwLCAwLCAyNTVdLFxuICAgIFsyMTYsIDI0OCwgMTIwLCAyNTVdLFxuICAgIFsxODQsIDI0OCwgMjQsIDI1NV0sXG4gICAgWzAsIDE4NCwgMCwgMjU1XSxcbiAgICBbMCwgMTIwLCAwLCAyNTVdLFxuICAgIFsxODQsIDI0OCwgMTg0LCAyNTVdLFxuICAgIFs4OCwgMjE2LCA4NCwgMjU1XSxcbiAgICBbMCwgMTY4LCAwLCAyNTVdLFxuICAgIFswLCAxMDQsIDAsIDI1NV0sXG4gICAgWzE4NCwgMjQ4LCAyMTYsIDI1NV0sXG4gICAgWzg4LCAyNDgsIDE1MiwgMjU1XSxcbiAgICBbMCwgMTY4LCA2OCwgMjU1XSxcbiAgICBbMCwgODgsIDAsIDI1NV0sXG4gICAgWzAsIDI1MiwgMjUyLCAyNTVdLFxuICAgIFswLCAyMzIsIDIxNiwgMjU1XSxcbiAgICBbMCwgMTM2LCAxMzYsIDI1NV0sXG4gICAgWzAsIDY0LCA4OCwgMjU1XSxcbiAgICBbMjQ4LCAyMTYsIDI0OCwgMjU1XSxcbiAgICBbMTIwLCAxMjAsIDEyMCwgMjU1XSxcbl07XG4iLCJpbXBvcnQgTGF5ZXIgZnJvbSBcIi4vbGF5ZXJcIjtcbmltcG9ydCB7IGRlZmF1bHRQYWxldHRlIH0gZnJvbSBcIi4vcGFsZXR0ZVwiO1xuZXhwb3J0IGNsYXNzIFdpekZpbGUge1xuICAgIGNvbnN0cnVjdG9yKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5kYXRhID0gW107XG4gICAgICAgIHRoaXMucGFsZXR0ZSA9IGRlZmF1bHRQYWxldHRlO1xuICAgICAgICB0aGlzLmRhdGEgPSBbbmV3IExheWVyKFwiQmFja2dyb3VuZFwiLCB0cnVlLCB3aWR0aCwgaGVpZ2h0KV07XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGlzdG9yeSB7XG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLml0ZW1zID0gW107XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxO1xuICAgIH1cbiAgICBhZGQoaXRlbSkge1xuICAgICAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxO1xuICAgIH1cbiAgICBjbGVhckZyb21DdXJzb3IoKSB7XG4gICAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKHRoaXMuY3Vyc29yICsgMSk7XG4gICAgfVxuICAgIHVuZG8oKSB7XG4gICAgICAgIC8vICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIC8vICAgIHRoaXMuY3Vyc29yLS07XG4gICAgICAgIC8vICAgIHRoaXMuYXBwLmZpbGVzW3RoaXMuYXBwLmZpbGVJbmRleF0uZGF0YS5wdXRJbWFnZURhdGEodGhpcy5pdGVtc1t0aGlzLmN1cnNvcl0sIDAsIDApO1xuICAgICAgICAvLyAgfVxuICAgIH1cbiAgICByZWRvKCkge1xuICAgICAgICAvLyAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5pdGVtcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIC8vICAgIHRoaXMuY3Vyc29yKys7XG4gICAgICAgIC8vICAgIHRoaXMuYXBwLmN0eC5wdXRJbWFnZURhdGEodGhpcy5pdGVtc1t0aGlzLmN1cnNvcl0sIDAsIDApO1xuICAgICAgICAvLyAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuem9vbSA9IDI1O1xuICAgICAgICB0aGlzLmZpbGUgPSB0aGlzLmFwcC5jdXJyZW50RmlsZTtcbiAgICAgICAgdGhpcy5ncmlkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ncmlkU2l6ZSA9IDE2O1xuICAgICAgICB0aGlzLl9jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuICAgICAgICB0aGlzLl9jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLmFwcC5maWxlc1t0aGlzLmFwcC5maWxlSW5kZXhdLndpZHRoO1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmFwcC5maWxlc1t0aGlzLmFwcC5maWxlSW5kZXhdLmhlaWdodDtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDt1dGY4LDxzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMTYnIGhlaWdodD0nMTYnIHZpZXdCb3g9JzAgMCAxNiAxNic+PHJlY3Qgd2lkdGg9JzE2JyBoZWlnaHQ9JzE2JyBmaWxsPSdub25lJy8+PHJlY3QgeD0nMCcgeT0nMCcgd2lkdGg9JzgnIGhlaWdodD0nOCcgZmlsbD0nJTIzZjBmMGYwJy8+PHJlY3QgeD0nOCcgeT0nOCcgd2lkdGg9JzgnIGhlaWdodD0nOCcgZmlsbD0nJTIzZjBmMGYwJy8+PC9zdmc+XCIpYDtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuYmFja2dyb3VuZFNpemUgPSBcIjE2cHggMTZweFwiO1xuICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5pbWFnZVJlbmRlcmluZyA9IFwicGl4ZWxhdGVkXCI7XG4gICAgICAgIHRoaXMuc2V0Wm9vbSh0aGlzLnpvb20pO1xuICAgICAgICAvLyBhYmlsaXR5IHRvIHpvb20gaW4gYW5kIG91dCB3aXRoIG1vdXNlIHdoZWVsXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy56b29tQ2hhbmdlKGUuZGVsdGFZKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIiNtYWluXCIpLmFwcGVuZCh0aGlzLmNhbnZhcyk7XG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IHRoaXMuY3R4LmNyZWF0ZUltYWdlRGF0YSh0aGlzLmZpbGUud2lkdGgsIHRoaXMuZmlsZS5oZWlnaHQpO1xuICAgICAgICAvLyBhYmlsaXR5IHRvIGRyYXcgcGl4ZWwgd2l0aCBtb3VzZSBjbGlja1xuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBwLmhpc3RvcnkuYWRkKHRoaXMuY3R4LmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLmZpbGUud2lkdGgsIHRoaXMuZmlsZS5oZWlnaHQpKTtcbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGNvbnN0IHggPSBNYXRoLmZsb29yKChlLmNsaWVudFggLSByZWN0LmxlZnQpIC8gdGhpcy56b29tKTtcbiAgICAgICAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKChlLmNsaWVudFkgLSByZWN0LnRvcCkgLyB0aGlzLnpvb20pO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSAoeSAqIHRoaXMuZmlsZS53aWR0aCArIHgpICogNDtcbiAgICAgICAgICAgIC8vdGhpcy5maWxlc1t0aGlzLmZpbGVJbmRleF0uZGF0YVt0aGlzLmxheWVySW5kZXhdLmRhdGFbeV1beF0gPSB0aGlzLmNvbG9yO1xuICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXhdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzBdO1xuICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAxXSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclsxXTtcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gPSB0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMl07XG4gICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDNdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzNdO1xuICAgICAgICAgICAgdGhpcy5jdHgucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG4gICAgICAgICAgICB0aGlzLmFwcC5oaXN0b3J5LmFkZCh0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5maWxlLndpZHRoLCB0aGlzLmZpbGUuaGVpZ2h0KSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBhYmlsaXR5IHRvIGRyYXcgcGl4ZWwgd2l0aCBtb3VzZSBtb3ZlXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbnMgPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5oaXN0b3J5LmFkZCh0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5maWxlLndpZHRoLCB0aGlzLmZpbGUuaGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHggPSBNYXRoLmZsb29yKChlLmNsaWVudFggLSByZWN0LmxlZnQpIC8gdGhpcy56b29tKTtcbiAgICAgICAgICAgICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcigoZS5jbGllbnRZIC0gcmVjdC50b3ApIC8gdGhpcy56b29tKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9ICh5ICogdGhpcy5maWxlLndpZHRoICsgeCkgKiA0O1xuICAgICAgICAgICAgICAgIC8vdGhpcy5maWxlc1t0aGlzLmZpbGVJbmRleF0uZGF0YVt0aGlzLmxheWVySW5kZXhdLmRhdGFbeV1beF0gPVxuICAgICAgICAgICAgICAgIC8vIHRoaXMuY29sb3I7XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXhdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzBdO1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSB0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMV07XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclsyXTtcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDNdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzNdO1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLmhpc3RvcnkuYWRkKHRoaXMuY3R4LmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLmZpbGUud2lkdGgsIHRoaXMuZmlsZS5oZWlnaHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBjYW52YXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW52YXM7XG4gICAgfVxuICAgIGdldCBjdHgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdHg7XG4gICAgfVxuICAgIGRyYXdSZWN0KHgsIHksIHcsIGgsIGNvbG9yKSB7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh4LCB5LCB3LCBoKTtcbiAgICB9XG4gICAgZmlsbChzdGFydFgsIHN0YXJ0WSwgdGFyZ2V0Q29sb3IsIHJlcGxhY2VDb2xvcikge1xuICAgICAgICBjb25zdCBtYXRyaXggPSB0aGlzLmZpbGUuZGF0YVt0aGlzLmFwcC5sYXllckluZGV4XS5kYXRhO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgc3RhcnQgY29vcmRpbmF0ZXMgYXJlIG91dCBvZiBib3VuZHNcbiAgICAgICAgaWYgKHN0YXJ0WCA8IDAgfHxcbiAgICAgICAgICAgIHN0YXJ0WCA+PSBtYXRyaXgud2lkdGggfHxcbiAgICAgICAgICAgIHN0YXJ0WSA8IDAgfHxcbiAgICAgICAgICAgIHN0YXJ0WSA+PSBtYXRyaXguaGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSBzdGFydFkgKiBtYXRyaXgud2lkdGggKyBzdGFydFg7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB0YXJnZXQgdmFsdWUgbWF0Y2hlcyB0aGUgcmVwbGFjZW1lbnQgdmFsdWVcbiAgICAgICAgaWYgKG1hdHJpeC5kYXRhW2luZGV4XSA9PT0gcmVwbGFjZUNvbG9yKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdmFsdWUgbWF0Y2hlcyB0aGUgdGFyZ2V0IHZhbHVlXG4gICAgICAgIGlmIChtYXRyaXguZGF0YVtpbmRleF0gIT09IHRhcmdldENvbG9yKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgY3VycmVudCB2YWx1ZSB3aXRoIHRoZSByZXBsYWNlbWVudCB2YWx1ZVxuICAgICAgICBtYXRyaXguZGF0YVtpbmRleF0gPSByZXBsYWNlQ29sb3I7XG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGZpbGwgYWRqYWNlbnQgY2VsbHNcbiAgICAgICAgdGhpcy5maWxsKHN0YXJ0WCArIDEsIHN0YXJ0WSwgdGFyZ2V0Q29sb3IsIHJlcGxhY2VDb2xvcik7IC8vIFJpZ2h0XG4gICAgICAgIHRoaXMuZmlsbChzdGFydFggLSAxLCBzdGFydFksIHRhcmdldENvbG9yLCByZXBsYWNlQ29sb3IpOyAvLyBMZWZ0XG4gICAgICAgIHRoaXMuZmlsbChzdGFydFgsIHN0YXJ0WSArIDEsIHRhcmdldENvbG9yLCByZXBsYWNlQ29sb3IpOyAvLyBEb3duXG4gICAgICAgIHRoaXMuZmlsbChzdGFydFgsIHN0YXJ0WSAtIDEsIHRhcmdldENvbG9yLCByZXBsYWNlQ29sb3IpOyAvLyBVcFxuICAgIH1cbiAgICBzZXRab29tKHpvb20pIHtcbiAgICAgICAgdGhpcy56b29tID0gem9vbTtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUud2lkdGggPSBgJHt0aGlzLmZpbGUud2lkdGggKiB0aGlzLnpvb219cHhgO1xuICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmZpbGUuaGVpZ2h0ICogdGhpcy56b29tfXB4YDtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gICAgem9vbUNoYW5nZShkdCA9IDApIHtcbiAgICAgICAgY29uc3QgZGVsdGEgPSBNYXRoLnNpZ24oZHQpO1xuICAgICAgICB0aGlzLnpvb20gKz0gZGVsdGEgKiA4O1xuICAgICAgICB0aGlzLnNldFpvb20odGhpcy56b29tKTtcbiAgICB9XG4gICAgem9vbUluKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInpvb20gaW5cIik7XG4gICAgICAgIGlmICh0aGlzLnpvb20gPCAxMjgpIHtcbiAgICAgICAgICAgIHRoaXMuem9vbUNoYW5nZSgxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB6b29tT3V0KCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInpvb20gb3V0XCIpO1xuICAgICAgICBpZiAodGhpcy56b29tID4gMSkge1xuICAgICAgICAgICAgdGhpcy56b29tQ2hhbmdlKC0xKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB6b29tUmVzZXQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiem9vbSByZXNldFwiKTtcbiAgICAgICAgdGhpcy5zZXRab29tKDI1KTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGUuYmluZCh0aGlzKSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlhbG9nRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtzZWxlY3Rvcn1gKTtcbiAgICAgICAgdGhpcy5jbG9zZUJ0biA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjYnRuQ2xvc2Uke3NlbGVjdG9yfWApO1xuICAgICAgICB0aGlzLmNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b2dnbGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKFwib3BlblwiKSkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcIm9wZW5cIiwgXCJcIik7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwib3BlblwiKTtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic3RhcnR1cFwiLCBcImZhbHNlXCIpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0Q29tbWFuZCB7XG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIGFwcCkge1xuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLmNvbW1hbmRzID0ge1xuICAgICAgICAgICAgbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLm5ld0ZpbGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBubDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLm5ld0xheWVyKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnVpLmxheWVyc0RpYWxvZy50b2dnbGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICB3OiAodHlwZSwgc2NhbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5zYXZlRmlsZSh0eXBlLCB7IHNjYWxlOiBwYXJzZUludChzY2FsZSkgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnVpLmhlbHBEaWFsb2cudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkubG9nKFwiSGVscFwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkucGFsZXR0ZURpYWxvZy50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC51aS5sb2coXCJPcGVuIHBhbGV0dGVcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgUDogKCkgPT4geyB9LFxuICAgICAgICAgICAgbG9nOiAobXNnKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkubG9nKG1zZyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtzZWxlY3Rvcn1gKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSh0aGlzLmVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9IFwiOlwiO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuICAgICAgICB0aGlzLmVsZW1lbnQudmFsdWUgPSBcIlwiO1xuICAgIH1cbiAgICBleGVjdXRlKGNtZCkge1xuICAgICAgICBjbWQgPSBjbWQuc2xpY2UoMSk7XG4gICAgICAgIGNvbnN0IFtjb21tYW5kLCAuLi5hcmdzXSA9IGNtZC5zcGxpdChcIiBcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKGNvbW1hbmQsIGFyZ3MpO1xuICAgICAgICBpZiAoY29tbWFuZCBpbiB0aGlzLmNvbW1hbmRzKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRzW2NvbW1hbmRdKC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hcHAudWkubG9nKGBjb21tYW5kIG5vdCBmb3VuZDogJHtjb21tYW5kfWApO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IERpYWxvZ0VsZW1lbnQgZnJvbSBcIi4vZGlhbG9nXCI7XG5pbXBvcnQgSW5wdXRDb21tYW5kIGZyb20gXCIuL2lucHV0LWNvbW1hbmRcIjtcbmNsYXNzIFRhYiB7XG4gICAgY29uc3RydWN0b3IodGl0bGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmlkID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnRhYlRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pZCA9IHRoaXMuaWQ7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFiXCIpO1xuICAgICAgICB0aGlzLmNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgdGhpcy5jbG9zZUJ0bi5pZCA9IGAjYnRuQ2xvc2Uke3RoaXMuaWR9YDtcbiAgICAgICAgdGhpcy5jbG9zZUJ0bi50ZXh0Q29udGVudCA9IFwiWFwiO1xuICAgICAgICB0aGlzLnRhYlRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmQodGhpcy50YWJUaXRsZSwgdGhpcy5jbG9zZUJ0bik7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFic1wiKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlVGFiKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICB9XG4gICAgYWN0aXZhdGVUYWIoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIH1cbiAgICByZW5hbWUodGl0bGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLnRhYlRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwib3BlblwiKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSSB7XG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnN0YXJ0dXBEaWFsb2cgPSBuZXcgRGlhbG9nRWxlbWVudChcIkRpYWxvZ1N0YXJ0dXBcIik7XG4gICAgICAgIHRoaXMuaGVscERpYWxvZyA9IG5ldyBEaWFsb2dFbGVtZW50KFwiRGlhbG9nSGVscFwiKTtcbiAgICAgICAgdGhpcy5pbnB1dENvbW1hbmQgPSBuZXcgSW5wdXRDb21tYW5kKFwiSW5wdXRDbWRcIiwgdGhpcy5hcHApO1xuICAgICAgICB0aGlzLnpvb21FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN6b29tXCIpO1xuICAgICAgICB0aGlzLnByaW1hcnlDb2xvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rvb2xQckNvbG9yXCIpO1xuICAgICAgICB0aGlzLnN0YXR1c0xpbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0YXR1c0xpbmVcIik7XG4gICAgICAgIHRoaXMubGF5ZXJzRGlhbG9nID0gbmV3IERpYWxvZ0VsZW1lbnQoXCJEaWFsb2dMYXllcnNcIik7XG4gICAgICAgIHRoaXMubGF5ZXJzV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGF5ZXJzV3JhcFwiKTtcbiAgICAgICAgdGhpcy5wYWxldHRlRGlhbG9nID0gbmV3IERpYWxvZ0VsZW1lbnQoXCJEaWFsb2dQYWxldHRlXCIpO1xuICAgICAgICB0aGlzLnBhbGV0dGVXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwYWxldHRlV3JhcFwiKTtcbiAgICAgICAgdGhpcy5wYWxldHRlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BhbGV0dGVUaXRsZVwiKTtcbiAgICAgICAgdGhpcy50YWJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YWJzXCIpO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgaWYgKCF3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzdGFydHVwXCIpIHx8XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzdGFydHVwXCIpID09PSBcInRydWVcIikge1xuICAgICAgICAgICAgdGhpcy5zdGFydHVwRGlhbG9nLm9wZW4oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhYnMuYXBwZW5kKG5ldyBUYWIoXCJVbnRpdGxlZFwiKS5lbGVtZW50KTtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gICAgcmVuZGVyUGFsZXR0ZSgpIHtcbiAgICAgICAgdGhpcy5wYWxldHRlV3JhcC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICB0aGlzLnBhbGV0dGVUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuYXBwLnBhbGV0dGUubmFtZTtcbiAgICAgICAgdGhpcy5hcHAucGFsZXR0ZS5jb2xvcnMuZm9yRWFjaCgoY29sb3IsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKFwiY29sb3Itc3dhdGNoXCIpO1xuICAgICAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYHJnYmEoJHtjb2xvclswXX0sICR7Y29sb3JbMV19LCAke2NvbG9yWzJdfSwgJHtjb2xvclszXX0pYDtcbiAgICAgICAgICAgIHRoaXMucGFsZXR0ZVdyYXAuYXBwZW5kKGVsKTtcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAucHJpbWFyeUNvbG9yID0gY29sb3I7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVuZGVyTGF5ZXJzKCkge1xuICAgICAgICB0aGlzLmxheWVyc1dyYXAuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgdGhpcy5hcHAuY3VycmVudEZpbGU/LmRhdGEuZm9yRWFjaCgobGF5ZXIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKFwibGF5ZXJcIik7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IHRoaXMuYXBwLmxheWVySW5kZXgpIHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWwudGV4dENvbnRlbnQgPSBsYXllci5uYW1lO1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5sYXllckluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5sYXllcnNXcmFwLmFwcGVuZChlbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsb2cobXNnKSB7XG4gICAgICAgIHRoaXMudG8gJiYgY2xlYXJUaW1lb3V0KHRoaXMudG8pO1xuICAgICAgICB0aGlzLnN0YXR1c0xpbmUuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG4gICAgICAgIHRoaXMuc3RhdHVzTGluZS50ZXh0Q29udGVudCA9IG1zZztcbiAgICAgICAgdGhpcy50byA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNMaW5lLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNMaW5lLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgfSwgMjAwMCk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQYWxldHRlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyTGF5ZXJzKCk7XG4gICAgICAgIHRoaXMuem9vbUVsZW1lbnQudGV4dENvbnRlbnQgPSBgJHt0aGlzLmFwcC56b29tICogMTAwfSVgO1xuICAgICAgICB0aGlzLnByaW1hcnlDb2xvckVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYHJnYmEoJHt0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMF19LCAke3RoaXMuYXBwLnByaW1hcnlDb2xvclsxXX0sICR7dGhpcy5hcHAucHJpbWFyeUNvbG9yWzJdfSwgJHt0aGlzLmFwcC5wcmltYXJ5Q29sb3JbM119KWA7XG4gICAgfVxufVxuIiwiaW1wb3J0IEFwcCBmcm9tIFwiLi9hcHBcIjtcbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcbi8vQHRzLWlnbm9yZVxud2luZG93LmFwcCA9IGFwcDtcbiIsImltcG9ydCB7IFdpekZpbGUgfSBmcm9tIFwiLi9maWxlXCI7XG5pbXBvcnQgSGlzdG9yeSBmcm9tIFwiLi9oaXN0b3J5XCI7XG5pbXBvcnQgTGF5ZXIgZnJvbSBcIi4vbGF5ZXJcIjtcbmltcG9ydCB7IGRlZmF1bHRQYWxldHRlIH0gZnJvbSBcIi4vcGFsZXR0ZVwiO1xuaW1wb3J0IFJlbmRlcmVyIGZyb20gXCIuL3JlbmRlcmVyXCI7XG5pbXBvcnQgVUkgZnJvbSBcIi4vdWlcIjtcbmNvbnN0IERFRkFVTFRfV0lEVEggPSAxNjtcbmNvbnN0IERFRkFVTFRfSEVJR0hUID0gMTY7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcHAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeSh0aGlzKTtcbiAgICAgICAgdGhpcy56b29tID0gMjU7XG4gICAgICAgIHRoaXMudG9vbCA9IFwicGVuY2lsXCI7XG4gICAgICAgIHRoaXMuY29sb3IgPSAxO1xuICAgICAgICB0aGlzLmZpbGVzID0gW107XG4gICAgICAgIHRoaXMuZmlsZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5wYWxldHRlID0gZGVmYXVsdFBhbGV0dGU7XG4gICAgICAgIHRoaXMucHJpbWFyeUNvbG9yID0gdGhpcy5wYWxldHRlLmdldENvbG9yKDApO1xuICAgICAgICB0aGlzLnBhbGV0dGVzID0gW3RoaXMucGFsZXR0ZV07XG4gICAgICAgIHRoaXMudWkgPSBuZXcgVUkodGhpcyk7XG4gICAgICAgIHRoaXMubGF5ZXJJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuZmlsZXMucHVzaChuZXcgV2l6RmlsZShERUZBVUxUX1dJRFRILCBERUZBVUxUX0hFSUdIVCkpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKHRoaXMpO1xuICAgICAgICB0aGlzLnNldHVwKCk7XG4gICAgfVxuICAgIGdldCBjdXJyZW50RmlsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsZXNbdGhpcy5maWxlSW5kZXhdO1xuICAgIH1cbiAgICBzZXR1cCgpIHtcbiAgICAgICAgLy8gYWJpbGl0eSB0byB1bmRvIGNoYW5nZXMgd2l0aCBjbWQgKyB6XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5tZXRhS2V5ICYmIGUua2V5ID09PSBcIj1cIikge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnpvb21JbigpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLm1ldGFLZXkgJiYgZS5rZXkgPT09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuem9vbU91dCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLm1ldGFLZXkgJiYgZS5rZXkgPT09IFwiMFwiKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuem9vbVJlc2V0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUubWV0YUtleSAmJiBlLmtleSA9PT0gXCJ6XCIpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy51bmRvKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIGhvbGQgc3BhY2UgYW5kIG1vdmUgbW91c2UsIG1vdmUgY2FudmFzXG4gICAgICAgICAgICAgICAgY2FzZSBcIlNwYWNlXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy51aS5pbnB1dENvbW1hbmQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJvcGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSBcImdyYWJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5idXR0b25zID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuY2FudmFzLnN0eWxlLmN1cnNvciA9IFwiZ3JhYmJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5jYW52YXMuc3R5bGUubGVmdCA9IGAke2UubW92ZW1lbnRYfXB4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5jYW52YXMuc3R5bGUudG9wID0gYCR7ZS5tb3ZlbWVudFl9cHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCI/XCI6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51aS5oZWxwRGlhbG9nLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiRXNjYXBlXCI6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudWkuaW5wdXRDb21tYW5kLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3BlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51aS5pbnB1dENvbW1hbmQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudWkuaW5wdXRDb21tYW5kLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIiBcIjpcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlKCk7XG4gICAgICAgIHRoaXMudWkudXBkYXRlKCk7XG4gICAgfVxuICAgIG5ld0ZpbGUoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibmV3XCIpO1xuICAgIH1cbiAgICBuZXdMYXllcigpIHtcbiAgICAgICAgY29uc3QgbGF5ZXIgPSBuZXcgTGF5ZXIoXCJMYXllciBcIiArICh0aGlzLmN1cnJlbnRGaWxlLmRhdGEubGVuZ3RoICsgMSksIGZhbHNlLCB0aGlzLmN1cnJlbnRGaWxlLndpZHRoLCB0aGlzLmN1cnJlbnRGaWxlLmhlaWdodCk7XG4gICAgICAgIHRoaXMuY3VycmVudEZpbGUuZGF0YS5wdXNoKGxheWVyKTtcbiAgICAgICAgdGhpcy5sYXllckluZGV4ID0gdGhpcy5jdXJyZW50RmlsZS5kYXRhLmxlbmd0aCAtIDE7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIHNhdmVGaWxlKHR5cGUsIG9wdGlvbnMgPSB7IHNjYWxlOiAxIH0pIHtcbiAgICAgICAgaWYgKHR5cGUgPT09IFwicG5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFVcmwgPSB0aGlzLnJlbmRlcmVyLmNhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XG4gICAgICAgICAgICBjb25zdCBjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IGMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBpbWcuc3JjID0gZGF0YVVybDtcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYy53aWR0aCA9IGltZy53aWR0aCAqIG9wdGlvbnMuc2NhbGU7XG4gICAgICAgICAgICAgICAgYy5oZWlnaHQgPSBpbWcuaGVpZ2h0ICogb3B0aW9ucy5zY2FsZTtcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgYy53aWR0aCwgYy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICAgICAgICBhLmhyZWYgPSBjLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcbiAgICAgICAgICAgICAgICBhLmRvd25sb2FkID0gXCJpbWFnZS5wbmdcIjtcbiAgICAgICAgICAgICAgICBhLmNsaWNrKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy51aS5sb2coYHNhdmUgZmlsZSBhcyAke3R5cGV9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51aS5sb2coYGZpbGV0eXBlICR7dHlwZX0gaXMgbm90IHN1cHBvcnRlZGApO1xuICAgIH1cbiAgICB1bmRvKCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkudW5kbygpO1xuICAgIH1cbiAgICByZWRvKCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkucmVkbygpO1xuICAgIH1cbiAgICBjaGFuZ2VUb29sKHRvb2wpIHtcbiAgICAgICAgdGhpcy50b29sID0gdG9vbDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiTGF5ZXIiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJsb2NrZWQiLCJ3aWR0aCIsImhlaWdodCIsInRoaXMiLCJvcGFjaXR5IiwidmlzaWJsZSIsImRhdGEiLCJJbWFnZURhdGEiLCJkZWZhdWx0UGFsZXR0ZSIsImNvbG9ycyIsImFkZENvbG9yIiwiY29sb3IiLCJwdXNoIiwicmVtb3ZlQ29sb3IiLCJpbmRleCIsInNwbGljZSIsInNldENvbG9yIiwiZ2V0Q29sb3IiLCJXaXpGaWxlIiwicGFsZXR0ZSIsIkhpc3RvcnkiLCJhcHAiLCJpdGVtcyIsImN1cnNvciIsImxlbmd0aCIsImFkZCIsIml0ZW0iLCJjbGVhckZyb21DdXJzb3IiLCJ1bmRvIiwicmVkbyIsIlJlbmRlcmVyIiwiem9vbSIsImZpbGUiLCJjdXJyZW50RmlsZSIsImdyaWQiLCJncmlkU2l6ZSIsIl9jYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJfY3R4IiwiY2FudmFzIiwiZ2V0Q29udGV4dCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiZmlsZXMiLCJmaWxlSW5kZXgiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kU2l6ZSIsImltYWdlUmVuZGVyaW5nIiwic2V0Wm9vbSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJ6b29tQ2hhbmdlIiwiZGVsdGFZIiwiYm9keSIsInF1ZXJ5U2VsZWN0b3IiLCJhcHBlbmQiLCJpbWFnZURhdGEiLCJjdHgiLCJjcmVhdGVJbWFnZURhdGEiLCJoaXN0b3J5IiwiZ2V0SW1hZ2VEYXRhIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIngiLCJNYXRoIiwiZmxvb3IiLCJjbGllbnRYIiwibGVmdCIsImNsaWVudFkiLCJ0b3AiLCJwcmltYXJ5Q29sb3IiLCJwdXRJbWFnZURhdGEiLCJidXR0b25zIiwiZHJhd1JlY3QiLCJ5IiwidyIsImgiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImZpbGwiLCJzdGFydFgiLCJzdGFydFkiLCJ0YXJnZXRDb2xvciIsInJlcGxhY2VDb2xvciIsIm1hdHJpeCIsImxheWVySW5kZXgiLCJ1cGRhdGUiLCJkdCIsImRlbHRhIiwic2lnbiIsInpvb21JbiIsImNvbnNvbGUiLCJsb2ciLCJ6b29tT3V0Iiwiem9vbVJlc2V0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYmluZCIsIkRpYWxvZ0VsZW1lbnQiLCJzZWxlY3RvciIsImVsZW1lbnQiLCJjbG9zZUJ0biIsImNsb3NlIiwidG9nZ2xlIiwiaGFzQXR0cmlidXRlIiwib3BlbiIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJJbnB1dENvbW1hbmQiLCJjb21tYW5kcyIsIm4iLCJuZXdGaWxlIiwibmwiLCJuZXdMYXllciIsImwiLCJ1aSIsImxheWVyc0RpYWxvZyIsInR5cGUiLCJzY2FsZSIsInNhdmVGaWxlIiwicGFyc2VJbnQiLCJoZWxwRGlhbG9nIiwicCIsInBhbGV0dGVEaWFsb2ciLCJQIiwibXNnIiwia2V5IiwiZXhlY3V0ZSIsInZhbHVlIiwiY2xhc3NMaXN0IiwiZm9jdXMiLCJyZW1vdmUiLCJjbWQiLCJzbGljZSIsImNvbW1hbmQiLCJhcmdzIiwic3BsaXQiLCJUYWIiLCJ0aXRsZSIsImlkIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwidGFiVGl0bGUiLCJ0ZXh0Q29udGVudCIsImFwcGVuZENoaWxkIiwiZGVhY3RpdmF0ZVRhYiIsImFjdGl2YXRlVGFiIiwicmVuYW1lIiwiVUkiLCJzdGFydHVwRGlhbG9nIiwiaW5wdXRDb21tYW5kIiwiem9vbUVsZW1lbnQiLCJwcmltYXJ5Q29sb3JFbGVtZW50Iiwic3RhdHVzTGluZSIsImxheWVyc1dyYXAiLCJwYWxldHRlV3JhcCIsInBhbGV0dGVUaXRsZSIsInRhYnMiLCJnZXRJdGVtIiwicmVuZGVyUGFsZXR0ZSIsImlubmVySFRNTCIsImZvckVhY2giLCJlbCIsInJlbmRlckxheWVycyIsImxheWVyIiwidG8iLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidG9vbCIsInBhbGV0dGVzIiwicmVuZGVyZXIiLCJzZXR1cCIsIm1ldGFLZXkiLCJjb250YWlucyIsIm1vdmVtZW50WCIsIm1vdmVtZW50WSIsIm9wdGlvbnMiLCJkYXRhVXJsIiwidG9EYXRhVVJMIiwiYyIsImltZyIsIkltYWdlIiwic3JjIiwib25sb2FkIiwiZHJhd0ltYWdlIiwiYSIsImhyZWYiLCJkb3dubG9hZCIsImNsaWNrIiwiY2hhbmdlVG9vbCJdLCJzb3VyY2VSb290IjoiIn0=