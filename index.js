(()=>{"use strict";class t{constructor(t="New layer",e=!1,i,s){this.name=t,this.locked=e,this.width=i,this.height=s,this.opacity=255,this.visible=!0,this.data=new ImageData(i,s)}}const e=new class{constructor(t="New palette"){this.name=t,this.colors=[[]]}addColor(t){this.colors.push(t)}removeColor(t){this.colors.splice(t,1)}setColor(t,e){this.colors[t]=e}getColor(t){return this.colors[t]}}("Default");e.colors=[[0,0,0,255],[252,252,252,255],[248,248,248,255],[188,188,188,255],[124,124,124,255],[164,228,252,255],[60,188,252,255],[0,120,248,255],[0,0,252,255],[184,184,248,255],[104,136,252,255],[0,88,248,255],[0,0,188,255],[216,184,248,255],[152,120,248,255],[104,68,252,255],[68,40,188,255],[248,184,248,255],[248,120,248,255],[216,0,204,255],[148,0,132,255],[248,164,192,255],[248,88,152,255],[228,0,88,255],[168,0,32,255],[240,208,176,255],[248,120,88,255],[248,56,0,255],[168,16,0,255],[252,224,168,255],[252,160,68,255],[228,92,16,255],[136,20,0,255],[248,216,120,255],[248,184,0,255],[172,124,0,255],[80,40,0,255],[216,248,120,255],[184,248,24,255],[0,184,0,255],[0,120,0,255],[184,248,184,255],[88,216,84,255],[0,168,0,255],[0,104,0,255],[184,248,216,255],[88,248,152,255],[0,168,68,255],[0,88,0,255],[0,252,252,255],[0,232,216,255],[0,136,136,255],[0,64,88,255],[248,216,248,255],[120,120,120,255]];class i{constructor(i,s){this.width=i,this.height=s,this.data=[],this.palette=e,this.data=[new t("Background",!0,i,s)]}}class s{constructor(t){this.app=t,this.items=[],this.cursor=this.items.length-1}add(t){this.items.push(t),this.cursor=this.items.length-1}clearFromCursor(){this.items.splice(this.cursor+1)}undo(){}redo(){}}class a{constructor(t){this.app=t,this.zoom=25,this.file=this.app.currentFile,this.grid=!0,this.gridSize=16,this._canvas=document.createElement("canvas"),this._ctx=this.canvas.getContext("2d"),this.canvas.style.backgroundColor="white",this.canvas.width=this.app.files[this.app.fileIndex].width,this.canvas.height=this.app.files[this.app.fileIndex].height,this.canvas.style.backgroundImage="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'><rect width='16' height='16' fill='none'/><rect x='0' y='0' width='8' height='8' fill='%23f0f0f0'/><rect x='8' y='8' width='8' height='8' fill='%23f0f0f0'/></svg>\")",this.canvas.style.backgroundSize="16px 16px",this.canvas.style.imageRendering="pixelated",this.setZoom(this.zoom),this.canvas.addEventListener("wheel",(t=>{t.preventDefault(),this.zoomChange(t.deltaY)})),document.body.querySelector("#main").append(this.canvas);const e=this.ctx.createImageData(this.file.width,this.file.height);this.canvas.addEventListener("click",(t=>{this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height));const i=this.canvas.getBoundingClientRect(),s=Math.floor((t.clientX-i.left)/this.zoom),a=4*(Math.floor((t.clientY-i.top)/this.zoom)*this.file.width+s);e.data[a]=this.app.primaryColor[0],e.data[a+1]=this.app.primaryColor[1],e.data[a+2]=this.app.primaryColor[2],e.data[a+3]=this.app.primaryColor[3],this.ctx.putImageData(e,0,0),this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height))})),this.canvas.addEventListener("mousemove",(t=>{if(1===t.buttons){this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height));const i=this.canvas.getBoundingClientRect(),s=Math.floor((t.clientX-i.left)/this.zoom),a=4*(Math.floor((t.clientY-i.top)/this.zoom)*this.file.width+s);e.data[a]=this.app.primaryColor[0],e.data[a+1]=this.app.primaryColor[1],e.data[a+2]=this.app.primaryColor[2],e.data[a+3]=this.app.primaryColor[3],this.ctx.putImageData(e,0,0),this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height))}}))}get canvas(){return this._canvas}get ctx(){return this._ctx}drawRect(t,e,i,s,a){this.ctx.fillStyle=a,this.ctx.fillRect(t,e,i,s)}fill(t,e,i,s){const a=this.file.data[this.app.layerIndex].data;if(t<0||t>=a.width||e<0||e>=a.height)return;const o=e*a.width+t;a.data[o]!==s&&a.data[o]===i&&(a.data[o]=s,this.fill(t+1,e,i,s),this.fill(t-1,e,i,s),this.fill(t,e+1,i,s),this.fill(t,e-1,i,s))}setZoom(t){this.zoom=t,this.canvas.style.width=this.file.width*this.zoom+"px",this.canvas.style.height=this.file.height*this.zoom+"px",this.update()}zoomChange(t=0){const e=Math.sign(t);this.zoom+=8*e,this.setZoom(this.zoom)}zoomIn(){console.log("zoom in"),this.zoom<128&&this.zoomChange(1)}zoomOut(){console.log("zoom out"),this.zoom>1&&this.zoomChange(-1)}zoomReset(){console.log("zoom reset"),this.setZoom(25)}update(){requestAnimationFrame(this.update.bind(this))}}class o{constructor(t,e,i=!1){this.name=t,this.container=e,this._template=`\n    <style>\n      .dialog {\n        background-color: var(--bg-color);\n        border-radius: 0.5rem;\n        border: 1px solid var(--mid-color);\n        color: var(--fg-color);\n        min-width: 320px;\n        width: 500px;\n      }\n    </style>\n\n    <div class="d-flex" id="DialogHeader${this.name}">\n      <div id="DialogTitle${this.name}">Dialog</div>\n      <button class="btn btn--icon" id="BtnCloseDialog${this.name}">\n        X\n      </button>\n    </div>\n    <div class="DialogBody DialogBody${this.name}" id="DialogBody${this.name}"></div>\n  `,this.element=document.createElement("dialog"),this.element.className=`dialog Dialog${this.name}`,this.element.open=i,this.container.append(this.element),console.log(this.name),this.header=this.element.querySelector(`#DialogHeader${t}`),this.element.id=`Dialog${t}`,this.element.innerHTML=this._template,this.closeBtn=this.element.querySelector(`#BtnCloseDialog${t}`),this.closeBtn.addEventListener("click",(()=>{this.close()}))}drag(t){let e=0,i=0,s=0,a=0;s=t.clientX,a=t.clientY;const o=t=>{t.preventDefault(),e=s-t.clientX,i=a-t.clientY,s=t.clientX,a=t.clientY,this.element.style.top=this.element.offsetTop-i+"px",this.element.style.left=this.element.offsetLeft-e+"px"},n=()=>{document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",o)};document.addEventListener("mouseup",n),document.addEventListener("mousemove",o)}move(t,e){this.element.style.left=`${t}px`,this.element.style.top=`${e}px`}toggle(){this.element.hasAttribute("open")?this.close():this.open()}open(){this.element.setAttribute("open","")}close(){this.element.removeAttribute("open"),window.localStorage.setItem("startup","false")}}class n{constructor(t,e){this.selector=t,this.app=e,this.commands={n:()=>{this.app.newFile()},nl:()=>{this.app.newLayer()},l:()=>{this.app.ui.layersDialog.toggle()},e:()=>{},w:(t,e)=>{this.app.saveFile(t,{scale:parseInt(e)})},h:()=>{this.app.ui.helpDialog.toggle(),this.app.ui.log("Help")},p:()=>{this.app.ui.paletteDialog.toggle(),this.app.ui.log("Open palette")},P:()=>{},log:t=>{this.app.ui.log(t)}},this.element=document.querySelector(`#${t}`),this.element.addEventListener("keydown",(t=>{"Enter"===t.key&&(this.execute(this.element.value),this.close())}))}open(){this.element.classList.add("open"),this.element.focus(),this.element.value=":"}close(){this.element.classList.remove("open"),this.element.value=""}execute(t){t=t.slice(1);const[e,...i]=t.split(" ");console.log(e,i),e in this.commands?this.commands[e](...i):this.app.ui.log(`command not found: ${e}`)}}class l{constructor(t){this.title=t,this.id=Date.now().toString(),this.element=document.createElement("div"),this.tabTitle=document.createElement("span"),this.element.id=this.id,this.element.classList.add("tab"),this.closeBtn=document.createElement("button"),this.closeBtn.id=`#btnClose${this.id}`,this.closeBtn.textContent="X",this.tabTitle.textContent=t,this.element.append(this.tabTitle,this.closeBtn),document.querySelector("#tabs").appendChild(this.element),this.closeBtn.addEventListener("click",(()=>{this.close()}))}deactivateTab(){this.element.classList.remove("active")}activateTab(){this.element.classList.add("active")}rename(t){this.title=t,this.tabTitle.textContent=t}close(){this.element.removeAttribute("open")}}class h{constructor(t){this.app=t,this._container=document.querySelector("body"),this.startupDialog=new o("Startup",this._container),this.helpDialog=new o("Help",this._container),this.inputCommand=new n("InputCmd",this.app),this.zoomElement=document.querySelector("#zoom"),this.primaryColorElement=document.querySelector("#toolPrColor"),this.statusLine=document.querySelector("#statusLine"),this.layersDialog=new o("Layers",this._container),this.layersWrap=document.querySelector("#layersWrap"),this.paletteDialog=new o("Palette",this._container),this.paletteWrap=this.paletteDialog.element.querySelector("#DialogBodyPalette"),this.paletteTitle=this.paletteDialog.element.querySelector("#DialogTitlePalette"),this.tabs=document.querySelector("#tabs"),this.app=t,window.localStorage.getItem("startup")&&"true"!==window.localStorage.getItem("startup")||this.startupDialog.open(),this.tabs.append(new l("Untitled").element),this.update()}renderPalette(){this.paletteWrap.innerHTML="";const t=document.createElement("div");t.className="palette-wrap",this.paletteTitle.textContent=this.app.palette.name,this.app.palette.colors.forEach(((e,i)=>{const s=document.createElement("div");s.classList.add("color-swatch"),s.style.backgroundColor=`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`,t.append(s),s.addEventListener("click",(()=>{this.app.primaryColor=e,this.update()}))})),this.paletteWrap.append(t)}renderLayers(){this.layersWrap.innerHTML="",this.app.currentFile?.data.forEach(((t,e)=>{const i=document.createElement("div");i.classList.add("layer"),e===this.app.layerIndex&&i.classList.add("active"),i.textContent=t.name,i.addEventListener("click",(()=>{this.app.layerIndex=e,this.update()})),this.layersWrap.append(i)}))}log(t){this.to&&clearTimeout(this.to),this.statusLine.classList.add("open"),this.statusLine.textContent=t,this.to=setTimeout((()=>{this.statusLine.classList.remove("open"),this.statusLine.textContent=""}),2e3)}update(){this.renderPalette(),this.renderLayers(),this.zoomElement.textContent=100*this.app.zoom+"%",this.primaryColorElement.style.backgroundColor=`rgba(${this.app.primaryColor[0]}, ${this.app.primaryColor[1]}, ${this.app.primaryColor[2]}, ${this.app.primaryColor[3]})`}}const r=new class{constructor(){this.history=new s(this),this.zoom=25,this.tool="pencil",this.color=1,this.files=[],this.fileIndex=0,this.palette=e,this.primaryColor=this.palette.getColor(0),this.palettes=[this.palette],this.ui=new h(this),this.layerIndex=0,this.files.push(new i(16,16)),this.renderer=new a(this),this.setup()}get currentFile(){return this.files[this.fileIndex]}setup(){document.addEventListener("keydown",(t=>{if(t.metaKey&&"="===t.key)return t.preventDefault(),void this.renderer.zoomIn();if(t.metaKey&&"-"===t.key)return t.preventDefault(),void this.renderer.zoomOut();if(t.metaKey&&"0"===t.key)return t.preventDefault(),void this.renderer.zoomReset();if(t.metaKey&&"z"===t.key)return t.preventDefault(),void this.undo();switch(t.key){case"Space":this.ui.inputCommand.element.classList.contains("open")||(t.preventDefault(),this.renderer.canvas.style.cursor="grab",this.renderer.canvas.addEventListener("mousemove",(t=>{1===t.buttons&&(this.renderer.canvas.style.cursor="grabbing",this.renderer.canvas.style.left=`${t.movementX}px`,this.renderer.canvas.style.top=`${t.movementY}px`)})));break;case"?":t.preventDefault(),this.ui.helpDialog.toggle();break;case"Escape":t.preventDefault(),this.ui.inputCommand.element.classList.contains("open")?this.ui.inputCommand.close():this.ui.inputCommand.open()}})),document.addEventListener("keyup",(t=>{if(" "===t.key)t.preventDefault(),this.renderer.canvas.style.cursor="default"})),this.update()}update(){this.renderer.update(),this.ui.update()}newFile(){console.log("new")}newLayer(){const e=new t("Layer "+(this.currentFile.data.length+1),!1,this.currentFile.width,this.currentFile.height);this.currentFile.data.push(e),this.layerIndex=this.currentFile.data.length-1,this.update()}saveFile(t,e={scale:1}){if("png"===t){const i=this.renderer.canvas.toDataURL("image/png"),s=document.createElement("canvas"),a=s.getContext("2d"),o=new Image;return o.src=i,o.onload=()=>{s.width=o.width*e.scale,s.height=o.height*e.scale,a.drawImage(o,0,0,s.width,s.height);const t=document.createElement("a");t.href=s.toDataURL("image/png"),t.download="image.png",t.click()},void this.ui.log(`save file as ${t}`)}this.ui.log(`filetype ${t} is not supported`)}undo(){this.history.undo()}redo(){this.history.redo()}changeTool(t){this.tool=t}};window.app=r})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJtYXBwaW5ncyI6Im1CQUFlLE1BQU1BLEVBQ2pCQyxZQUFZQyxFQUFPLFlBQWFDLEdBQVMsRUFBT0MsRUFBT0MsR0FDbkRDLEtBQUtKLEtBQU9BLEVBQ1pJLEtBQUtILE9BQVNBLEVBQ2RHLEtBQUtGLE1BQVFBLEVBQ2JFLEtBQUtELE9BQVNBLEVBQ2RDLEtBQUtDLFFBQVUsSUFDZkQsS0FBS0UsU0FBVSxFQUNmRixLQUFLRyxLQUFPLElBQUlDLFVBQVVOLEVBQU9DLEVBQ3JDLEVDU0csTUFBTU0sRUFBaUIsSUFsQmYsTUFDWFYsWUFBWUMsRUFBTyxlQUNmSSxLQUFLSixLQUFPQSxFQUNaSSxLQUFLTSxPQUFTLENBQUMsR0FDbkIsQ0FDQUMsU0FBU0MsR0FDTFIsS0FBS00sT0FBT0csS0FBS0QsRUFDckIsQ0FDQUUsWUFBWUMsR0FDUlgsS0FBS00sT0FBT00sT0FBT0QsRUFBTyxFQUM5QixDQUNBRSxTQUFTRixFQUFPSCxHQUNaUixLQUFLTSxPQUFPSyxHQUFTSCxDQUN6QixDQUNBTSxTQUFTSCxHQUNMLE9BQU9YLEtBQUtNLE9BQU9LLEVBQ3ZCLEdBRXNDLFdBRTFDTixFQUFlQyxPQUFTLENBQ3BCLENBQUMsRUFBRyxFQUFHLEVBQUcsS0FDVixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxHQUFJLElBQUssSUFBSyxLQUNmLENBQUMsRUFBRyxJQUFLLElBQUssS0FDZCxDQUFDLEVBQUcsRUFBRyxJQUFLLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsRUFBRyxHQUFJLElBQUssS0FDYixDQUFDLEVBQUcsRUFBRyxJQUFLLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxHQUFJLElBQUssS0FDZixDQUFDLEdBQUksR0FBSSxJQUFLLEtBQ2QsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxFQUFHLElBQUssS0FDZCxDQUFDLElBQUssRUFBRyxJQUFLLEtBQ2QsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssR0FBSSxJQUFLLEtBQ2YsQ0FBQyxJQUFLLEVBQUcsR0FBSSxLQUNiLENBQUMsSUFBSyxFQUFHLEdBQUksS0FDYixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLEdBQUksS0FDZixDQUFDLElBQUssR0FBSSxFQUFHLEtBQ2IsQ0FBQyxJQUFLLEdBQUksRUFBRyxLQUNiLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLElBQUssR0FBSSxLQUNmLENBQUMsSUFBSyxHQUFJLEdBQUksS0FDZCxDQUFDLElBQUssR0FBSSxFQUFHLEtBQ2IsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxFQUFHLEtBQ2QsQ0FBQyxJQUFLLElBQUssRUFBRyxLQUNkLENBQUMsR0FBSSxHQUFJLEVBQUcsS0FDWixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLEdBQUksS0FDZixDQUFDLEVBQUcsSUFBSyxFQUFHLEtBQ1osQ0FBQyxFQUFHLElBQUssRUFBRyxLQUNaLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxHQUFJLElBQUssR0FBSSxLQUNkLENBQUMsRUFBRyxJQUFLLEVBQUcsS0FDWixDQUFDLEVBQUcsSUFBSyxFQUFHLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLEdBQUksSUFBSyxJQUFLLEtBQ2YsQ0FBQyxFQUFHLElBQUssR0FBSSxLQUNiLENBQUMsRUFBRyxHQUFJLEVBQUcsS0FDWCxDQUFDLEVBQUcsSUFBSyxJQUFL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Q25CaUssRUFBTSxJQUFJQyxNQVloQixPQVhBRCxFQUFJRSxJQUFNTCxFQUNWRyxFQUFJRyxPQUFTLEtBQ1RKLEVBQUV4TSxNQUFReU0sRUFBSXpNLE1BQVFxTSxFQUFRM0QsTUFDOUI4RCxFQUFFdk0sT0FBU3dNLEVBQUl4TSxPQUFTb00sRUFBUTNELE1BQ2hDaEYsRUFBSW1KLFVBQVVKLEVBQUssRUFBRyxFQUFHRCxFQUFFeE0sTUFBT3dNLEVBQUV2TSxRQUNwQyxNQUFNNk0sRUFBSTFLLFNBQVNDLGNBQWMsS0FDakN5SyxFQUFFQyxLQUFPUCxFQUFFRCxVQUFVLGFBQ3JCTyxFQUFFRSxTQUFXLFlBQ2JGLEVBQUVHLE9BQU8sT0FFYi9NLEtBQUtxSSxHQUFHMUMsSUFBSSxnQkFBZ0I0QyxJQUVoQyxDQUNBdkksS0FBS3FJLEdBQUcxQyxJQUFJLFlBQVk0QyxxQkFDNUIsQ0FDQTlHLE9BQ0l6QixLQUFLMEQsUUFBUWpDLE1BQ2pCLENBQ0FDLE9BQ0kxQixLQUFLMEQsUUFBUWhDLE1BQ2pCLENBQ0FzTCxXQUFXckIsR0FDUDNMLEtBQUsyTCxLQUFPQSxDQUNoQixHRGpJSmpFLE9BQU94RyxJQUFNQSxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9sYXllci50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL3BhbGV0dGUudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9maWxlLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvaGlzdG9yeS50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL3JlbmRlcmVyLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvdWkvZGlhbG9nLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvaW5wdXQtY29tbWFuZC50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL3VpLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9hcHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGF5ZXIge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUgPSBcIk5ldyBsYXllclwiLCBsb2NrZWQgPSBmYWxzZSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmxvY2tlZCA9IGxvY2tlZDtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5vcGFjaXR5ID0gMjU1O1xuICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgSW1hZ2VEYXRhKHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhbGV0dGUge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUgPSBcIk5ldyBwYWxldHRlXCIpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5jb2xvcnMgPSBbW11dO1xuICAgIH1cbiAgICBhZGRDb2xvcihjb2xvcikge1xuICAgICAgICB0aGlzLmNvbG9ycy5wdXNoKGNvbG9yKTtcbiAgICB9XG4gICAgcmVtb3ZlQ29sb3IoaW5kZXgpIHtcbiAgICAgICAgdGhpcy5jb2xvcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG4gICAgc2V0Q29sb3IoaW5kZXgsIGNvbG9yKSB7XG4gICAgICAgIHRoaXMuY29sb3JzW2luZGV4XSA9IGNvbG9yO1xuICAgIH1cbiAgICBnZXRDb2xvcihpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcnNbaW5kZXhdO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBkZWZhdWx0UGFsZXR0ZSA9IG5ldyBQYWxldHRlKFwiRGVmYXVsdFwiKTtcbi8vIE5FUyBwYWxldHRlXG5kZWZhdWx0UGFsZXR0ZS5jb2xvcnMgPSBbXG4gICAgWzAsIDAsIDAsIDI1NV0sXG4gICAgWzI1MiwgMjUyLCAyNTIsIDI1NV0sXG4gICAgWzI0OCwgMjQ4LCAyNDgsIDI1NV0sXG4gICAgWzE4OCwgMTg4LCAxODgsIDI1NV0sXG4gICAgWzEyNCwgMTI0LCAxMjQsIDI1NV0sXG4gICAgWzE2NCwgMjI4LCAyNTIsIDI1NV0sXG4gICAgWzYwLCAxODgsIDI1MiwgMjU1XSxcbiAgICBbMCwgMTIwLCAyNDgsIDI1NV0sXG4gICAgWzAsIDAsIDI1MiwgMjU1XSxcbiAgICBbMTg0LCAxODQsIDI0OCwgMjU1XSxcbiAgICBbMTA0LCAxMzYsIDI1MiwgMjU1XSxcbiAgICBbMCwgODgsIDI0OCwgMjU1XSxcbiAgICBbMCwgMCwgMTg4LCAyNTVdLFxuICAgIFsyMTYsIDE4NCwgMjQ4LCAyNTVdLFxuICAgIFsxNTIsIDEyMCwgMjQ4LCAyNTVdLFxuICAgIFsxMDQsIDY4LCAyNTIsIDI1NV0sXG4gICAgWzY4LCA0MCwgMTg4LCAyNTVdLFxuICAgIFsyNDgsIDE4NCwgMjQ4LCAyNTVdLFxuICAgIFsyNDgsIDEyMCwgMjQ4LCAyNTVdLFxuICAgIFsyMTYsIDAsIDIwNCwgMjU1XSxcbiAgICBbMTQ4LCAwLCAxMzIsIDI1NV0sXG4gICAgWzI0OCwgMTY0LCAxOTIsIDI1NV0sXG4gICAgWzI0OCwgODgsIDE1MiwgMjU1XSxcbiAgICBbMjI4LCAwLCA4OCwgMjU1XSxcbiAgICBbMTY4LCAwLCAzMiwgMjU1XSxcbiAgICBbMjQwLCAyMDgsIDE3NiwgMjU1XSxcbiAgICBbMjQ4LCAxMjAsIDg4LCAyNTVdLFxuICAgIFsyNDgsIDU2LCAwLCAyNTVdLFxuICAgIFsxNjgsIDE2LCAwLCAyNTVdLFxuICAgIFsyNTIsIDIyNCwgMTY4LCAyNTVdLFxuICAgIFsyNTIsIDE2MCwgNjgsIDI1NV0sXG4gICAgWzIyOCwgOTIsIDE2LCAyNTVdLFxuICAgIFsxMzYsIDIwLCAwLCAyNTVdLFxuICAgIFsyNDgsIDIxNiwgMTIwLCAyNTVdLFxuICAgIFsyNDgsIDE4NCwgMCwgMjU1XSxcbiAgICBbMTcyLCAxMjQsIDAsIDI1NV0sXG4gICAgWzgwLCA0MCwgMCwgMjU1XSxcbiAgICBbMjE2LCAyNDgsIDEyMCwgMjU1XSxcbiAgICBbMTg0LCAyNDgsIDI0LCAyNTVdLFxuICAgIFswLCAxODQsIDAsIDI1NV0sXG4gICAgWzAsIDEyMCwgMCwgMjU1XSxcbiAgICBbMTg0LCAyNDgsIDE4NCwgMjU1XSxcbiAgICBbODgsIDIxNiwgODQsIDI1NV0sXG4gICAgWzAsIDE2OCwgMCwgMjU1XSxcbiAgICBbMCwgMTA0LCAwLCAyNTVdLFxuICAgIFsxODQsIDI0OCwgMjE2LCAyNTVdLFxuICAgIFs4OCwgMjQ4LCAxNTIsIDI1NV0sXG4gICAgWzAsIDE2OCwgNjgsIDI1NV0sXG4gICAgWzAsIDg4LCAwLCAyNTVdLFxuICAgIFswLCAyNTIsIDI1MiwgMjU1XSxcbiAgICBbMCwgMjMyLCAyMTYsIDI1NV0sXG4gICAgWzAsIDEzNiwgMTM2LCAyNTVdLFxuICAgIFswLCA2NCwgODgsIDI1NV0sXG4gICAgWzI0OCwgMjE2LCAyNDgsIDI1NV0sXG4gICAgWzEyMCwgMTIwLCAxMjAsIDI1NV0sXG5dO1xuIiwiaW1wb3J0IExheWVyIGZyb20gXCIuL2xheWVyXCI7XG5pbXBvcnQgeyBkZWZhdWx0UGFsZXR0ZSB9IGZyb20gXCIuL3BhbGV0dGVcIjtcbmV4cG9ydCBjbGFzcyBXaXpGaWxlIHtcbiAgICBjb25zdHJ1Y3Rvcih3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgICB0aGlzLnBhbGV0dGUgPSBkZWZhdWx0UGFsZXR0ZTtcbiAgICAgICAgdGhpcy5kYXRhID0gW25ldyBMYXllcihcIkJhY2tncm91bmRcIiwgdHJ1ZSwgd2lkdGgsIGhlaWdodCldO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEhpc3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuaXRlbXMubGVuZ3RoIC0gMTtcbiAgICB9XG4gICAgYWRkKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuaXRlbXMubGVuZ3RoIC0gMTtcbiAgICB9XG4gICAgY2xlYXJGcm9tQ3Vyc29yKCkge1xuICAgICAgICB0aGlzLml0ZW1zLnNwbGljZSh0aGlzLmN1cnNvciArIDEpO1xuICAgIH1cbiAgICB1bmRvKCkge1xuICAgICAgICAvLyAgaWYgKHRoaXMuY3Vyc29yID4gMCkge1xuICAgICAgICAvLyAgICB0aGlzLmN1cnNvci0tO1xuICAgICAgICAvLyAgICB0aGlzLmFwcC5maWxlc1t0aGlzLmFwcC5maWxlSW5kZXhdLmRhdGEucHV0SW1hZ2VEYXRhKHRoaXMuaXRlbXNbdGhpcy5jdXJzb3JdLCAwLCAwKTtcbiAgICAgICAgLy8gIH1cbiAgICB9XG4gICAgcmVkbygpIHtcbiAgICAgICAgLy8gIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuaXRlbXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAvLyAgICB0aGlzLmN1cnNvcisrO1xuICAgICAgICAvLyAgICB0aGlzLmFwcC5jdHgucHV0SW1hZ2VEYXRhKHRoaXMuaXRlbXNbdGhpcy5jdXJzb3JdLCAwLCAwKTtcbiAgICAgICAgLy8gIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnpvb20gPSAyNTtcbiAgICAgICAgdGhpcy5maWxlID0gdGhpcy5hcHAuY3VycmVudEZpbGU7XG4gICAgICAgIHRoaXMuZ3JpZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZ3JpZFNpemUgPSAxNjtcbiAgICAgICAgdGhpcy5fY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgdGhpcy5fY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5hcHAuZmlsZXNbdGhpcy5hcHAuZmlsZUluZGV4XS53aWR0aDtcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5hcHAuZmlsZXNbdGhpcy5hcHAuZmlsZUluZGV4XS5oZWlnaHQ7XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCw8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzE2JyBoZWlnaHQ9JzE2JyB2aWV3Qm94PScwIDAgMTYgMTYnPjxyZWN0IHdpZHRoPScxNicgaGVpZ2h0PScxNicgZmlsbD0nbm9uZScvPjxyZWN0IHg9JzAnIHk9JzAnIHdpZHRoPSc4JyBoZWlnaHQ9JzgnIGZpbGw9JyUyM2YwZjBmMCcvPjxyZWN0IHg9JzgnIHk9JzgnIHdpZHRoPSc4JyBoZWlnaHQ9JzgnIGZpbGw9JyUyM2YwZjBmMCcvPjwvc3ZnPlwiKWA7XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmJhY2tncm91bmRTaXplID0gXCIxNnB4IDE2cHhcIjtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuaW1hZ2VSZW5kZXJpbmcgPSBcInBpeGVsYXRlZFwiO1xuICAgICAgICB0aGlzLnNldFpvb20odGhpcy56b29tKTtcbiAgICAgICAgLy8gYWJpbGl0eSB0byB6b29tIGluIGFuZCBvdXQgd2l0aCBtb3VzZSB3aGVlbFxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuem9vbUNoYW5nZShlLmRlbHRhWSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpblwiKS5hcHBlbmQodGhpcy5jYW52YXMpO1xuICAgICAgICBjb25zdCBpbWFnZURhdGEgPSB0aGlzLmN0eC5jcmVhdGVJbWFnZURhdGEodGhpcy5maWxlLndpZHRoLCB0aGlzLmZpbGUuaGVpZ2h0KTtcbiAgICAgICAgLy8gYWJpbGl0eSB0byBkcmF3IHBpeGVsIHdpdGggbW91c2UgY2xpY2tcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcC5oaXN0b3J5LmFkZCh0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5maWxlLndpZHRoLCB0aGlzLmZpbGUuaGVpZ2h0KSk7XG4gICAgICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBjb25zdCB4ID0gTWF0aC5mbG9vcigoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcigoZS5jbGllbnRZIC0gcmVjdC50b3ApIC8gdGhpcy56b29tKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gKHkgKiB0aGlzLmZpbGUud2lkdGggKyB4KSAqIDQ7XG4gICAgICAgICAgICAvL3RoaXMuZmlsZXNbdGhpcy5maWxlSW5kZXhdLmRhdGFbdGhpcy5sYXllckluZGV4XS5kYXRhW3ldW3hdID0gdGhpcy5jb2xvcjtcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4XSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclswXTtcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSB0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMV07XG4gICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzJdO1xuICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAzXSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclszXTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICAgICAgICAgICAgdGhpcy5hcHAuaGlzdG9yeS5hZGQodGhpcy5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuZmlsZS53aWR0aCwgdGhpcy5maWxlLmhlaWdodCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gYWJpbGl0eSB0byBkcmF3IHBpeGVsIHdpdGggbW91c2UgbW92ZVxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5idXR0b25zID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAuaGlzdG9yeS5hZGQodGhpcy5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuZmlsZS53aWR0aCwgdGhpcy5maWxlLmhlaWdodCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB4ID0gTWF0aC5mbG9vcigoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IE1hdGguZmxvb3IoKGUuY2xpZW50WSAtIHJlY3QudG9wKSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSAoeSAqIHRoaXMuZmlsZS53aWR0aCArIHgpICogNDtcbiAgICAgICAgICAgICAgICAvL3RoaXMuZmlsZXNbdGhpcy5maWxlSW5kZXhdLmRhdGFbdGhpcy5sYXllckluZGV4XS5kYXRhW3ldW3hdID1cbiAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbG9yO1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4XSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclswXTtcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDFdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzFdO1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gPSB0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMl07XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAzXSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclszXTtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5oaXN0b3J5LmFkZCh0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5maWxlLndpZHRoLCB0aGlzLmZpbGUuaGVpZ2h0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgY2FudmFzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FudmFzO1xuICAgIH1cbiAgICBnZXQgY3R4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY3R4O1xuICAgIH1cbiAgICBkcmF3UmVjdCh4LCB5LCB3LCBoLCBjb2xvcikge1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoeCwgeSwgdywgaCk7XG4gICAgfVxuICAgIGZpbGwoc3RhcnRYLCBzdGFydFksIHRhcmdldENvbG9yLCByZXBsYWNlQ29sb3IpIHtcbiAgICAgICAgY29uc3QgbWF0cml4ID0gdGhpcy5maWxlLmRhdGFbdGhpcy5hcHAubGF5ZXJJbmRleF0uZGF0YTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHN0YXJ0IGNvb3JkaW5hdGVzIGFyZSBvdXQgb2YgYm91bmRzXG4gICAgICAgIGlmIChzdGFydFggPCAwIHx8XG4gICAgICAgICAgICBzdGFydFggPj0gbWF0cml4LndpZHRoIHx8XG4gICAgICAgICAgICBzdGFydFkgPCAwIHx8XG4gICAgICAgICAgICBzdGFydFkgPj0gbWF0cml4LmhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gc3RhcnRZICogbWF0cml4LndpZHRoICsgc3RhcnRYO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgdGFyZ2V0IHZhbHVlIG1hdGNoZXMgdGhlIHJlcGxhY2VtZW50IHZhbHVlXG4gICAgICAgIGlmIChtYXRyaXguZGF0YVtpbmRleF0gPT09IHJlcGxhY2VDb2xvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IHZhbHVlIG1hdGNoZXMgdGhlIHRhcmdldCB2YWx1ZVxuICAgICAgICBpZiAobWF0cml4LmRhdGFbaW5kZXhdICE9PSB0YXJnZXRDb2xvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIGN1cnJlbnQgdmFsdWUgd2l0aCB0aGUgcmVwbGFjZW1lbnQgdmFsdWVcbiAgICAgICAgbWF0cml4LmRhdGFbaW5kZXhdID0gcmVwbGFjZUNvbG9yO1xuICAgICAgICAvLyBSZWN1cnNpdmVseSBmaWxsIGFkamFjZW50IGNlbGxzXG4gICAgICAgIHRoaXMuZmlsbChzdGFydFggKyAxLCBzdGFydFksIHRhcmdldENvbG9yLCByZXBsYWNlQ29sb3IpOyAvLyBSaWdodFxuICAgICAgICB0aGlzLmZpbGwoc3RhcnRYIC0gMSwgc3RhcnRZLCB0YXJnZXRDb2xvciwgcmVwbGFjZUNvbG9yKTsgLy8gTGVmdFxuICAgICAgICB0aGlzLmZpbGwoc3RhcnRYLCBzdGFydFkgKyAxLCB0YXJnZXRDb2xvciwgcmVwbGFjZUNvbG9yKTsgLy8gRG93blxuICAgICAgICB0aGlzLmZpbGwoc3RhcnRYLCBzdGFydFkgLSAxLCB0YXJnZXRDb2xvciwgcmVwbGFjZUNvbG9yKTsgLy8gVXBcbiAgICB9XG4gICAgc2V0Wm9vbSh6b29tKSB7XG4gICAgICAgIHRoaXMuem9vbSA9IHpvb207XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLndpZHRoID0gYCR7dGhpcy5maWxlLndpZHRoICogdGhpcy56b29tfXB4YDtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5maWxlLmhlaWdodCAqIHRoaXMuem9vbX1weGA7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIHpvb21DaGFuZ2UoZHQgPSAwKSB7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gTWF0aC5zaWduKGR0KTtcbiAgICAgICAgdGhpcy56b29tICs9IGRlbHRhICogODtcbiAgICAgICAgdGhpcy5zZXRab29tKHRoaXMuem9vbSk7XG4gICAgfVxuICAgIHpvb21JbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ6b29tIGluXCIpO1xuICAgICAgICBpZiAodGhpcy56b29tIDwgMTI4KSB7XG4gICAgICAgICAgICB0aGlzLnpvb21DaGFuZ2UoMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgem9vbU91dCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ6b29tIG91dFwiKTtcbiAgICAgICAgaWYgKHRoaXMuem9vbSA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMuem9vbUNoYW5nZSgtMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgem9vbVJlc2V0KCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInpvb20gcmVzZXRcIik7XG4gICAgICAgIHRoaXMuc2V0Wm9vbSgyNSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlLmJpbmQodGhpcykpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERpYWxvZ0VsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lciwgb3BlbiA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IGBcbiAgICA8c3R5bGU+XG4gICAgICAuZGlhbG9nIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmctY29sb3IpO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLW1pZC1jb2xvcik7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1mZy1jb2xvcik7XG4gICAgICAgIG1pbi13aWR0aDogMzIwcHg7XG4gICAgICAgIHdpZHRoOiA1MDBweDtcbiAgICAgIH1cbiAgICA8L3N0eWxlPlxuXG4gICAgPGRpdiBjbGFzcz1cImQtZmxleFwiIGlkPVwiRGlhbG9nSGVhZGVyJHt0aGlzLm5hbWV9XCI+XG4gICAgICA8ZGl2IGlkPVwiRGlhbG9nVGl0bGUke3RoaXMubmFtZX1cIj5EaWFsb2c8L2Rpdj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLS1pY29uXCIgaWQ9XCJCdG5DbG9zZURpYWxvZyR7dGhpcy5uYW1lfVwiPlxuICAgICAgICBYXG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiRGlhbG9nQm9keSBEaWFsb2dCb2R5JHt0aGlzLm5hbWV9XCIgaWQ9XCJEaWFsb2dCb2R5JHt0aGlzLm5hbWV9XCI+PC9kaXY+XG4gIGA7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaWFsb2dcIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSBgZGlhbG9nIERpYWxvZyR7dGhpcy5uYW1lfWA7XG4gICAgICAgIHRoaXMuZWxlbWVudC5vcGVuID0gb3BlbjtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSk7XG4gICAgICAgIHRoaXMuaGVhZGVyID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCNEaWFsb2dIZWFkZXIke25hbWV9YCk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pZCA9IGBEaWFsb2cke25hbWV9YDtcbiAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IHRoaXMuX3RlbXBsYXRlO1xuICAgICAgICB0aGlzLmNsb3NlQnRuID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCNCdG5DbG9zZURpYWxvZyR7bmFtZX1gKTtcbiAgICAgICAgdGhpcy5jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZHJhZyhlKSB7XG4gICAgICAgIGxldCBwb3MxID0gMCwgcG9zMiA9IDAsIHBvczMgPSAwLCBwb3M0ID0gMDtcbiAgICAgICAgcG9zMyA9IGUuY2xpZW50WDtcbiAgICAgICAgcG9zNCA9IGUuY2xpZW50WTtcbiAgICAgICAgY29uc3QgZWxlbWVudERyYWcgPSAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgcG9zMSA9IHBvczMgLSBlLmNsaWVudFg7XG4gICAgICAgICAgICBwb3MyID0gcG9zNCAtIGUuY2xpZW50WTtcbiAgICAgICAgICAgIHBvczMgPSBlLmNsaWVudFg7XG4gICAgICAgICAgICBwb3M0ID0gZS5jbGllbnRZO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9IHRoaXMuZWxlbWVudC5vZmZzZXRUb3AgLSBwb3MyICsgXCJweFwiO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0TGVmdCAtIHBvczEgKyBcInB4XCI7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNsb3NlRHJhZ0VsZW1lbnQgPSAoKSA9PiB7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBjbG9zZURyYWdFbGVtZW50KTtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZWxlbWVudERyYWcpO1xuICAgICAgICB9O1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBjbG9zZURyYWdFbGVtZW50KTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBlbGVtZW50RHJhZyk7XG4gICAgfVxuICAgIG1vdmUoeCwgeSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubGVmdCA9IGAke3h9cHhgO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gYCR7eX1weGA7XG4gICAgfVxuICAgIHRvZ2dsZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJvcGVuXCIpKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwib3BlblwiLCBcIlwiKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJvcGVuXCIpO1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzdGFydHVwXCIsIFwiZmFsc2VcIik7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5wdXRDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgYXBwKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuY29tbWFuZHMgPSB7XG4gICAgICAgICAgICBuOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAubmV3RmlsZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5sOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAubmV3TGF5ZXIoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkubGF5ZXJzRGlhbG9nLnRvZ2dsZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGU6ICgpID0+IHsgfSxcbiAgICAgICAgICAgIHc6ICh0eXBlLCBzY2FsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnNhdmVGaWxlKHR5cGUsIHsgc2NhbGU6IHBhcnNlSW50KHNjYWxlKSB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkuaGVscERpYWxvZy50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC51aS5sb2coXCJIZWxwXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHA6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC51aS5wYWxldHRlRGlhbG9nLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnVpLmxvZyhcIk9wZW4gcGFsZXR0ZVwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBQOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICBsb2c6IChtc2cpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC51aS5sb2cobXNnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke3NlbGVjdG9yfWApO1xuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlKHRoaXMuZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvcGVuXCIpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gXCI6XCI7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5cIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9IFwiXCI7XG4gICAgfVxuICAgIGV4ZWN1dGUoY21kKSB7XG4gICAgICAgIGNtZCA9IGNtZC5zbGljZSgxKTtcbiAgICAgICAgY29uc3QgW2NvbW1hbmQsIC4uLmFyZ3NdID0gY21kLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgY29uc29sZS5sb2coY29tbWFuZCwgYXJncyk7XG4gICAgICAgIGlmIChjb21tYW5kIGluIHRoaXMuY29tbWFuZHMpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZHNbY29tbWFuZF0oLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFwcC51aS5sb2coYGNvbW1hbmQgbm90IGZvdW5kOiAke2NvbW1hbmR9YCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgRGlhbG9nRWxlbWVudCBmcm9tIFwiLi91aS9kaWFsb2dcIjtcbmltcG9ydCBJbnB1dENvbW1hbmQgZnJvbSBcIi4vaW5wdXQtY29tbWFuZFwiO1xuY2xhc3MgVGFiIHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuaWQgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMudGFiVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmlkID0gdGhpcy5pZDtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YWJcIik7XG4gICAgICAgIHRoaXMuY2xvc2VCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICB0aGlzLmNsb3NlQnRuLmlkID0gYCNidG5DbG9zZSR7dGhpcy5pZH1gO1xuICAgICAgICB0aGlzLmNsb3NlQnRuLnRleHRDb250ZW50ID0gXCJYXCI7XG4gICAgICAgIHRoaXMudGFiVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZCh0aGlzLnRhYlRpdGxlLCB0aGlzLmNsb3NlQnRuKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YWJzXCIpLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHRoaXMuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlYWN0aXZhdGVUYWIoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIH1cbiAgICBhY3RpdmF0ZVRhYigpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgfVxuICAgIHJlbmFtZSh0aXRsZSkge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMudGFiVGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJvcGVuXCIpO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVJIHtcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xuICAgICAgICB0aGlzLnN0YXJ0dXBEaWFsb2cgPSBuZXcgRGlhbG9nRWxlbWVudChcIlN0YXJ0dXBcIiwgdGhpcy5fY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5oZWxwRGlhbG9nID0gbmV3IERpYWxvZ0VsZW1lbnQoXCJIZWxwXCIsIHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuaW5wdXRDb21tYW5kID0gbmV3IElucHV0Q29tbWFuZChcIklucHV0Q21kXCIsIHRoaXMuYXBwKTtcbiAgICAgICAgdGhpcy56b29tRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjem9vbVwiKTtcbiAgICAgICAgdGhpcy5wcmltYXJ5Q29sb3JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0b29sUHJDb2xvclwiKTtcbiAgICAgICAgdGhpcy5zdGF0dXNMaW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzdGF0dXNMaW5lXCIpO1xuICAgICAgICB0aGlzLmxheWVyc0RpYWxvZyA9IG5ldyBEaWFsb2dFbGVtZW50KFwiTGF5ZXJzXCIsIHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgIHRoaXMubGF5ZXJzV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGF5ZXJzV3JhcFwiKTtcbiAgICAgICAgdGhpcy5wYWxldHRlRGlhbG9nID0gbmV3IERpYWxvZ0VsZW1lbnQoXCJQYWxldHRlXCIsIHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgIHRoaXMucGFsZXR0ZVdyYXAgPSB0aGlzLnBhbGV0dGVEaWFsb2cuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI0RpYWxvZ0JvZHlQYWxldHRlXCIpO1xuICAgICAgICB0aGlzLnBhbGV0dGVUaXRsZSA9IHRoaXMucGFsZXR0ZURpYWxvZy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjRGlhbG9nVGl0bGVQYWxldHRlXCIpO1xuICAgICAgICB0aGlzLnRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RhYnNcIik7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICBpZiAoIXdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInN0YXJ0dXBcIikgfHxcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInN0YXJ0dXBcIikgPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0dXBEaWFsb2cub3BlbigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFicy5hcHBlbmQobmV3IFRhYihcIlVudGl0bGVkXCIpLmVsZW1lbnQpO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgICByZW5kZXJQYWxldHRlKCkge1xuICAgICAgICB0aGlzLnBhbGV0dGVXcmFwLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB3cmFwLmNsYXNzTmFtZSA9IFwicGFsZXR0ZS13cmFwXCI7XG4gICAgICAgIHRoaXMucGFsZXR0ZVRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5hcHAucGFsZXR0ZS5uYW1lO1xuICAgICAgICB0aGlzLmFwcC5wYWxldHRlLmNvbG9ycy5mb3JFYWNoKChjb2xvciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJjb2xvci1zd2F0Y2hcIik7XG4gICAgICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBgcmdiYSgke2NvbG9yWzBdfSwgJHtjb2xvclsxXX0sICR7Y29sb3JbMl19LCAke2NvbG9yWzNdfSlgO1xuICAgICAgICAgICAgd3JhcC5hcHBlbmQoZWwpO1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5wcmltYXJ5Q29sb3IgPSBjb2xvcjtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBhbGV0dGVXcmFwLmFwcGVuZCh3cmFwKTtcbiAgICB9XG4gICAgcmVuZGVyTGF5ZXJzKCkge1xuICAgICAgICB0aGlzLmxheWVyc1dyYXAuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgdGhpcy5hcHAuY3VycmVudEZpbGU/LmRhdGEuZm9yRWFjaCgobGF5ZXIsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKFwibGF5ZXJcIik7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IHRoaXMuYXBwLmxheWVySW5kZXgpIHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWwudGV4dENvbnRlbnQgPSBsYXllci5uYW1lO1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5sYXllckluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5sYXllcnNXcmFwLmFwcGVuZChlbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsb2cobXNnKSB7XG4gICAgICAgIHRoaXMudG8gJiYgY2xlYXJUaW1lb3V0KHRoaXMudG8pO1xuICAgICAgICB0aGlzLnN0YXR1c0xpbmUuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG4gICAgICAgIHRoaXMuc3RhdHVzTGluZS50ZXh0Q29udGVudCA9IG1zZztcbiAgICAgICAgdGhpcy50byA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNMaW5lLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNMaW5lLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgfSwgMjAwMCk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQYWxldHRlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyTGF5ZXJzKCk7XG4gICAgICAgIHRoaXMuem9vbUVsZW1lbnQudGV4dENvbnRlbnQgPSBgJHt0aGlzLmFwcC56b29tICogMTAwfSVgO1xuICAgICAgICB0aGlzLnByaW1hcnlDb2xvckVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYHJnYmEoJHt0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMF19LCAke3RoaXMuYXBwLnByaW1hcnlDb2xvclsxXX0sICR7dGhpcy5hcHAucHJpbWFyeUNvbG9yWzJdfSwgJHt0aGlzLmFwcC5wcmltYXJ5Q29sb3JbM119KWA7XG4gICAgfVxufVxuIiwiaW1wb3J0IEFwcCBmcm9tIFwiLi9hcHBcIjtcbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcbi8vQHRzLWlnbm9yZVxud2luZG93LmFwcCA9IGFwcDtcbiIsImltcG9ydCB7IFdpekZpbGUgfSBmcm9tIFwiLi9maWxlXCI7XG5pbXBvcnQgSGlzdG9yeSBmcm9tIFwiLi9oaXN0b3J5XCI7XG5pbXBvcnQgTGF5ZXIgZnJvbSBcIi4vbGF5ZXJcIjtcbmltcG9ydCB7IGRlZmF1bHRQYWxldHRlIH0gZnJvbSBcIi4vcGFsZXR0ZVwiO1xuaW1wb3J0IFJlbmRlcmVyIGZyb20gXCIuL3JlbmRlcmVyXCI7XG5pbXBvcnQgVUkgZnJvbSBcIi4vdWlcIjtcbmNvbnN0IERFRkFVTFRfV0lEVEggPSAxNjtcbmNvbnN0IERFRkFVTFRfSEVJR0hUID0gMTY7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcHAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeSh0aGlzKTtcbiAgICAgICAgdGhpcy56b29tID0gMjU7XG4gICAgICAgIHRoaXMudG9vbCA9IFwicGVuY2lsXCI7XG4gICAgICAgIHRoaXMuY29sb3IgPSAxO1xuICAgICAgICB0aGlzLmZpbGVzID0gW107XG4gICAgICAgIHRoaXMuZmlsZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5wYWxldHRlID0gZGVmYXVsdFBhbGV0dGU7XG4gICAgICAgIHRoaXMucHJpbWFyeUNvbG9yID0gdGhpcy5wYWxldHRlLmdldENvbG9yKDApO1xuICAgICAgICB0aGlzLnBhbGV0dGVzID0gW3RoaXMucGFsZXR0ZV07XG4gICAgICAgIHRoaXMudWkgPSBuZXcgVUkodGhpcyk7XG4gICAgICAgIHRoaXMubGF5ZXJJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuZmlsZXMucHVzaChuZXcgV2l6RmlsZShERUZBVUxUX1dJRFRILCBERUZBVUxUX0hFSUdIVCkpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKHRoaXMpO1xuICAgICAgICB0aGlzLnNldHVwKCk7XG4gICAgfVxuICAgIGdldCBjdXJyZW50RmlsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsZXNbdGhpcy5maWxlSW5kZXhdO1xuICAgIH1cbiAgICBzZXR1cCgpIHtcbiAgICAgICAgLy8gYWJpbGl0eSB0byB1bmRvIGNoYW5nZXMgd2l0aCBjbWQgKyB6XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5tZXRhS2V5ICYmIGUua2V5ID09PSBcIj1cIikge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnpvb21JbigpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLm1ldGFLZXkgJiYgZS5rZXkgPT09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuem9vbU91dCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLm1ldGFLZXkgJiYgZS5rZXkgPT09IFwiMFwiKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuem9vbVJlc2V0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUubWV0YUtleSAmJiBlLmtleSA9PT0gXCJ6XCIpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy51bmRvKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIGhvbGQgc3BhY2UgYW5kIG1vdmUgbW91c2UsIG1vdmUgY2FudmFzXG4gICAgICAgICAgICAgICAgY2FzZSBcIlNwYWNlXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy51aS5pbnB1dENvbW1hbmQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJvcGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSBcImdyYWJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5idXR0b25zID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuY2FudmFzLnN0eWxlLmN1cnNvciA9IFwiZ3JhYmJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5jYW52YXMuc3R5bGUubGVmdCA9IGAke2UubW92ZW1lbnRYfXB4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5jYW52YXMuc3R5bGUudG9wID0gYCR7ZS5tb3ZlbWVudFl9cHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCI/XCI6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51aS5oZWxwRGlhbG9nLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiRXNjYXBlXCI6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudWkuaW5wdXRDb21tYW5kLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3BlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51aS5pbnB1dENvbW1hbmQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudWkuaW5wdXRDb21tYW5kLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIiBcIjpcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlKCk7XG4gICAgICAgIHRoaXMudWkudXBkYXRlKCk7XG4gICAgfVxuICAgIG5ld0ZpbGUoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibmV3XCIpO1xuICAgIH1cbiAgICBuZXdMYXllcigpIHtcbiAgICAgICAgY29uc3QgbGF5ZXIgPSBuZXcgTGF5ZXIoXCJMYXllciBcIiArICh0aGlzLmN1cnJlbnRGaWxlLmRhdGEubGVuZ3RoICsgMSksIGZhbHNlLCB0aGlzLmN1cnJlbnRGaWxlLndpZHRoLCB0aGlzLmN1cnJlbnRGaWxlLmhlaWdodCk7XG4gICAgICAgIHRoaXMuY3VycmVudEZpbGUuZGF0YS5wdXNoKGxheWVyKTtcbiAgICAgICAgdGhpcy5sYXllckluZGV4ID0gdGhpcy5jdXJyZW50RmlsZS5kYXRhLmxlbmd0aCAtIDE7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIHNhdmVGaWxlKHR5cGUsIG9wdGlvbnMgPSB7IHNjYWxlOiAxIH0pIHtcbiAgICAgICAgaWYgKHR5cGUgPT09IFwicG5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFVcmwgPSB0aGlzLnJlbmRlcmVyLmNhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XG4gICAgICAgICAgICBjb25zdCBjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IGMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBpbWcuc3JjID0gZGF0YVVybDtcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYy53aWR0aCA9IGltZy53aWR0aCAqIG9wdGlvbnMuc2NhbGU7XG4gICAgICAgICAgICAgICAgYy5oZWlnaHQgPSBpbWcuaGVpZ2h0ICogb3B0aW9ucy5zY2FsZTtcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgYy53aWR0aCwgYy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICAgICAgICBhLmhyZWYgPSBjLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcbiAgICAgICAgICAgICAgICBhLmRvd25sb2FkID0gXCJpbWFnZS5wbmdcIjtcbiAgICAgICAgICAgICAgICBhLmNsaWNrKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy51aS5sb2coYHNhdmUgZmlsZSBhcyAke3R5cGV9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51aS5sb2coYGZpbGV0eXBlICR7dHlwZX0gaXMgbm90IHN1cHBvcnRlZGApO1xuICAgIH1cbiAgICB1bmRvKCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkudW5kbygpO1xuICAgIH1cbiAgICByZWRvKCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkucmVkbygpO1xuICAgIH1cbiAgICBjaGFuZ2VUb29sKHRvb2wpIHtcbiAgICAgICAgdGhpcy50b29sID0gdG9vbDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiTGF5ZXIiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJsb2NrZWQiLCJ3aWR0aCIsImhlaWdodCIsInRoaXMiLCJvcGFjaXR5IiwidmlzaWJsZSIsImRhdGEiLCJJbWFnZURhdGEiLCJkZWZhdWx0UGFsZXR0ZSIsImNvbG9ycyIsImFkZENvbG9yIiwiY29sb3IiLCJwdXNoIiwicmVtb3ZlQ29sb3IiLCJpbmRleCIsInNwbGljZSIsInNldENvbG9yIiwiZ2V0Q29sb3IiLCJXaXpGaWxlIiwicGFsZXR0ZSIsIkhpc3RvcnkiLCJhcHAiLCJpdGVtcyIsImN1cnNvciIsImxlbmd0aCIsImFkZCIsIml0ZW0iLCJjbGVhckZyb21DdXJzb3IiLCJ1bmRvIiwicmVkbyIsIlJlbmRlcmVyIiwiem9vbSIsImZpbGUiLCJjdXJyZW50RmlsZSIsImdyaWQiLCJncmlkU2l6ZSIsIl9jYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJfY3R4IiwiY2FudmFzIiwiZ2V0Q29udGV4dCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiZmlsZXMiLCJmaWxlSW5kZXgiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kU2l6ZSIsImltYWdlUmVuZGVyaW5nIiwic2V0Wm9vbSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJ6b29tQ2hhbmdlIiwiZGVsdGFZIiwiYm9keSIsInF1ZXJ5U2VsZWN0b3IiLCJhcHBlbmQiLCJpbWFnZURhdGEiLCJjdHgiLCJjcmVhdGVJbWFnZURhdGEiLCJoaXN0b3J5IiwiZ2V0SW1hZ2VEYXRhIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIngiLCJNYXRoIiwiZmxvb3IiLCJjbGllbnRYIiwibGVmdCIsImNsaWVudFkiLCJ0b3AiLCJwcmltYXJ5Q29sb3IiLCJwdXRJbWFnZURhdGEiLCJidXR0b25zIiwiZHJhd1JlY3QiLCJ5IiwidyIsImgiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImZpbGwiLCJzdGFydFgiLCJzdGFydFkiLCJ0YXJnZXRDb2xvciIsInJlcGxhY2VDb2xvciIsIm1hdHJpeCIsImxheWVySW5kZXgiLCJ1cGRhdGUiLCJkdCIsImRlbHRhIiwic2lnbiIsInpvb21JbiIsImNvbnNvbGUiLCJsb2ciLCJ6b29tT3V0Iiwiem9vbVJlc2V0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYmluZCIsIkRpYWxvZ0VsZW1lbnQiLCJjb250YWluZXIiLCJvcGVuIiwiX3RlbXBsYXRlIiwiZWxlbWVudCIsImNsYXNzTmFtZSIsImhlYWRlciIsImlkIiwiaW5uZXJIVE1MIiwiY2xvc2VCdG4iLCJjbG9zZSIsImRyYWciLCJwb3MxIiwicG9zMiIsInBvczMiLCJwb3M0IiwiZWxlbWVudERyYWciLCJvZmZzZXRUb3AiLCJvZmZzZXRMZWZ0IiwiY2xvc2VEcmFnRWxlbWVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJtb3ZlIiwidG9nZ2xlIiwiaGFzQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIklucHV0Q29tbWFuZCIsInNlbGVjdG9yIiwiY29tbWFuZHMiLCJuIiwibmV3RmlsZSIsIm5sIiwibmV3TGF5ZXIiLCJsIiwidWkiLCJsYXllcnNEaWFsb2ciLCJ0eXBlIiwic2NhbGUiLCJzYXZlRmlsZSIsInBhcnNlSW50IiwiaGVscERpYWxvZyIsInAiLCJwYWxldHRlRGlhbG9nIiwiUCIsIm1zZyIsImtleSIsImV4ZWN1dGUiLCJ2YWx1ZSIsImNsYXNzTGlzdCIsImZvY3VzIiwicmVtb3ZlIiwiY21kIiwic2xpY2UiLCJjb21tYW5kIiwiYXJncyIsInNwbGl0IiwiVGFiIiwidGl0bGUiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJ0YWJUaXRsZSIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJkZWFjdGl2YXRlVGFiIiwiYWN0aXZhdGVUYWIiLCJyZW5hbWUiLCJVSSIsIl9jb250YWluZXIiLCJzdGFydHVwRGlhbG9nIiwiaW5wdXRDb21tYW5kIiwiem9vbUVsZW1lbnQiLCJwcmltYXJ5Q29sb3JFbGVtZW50Iiwic3RhdHVzTGluZSIsImxheWVyc1dyYXAiLCJwYWxldHRlV3JhcCIsInBhbGV0dGVUaXRsZSIsInRhYnMiLCJnZXRJdGVtIiwicmVuZGVyUGFsZXR0ZSIsIndyYXAiLCJmb3JFYWNoIiwiZWwiLCJyZW5kZXJMYXllcnMiLCJsYXllciIsInRvIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInRvb2wiLCJwYWxldHRlcyIsInJlbmRlcmVyIiwic2V0dXAiLCJtZXRhS2V5IiwiY29udGFpbnMiLCJtb3ZlbWVudFgiLCJtb3ZlbWVudFkiLCJvcHRpb25zIiwiZGF0YVVybCIsInRvRGF0YVVSTCIsImMiLCJpbWciLCJJbWFnZSIsInNyYyIsIm9ubG9hZCIsImRyYXdJbWFnZSIsImEiLCJocmVmIiwiZG93bmxvYWQiLCJjbGljayIsImNoYW5nZVRvb2wiXSwic291cmNlUm9vdCI6IiJ9