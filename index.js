(()=>{"use strict";class t{constructor(t="New layer",e=!1,i,s){this.name=t,this.locked=e,this.width=i,this.height=s,this.opacity=255,this.visible=!0,this.data=new ImageData(i,s)}}const e=new class{constructor(t="New palette"){this.name=t,this.colors=[[]]}addColor(t){this.colors.push(t)}removeColor(t){this.colors.splice(t,1)}setColor(t,e){this.colors[t]=e}getColor(t){return this.colors[t]}}("Default");e.colors=[[0,0,0,255],[252,252,252,255],[248,248,248,255],[188,188,188,255],[124,124,124,255],[164,228,252,255],[60,188,252,255],[0,120,248,255],[0,0,252,255],[184,184,248,255],[104,136,252,255],[0,88,248,255],[0,0,188,255],[216,184,248,255],[152,120,248,255],[104,68,252,255],[68,40,188,255],[248,184,248,255],[248,120,248,255],[216,0,204,255],[148,0,132,255],[248,164,192,255],[248,88,152,255],[228,0,88,255],[168,0,32,255],[240,208,176,255],[248,120,88,255],[248,56,0,255],[168,16,0,255],[252,224,168,255],[252,160,68,255],[228,92,16,255],[136,20,0,255],[248,216,120,255],[248,184,0,255],[172,124,0,255],[80,40,0,255],[216,248,120,255],[184,248,24,255],[0,184,0,255],[0,120,0,255],[184,248,184,255],[88,216,84,255],[0,168,0,255],[0,104,0,255],[184,248,216,255],[88,248,152,255],[0,168,68,255],[0,88,0,255],[0,252,252,255],[0,232,216,255],[0,136,136,255],[0,64,88,255],[248,216,248,255],[120,120,120,255]];class i{constructor(i,s){this.width=i,this.height=s,this.data=[],this.palette=e,this.data=[new t("Background",!0,i,s)]}setCanvasSize(t,e){this.width=t,this.height=e,this.data.forEach((i=>{const s=i.data;i.data=new ImageData(t,e),i.data.data.set(s.data)}))}}class s{constructor(t){this.data=t,this.timestamp=Date.now()}}class a{constructor(){this.max=5,this.stack=[],this.buffer=null}add(t){this.stack.length>=this.max&&this.stack.shift(),this.stack.push(new s(t))}undo(){return this.stack.length>0?(this.buffer=this.stack.pop(),this.buffer.data):null}redo(){return this.buffer?(this.stack.push(this.buffer),this.buffer=null,this.stack[this.stack.length-1].data):null}clear(){this.stack=[]}}class o{constructor(t){this.commands={n:()=>{this.app.newFile()},nl:()=>{this.app.newLayer()},l:()=>{this.app.ui.layersDialog.toggle()},e:()=>{},w:(t,e)=>{this.app.saveFile(t,{scale:parseInt(e)})},h:()=>{this.app.ui.helpDialog.toggle(),this.app.ui.log("Help")},p:()=>{this.app.ui.paletteDialog.toggle(),this.app.ui.log("Open palette")},P:()=>{},log:t=>{this.app.ui.log(t)},hs:()=>{this.app.ui.startupDialog.toggle()},cs:t=>{this.app.ui.setColorScheme(t)}},this.app=t,this.element=document.createElement("input"),this.element.id="InputCommand",this.element.className="input input--cmd",console.log(this.app.ui),this.app.ui._container.append(this.element),this.element.addEventListener("keydown",(t=>{"Enter"===t.key&&(this.execute(this.element.value),this.close())}))}open(){this.element.classList.add("open"),this.element.focus(),this.element.value=":"}close(){this.element.classList.remove("open"),this.element.value=""}execute(t){t=t.slice(1);const[e,...i]=t.split(" ");console.log(e,i),e in this.commands?this.commands[e](...i):this.app.ui.log(`command not found: ${e}`)}}class n{constructor(t){this.app=t,this.zoom=25,this.file=this.app.currentFile,this.grid=!0,this.gridSize=16,this._canvas=document.createElement("canvas"),this._ctx=this.canvas.getContext("2d"),this.canvas.style.backgroundColor="white",this.canvas.width=this.app.files[this.app.fileIndex].width,this.canvas.height=this.app.files[this.app.fileIndex].height,this.canvas.style.backgroundImage="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'><rect width='16' height='16' fill='none'/><rect x='0' y='0' width='8' height='8' fill='%23f0f0f0'/><rect x='8' y='8' width='8' height='8' fill='%23f0f0f0'/></svg>\")",this.canvas.style.backgroundSize="16px 16px",this.canvas.style.imageRendering="pixelated",this.setZoom(this.zoom),this.canvas.addEventListener("wheel",(t=>{t.preventDefault(),this.zoomChange(t.deltaY)})),document.body.querySelector("#main").append(this.canvas);const e=this.ctx.createImageData(this.file.width,this.file.height);this.canvas.addEventListener("click",(t=>{this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height));const i=this.canvas.getBoundingClientRect(),s=Math.floor((t.clientX-i.left)/this.zoom),a=4*(Math.floor((t.clientY-i.top)/this.zoom)*this.file.width+s);e.data[a]=this.app.primaryColor[0],e.data[a+1]=this.app.primaryColor[1],e.data[a+2]=this.app.primaryColor[2],e.data[a+3]=this.app.primaryColor[3],this.ctx.putImageData(e,0,0),this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height))})),this.canvas.addEventListener("mousemove",(t=>{if(1===t.buttons){this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height));const i=this.canvas.getBoundingClientRect(),s=Math.floor((t.clientX-i.left)/this.zoom),a=4*(Math.floor((t.clientY-i.top)/this.zoom)*this.file.width+s);e.data[a]=this.app.primaryColor[0],e.data[a+1]=this.app.primaryColor[1],e.data[a+2]=this.app.primaryColor[2],e.data[a+3]=this.app.primaryColor[3],this.ctx.putImageData(e,0,0),this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height))}}))}get canvas(){return this._canvas}get ctx(){return this._ctx}drawRect(t,e,i,s,a){this.ctx.fillStyle=a,this.ctx.fillRect(t,e,i,s)}fill(t,e,i,s){const a=this.file.data[this.app.layerIndex].data;if(t<0||t>=a.width||e<0||e>=a.height)return;const o=e*a.width+t;a.data[o]!==s&&a.data[o]===i&&(a.data[o]=s,this.fill(t+1,e,i,s),this.fill(t-1,e,i,s),this.fill(t,e+1,i,s),this.fill(t,e-1,i,s))}setZoom(t){this.zoom=t,this.canvas.style.width=this.file.width*this.zoom+"px",this.canvas.style.height=this.file.height*this.zoom+"px",this.update()}zoomChange(t=0){const e=Math.sign(t);this.zoom+=8*e,this.setZoom(this.zoom)}zoomIn(){console.log("zoom in"),this.zoom<128&&this.zoomChange(1)}zoomOut(){console.log("zoom out"),this.zoom>1&&this.zoomChange(-1)}zoomReset(){console.log("zoom reset"),this.setZoom(25)}update(){requestAnimationFrame(this.update.bind(this))}}class l{constructor(t,e,i="Dialog",s="",a=!1){this.name=t,this.container=e,this.title=i,this.content=s,this._template=`\n    <style>\n      .dialog {\n        background-color: var(--bg-color);\n        border-radius: 0.5rem;\n        border: 1px solid var(--mid-color);\n        color: var(--fg-color);\n        min-width: 320px;\n        width: 500px;\n      }\n    </style>\n\n    <div class="d-flex" id="DialogHeader${this.name}">\n      <div id="DialogTitle${this.name}">${this.title}</div>\n      <button class="btn btn--icon" id="BtnCloseDialog${this.name}">\n        X\n      </button>\n    </div>\n    <div class="DialogBody DialogBody${this.name}" id="DialogBody${this.name}">\n      ${this.content}\n    </div>\n  `,this.element=document.createElement("dialog"),this.element.className=`dialog Dialog${this.name}`,this.element.open=a,this.container.append(this.element),console.log(this.name),this.header=this.element.querySelector(`#DialogHeader${t}`),this.element.id=`Dialog${t}`,this.element.innerHTML=this._template,this.closeBtn=this.element.querySelector(`#BtnCloseDialog${t}`),this.closeBtn.addEventListener("click",(()=>{this.close()}))}drag(t){let e=0,i=0,s=0,a=0;s=t.clientX,a=t.clientY;const o=t=>{t.preventDefault(),e=s-t.clientX,i=a-t.clientY,s=t.clientX,a=t.clientY,this.element.style.top=this.element.offsetTop-i+"px",this.element.style.left=this.element.offsetLeft-e+"px"},n=()=>{document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",o)};document.addEventListener("mouseup",n),document.addEventListener("mousemove",o)}move(t,e){this.element.style.left=`${t}px`,this.element.style.top=`${e}px`}toggle(){this.element.hasAttribute("open")?this.close():this.open()}open(){this.element.setAttribute("open","")}close(){this.element.removeAttribute("open"),window.localStorage.setItem("startup","false")}}class h{constructor(t){this.title=t,this.id=Date.now().toString(),this.element=document.createElement("div"),this.tabTitle=document.createElement("span"),this.element.id=this.id,this.element.classList.add("tab"),this.closeBtn=document.createElement("button"),this.closeBtn.id=`#btnClose${this.id}`,this.closeBtn.textContent="X",this.tabTitle.textContent=t,this.element.append(this.tabTitle,this.closeBtn),document.querySelector("#tabs").appendChild(this.element),this.closeBtn.addEventListener("click",(()=>{this.close()}))}deactivateTab(){this.element.classList.remove("active")}activateTab(){this.element.classList.add("active")}rename(t){this.title=t,this.tabTitle.textContent=t}close(){this.element.removeAttribute("open")}}class r{constructor(t){this.app=t,this._container=document.createElement("div"),this.startupDialog=new l("Startup",this._container,"miniwizard",'\n  <div>\n    <b\n      >2023 Â©\n      <a target="_blank" href="https://famiclone.dev">famiclone.dev</a></b\n    >\n    <hr />\n    <br />\n    <div>\n      <b>Esc</b> - Command mode, <b>:new</b> - New file, <b>:h</b> - Open\n      help\n    </div>\n  </div>\n'),this.helpDialog=new l("Help",this._container,"Help","\n  <div>\n    <ul>\n      <li><b>Escape</b> - Open console</li>\n      <li><b>Cmd+</b> - Zoom in</li>\n      <li><b>Cmd-</b> - Zoom out</li>\n      <li><b>Cmd0</b> - Zoom reset</li>\n      <li><b>:?</b> - Open help</li>\n      <li><b>:p</b> - Open palette</li>\n      <li><b>:l</b> - Layers</li>\n      <li><b>:nl</b> - New layer</li>\n      <li><b>:log message</b> - Log message</li>\n      \x3c!-- <li><b>:b / g / e</b> - Change tool (pencil/ bucket / eraser)</li> --\x3e\n    </ul>\n  </div>\n"),this.zoomElement=document.querySelector("#zoom"),this.primaryColorElement=document.querySelector("#toolPrColor"),this.statusLine=document.querySelector("#statusLine"),this.layersDialog=new l("Layers",this._container,"Layers"),this.layersWrap=this.layersDialog.element.querySelector("#DialogBodyLayers"),this.paletteDialog=new l("Palette",this._container),this.paletteWrap=this.paletteDialog.element.querySelector("#DialogBodyPalette"),this.paletteTitle=this.paletteDialog.element.querySelector("#DialogTitlePalette"),this.tabs=document.querySelector("#tabs"),this.app=t,this.colorScheme=localStorage.getItem("colorscheme")||"dark",document.body.append(this._container),this.setColorScheme(this.colorScheme),window.localStorage.getItem("startup")&&"true"!==window.localStorage.getItem("startup")||this.startupDialog.open(),this.tabs.append(new h("Untitled").element),this.update()}renderPalette(){this.paletteWrap.innerHTML="";const t=document.createElement("div");t.className="palette-wrap",this.paletteTitle.textContent=this.app.palette.name,this.app.palette.colors.forEach(((e,i)=>{const s=document.createElement("div");s.classList.add("color-swatch"),s.style.backgroundColor=`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`,t.append(s),s.addEventListener("click",(()=>{this.app.primaryColor=e,this.update()}))})),this.paletteWrap.append(t)}renderLayers(){this.layersWrap.innerHTML="",this.app.currentFile?.data.forEach(((t,e)=>{const i=document.createElement("div");i.classList.add("layer"),e===this.app.layerIndex&&i.classList.add("active"),i.textContent=t.name,i.addEventListener("click",(()=>{this.app.layerIndex=e,this.update()})),this.layersWrap.append(i)}))}setColorScheme(t){localStorage.getItem("colorscheme")?(document.body.setAttribute("colorscheme",t),localStorage.setItem("colorscheme",t)):(document.body.setAttribute("colorscheme",t),this.colorScheme=t,localStorage.setItem("colorscheme",t))}log(t){this.to&&clearTimeout(this.to),this.statusLine.classList.add("open"),this.statusLine.textContent=t,this.to=setTimeout((()=>{this.statusLine.classList.remove("open"),this.statusLine.textContent=""}),2e3)}update(){this.renderPalette(),this.renderLayers(),this.zoomElement.textContent=100*this.app.zoom+"%",this.primaryColorElement.style.backgroundColor=`rgba(${this.app.primaryColor[0]}, ${this.app.primaryColor[1]}, ${this.app.primaryColor[2]}, ${this.app.primaryColor[3]})`}}const c=new class{constructor(){this.history=new a,this.zoom=25,this.tool="pencil",this.color=1,this.files=[],this.fileIndex=0,this.palette=e,this.primaryColor=this.palette.getColor(0),this.palettes=[this.palette],this.ui=new r(this),this.inputCommand=new o(this),this.layerIndex=0,this.files.push(new i(16,16)),this.renderer=new n(this),this.setup()}get currentFile(){return this.files[this.fileIndex]}setup(){document.addEventListener("keydown",(t=>{if(t.metaKey&&"="===t.key)return t.preventDefault(),void this.renderer.zoomIn();if(t.metaKey&&"-"===t.key)return t.preventDefault(),void this.renderer.zoomOut();if(t.metaKey&&"0"===t.key)return t.preventDefault(),void this.renderer.zoomReset();if(t.metaKey&&"z"===t.key)return t.preventDefault(),void this.undo();switch(t.key){case"Space":this.inputCommand.element.classList.contains("open")||(t.preventDefault(),this.renderer.canvas.style.cursor="grab",this.renderer.canvas.addEventListener("mousemove",(t=>{1===t.buttons&&(this.renderer.canvas.style.cursor="grabbing",this.renderer.canvas.style.left=`${t.movementX}px`,this.renderer.canvas.style.top=`${t.movementY}px`)})));break;case"?":t.preventDefault(),this.ui.helpDialog.toggle();break;case"Escape":t.preventDefault(),this.inputCommand.element.classList.contains("open")?this.inputCommand.close():this.inputCommand.open()}})),document.addEventListener("keyup",(t=>{if(" "===t.key)t.preventDefault(),this.renderer.canvas.style.cursor="default"})),this.update()}update(){this.renderer.update(),this.ui.update()}newFile(){console.log("new")}newLayer(){const e=new t("Layer "+(this.currentFile.data.length+1),!1,this.currentFile.width,this.currentFile.height);this.currentFile.data.push(e),this.layerIndex=this.currentFile.data.length-1,this.update()}saveFile(t,e={scale:1}){if("png"===t){const i=this.renderer.canvas.toDataURL("image/png"),s=document.createElement("canvas"),a=s.getContext("2d"),o=new Image;return o.src=i,o.onload=()=>{s.width=o.width*e.scale,s.height=o.height*e.scale,a.drawImage(o,0,0,s.width,s.height);const t=document.createElement("a");t.href=s.toDataURL("image/png"),t.download="image.png",t.click()},void this.ui.log(`save file as ${t}`)}this.ui.log(`filetype ${t} is not supported`)}undo(){this.history.undo()}redo(){this.history.redo()}changeTool(t){this.tool=t}};window.app=c})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJtYXBwaW5ncyI6Im1CQUFlLE1BQU1BLEVBQ2pCQyxZQUFZQyxFQUFPLFlBQWFDLEdBQVMsRUFBT0MsRUFBT0MsR0FDbkRDLEtBQUtKLEtBQU9BLEVBQ1pJLEtBQUtILE9BQVNBLEVBQ2RHLEtBQUtGLE1BQVFBLEVBQ2JFLEtBQUtELE9BQVNBLEVBQ2RDLEtBQUtDLFFBQVUsSUFDZkQsS0FBS0UsU0FBVSxFQUNmRixLQUFLRyxLQUFPLElBQUlDLFVBQVVOLEVBQU9DLEVBQ3JDLEVDU0csTUFBTU0sRUFBaUIsSUFsQmYsTUFDWFYsWUFBWUMsRUFBTyxlQUNmSSxLQUFLSixLQUFPQSxFQUNaSSxLQUFLTSxPQUFTLENBQUMsR0FDbkIsQ0FDQUMsU0FBU0MsR0FDTFIsS0FBS00sT0FBT0csS0FBS0QsRUFDckIsQ0FDQUUsWUFBWUMsR0FDUlgsS0FBS00sT0FBT00sT0FBT0QsRUFBTyxFQUM5QixDQUNBRSxTQUFTRixFQUFPSCxHQUNaUixLQUFLTSxPQUFPSyxHQUFTSCxDQUN6QixDQUNBTSxTQUFTSCxHQUNMLE9BQU9YLEtBQUtNLE9BQU9LLEVBQ3ZCLEdBRXNDLFdBRTFDTixFQUFlQyxPQUFTLENBQ3BCLENBQUMsRUFBRyxFQUFHLEVBQUcsS0FDVixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxHQUFJLElBQUssSUFBSyxLQUNmLENBQUMsRUFBRyxJQUFLLElBQUssS0FDZCxDQUFDLEVBQUcsRUFBRyxJQUFLLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsRUFBRyxHQUFJLElBQUssS0FDYixDQUFDLEVBQUcsRUFBRyxJQUFLLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxHQUFJLElBQUssS0FDZixDQUFDLEdBQUksR0FBSSxJQUFLLEtBQ2QsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxFQUFHLElBQUssS0FDZCxDQUFDLElBQUssRUFBRyxJQUFLLEtBQ2QsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssR0FBSSxJQUFLLEtBQ2YsQ0FBQyxJQUFLLEVBQUcsR0FBSSxLQUNiLENBQUMsSUFBSyxFQUFHLEdBQUksS0FDYixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLEdBQUksS0FDZixDQUFDLElBQUssR0FBSSxFQUFHLEtBQ2IsQ0FBQyxJQUFLLEdBQUksRUFBRyxLQUNiLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLElBQUssR0FBSSxLQUNmLENBQUMsSUFBSyxHQUFJLEdBQUksS0FDZCxDQUFDLElBQUssR0FBSSxFQUFHLEtBQ2IsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxFQUFHLEtBQ2QsQ0FBQyxJQUFLLElBQUssRUFBRyxLQUNkLENBQUMsR0FBSSxHQUFJLEVBQUcsS0FDWixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLEdBQUksS0FDZixDQUFDLEVBQUcsSUFBSyxFQUFHLEtBQ1osQ0FBQyxFQUFHLElBQUssRUFBRyxLQUNaLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxHQUFJLElBQUssR0FBSSxLQUNkLENBQUMsRUFBRyxJQUFLLEVBQUcsS0FDWixDQUFDLEVBQUcsSUFBSyxFQUFHLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLEdBQUksSUFBSyxJQUFLLEtBQ2YsQ0FBQyxFQUFHLElBQUssR0FBSSxLQUNiLENBQUMsRUFBRyxHQUFJLEVBQUcsS0FDWCxDQUFDLEVBQUcsSUFBSyxJQUFL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QVUsQ0FBRTlKLE1BQU8sSUFDOUIsR0FBYSxRQUFURCxFQUFnQixDQUNoQixNQUFNZ0ssRUFBVWpOLEtBQUt5TSxTQUFTMUcsT0FBT21ILFVBQVUsYUFDekNDLEVBQUlqSixTQUFTQyxjQUFjLFVBQzNCNEMsRUFBTW9HLEVBQUVuSCxXQUFXLE1BQ25Cb0gsRUFBTSxJQUFJQyxNQVloQixPQVhBRCxFQUFJRSxJQUFNTCxFQUNWRyxFQUFJRyxPQUFTLEtBQ1RKLEVBQUVyTixNQUFRc04sRUFBSXROLE1BQVFrTixFQUFROUosTUFDOUJpSyxFQUFFcE4sT0FBU3FOLEVBQUlyTixPQUFTaU4sRUFBUTlKLE1BQ2hDNkQsRUFBSXlHLFVBQVVKLEVBQUssRUFBRyxFQUFHRCxFQUFFck4sTUFBT3FOLEVBQUVwTixRQUNwQyxNQUFNME4sRUFBSXZKLFNBQVNDLGNBQWMsS0FDakNzSixFQUFFQyxLQUFPUCxFQUFFRCxVQUFVLGFBQ3JCTyxFQUFFRSxTQUFXLFlBQ2JGLEVBQUVHLE9BQU8sT0FFYjVOLEtBQUs0QyxHQUFHVyxJQUFJLGdCQUFnQk4sSUFFaEMsQ0FDQWpELEtBQUs0QyxHQUFHVyxJQUFJLFlBQVlOLHFCQUM1QixDQUNBakIsT0FDSWhDLEtBQUtpSCxRQUFRakYsTUFDakIsQ0FDQUUsT0FDSWxDLEtBQUtpSCxRQUFRL0UsTUFDakIsQ0FDQTJMLFdBQVd2QixHQUNQdE0sS0FBS3NNLEtBQU9BLENBQ2hCLEdEbklKN0IsT0FBT3BJLElBQU1BLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90c2JwLy4vc3JjL2xheWVyLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvcGFsZXR0ZS50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL2ZpbGUudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9oaXN0b3J5LnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvaW5wdXQtY29tbWFuZC50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL3JlbmRlcmVyLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvdWkvZGlhbG9nLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvdWkudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL2FwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBMYXllciB7XG4gICAgY29uc3RydWN0b3IobmFtZSA9IFwiTmV3IGxheWVyXCIsIGxvY2tlZCA9IGZhbHNlLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMubG9ja2VkID0gbG9ja2VkO1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLm9wYWNpdHkgPSAyNTU7XG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBJbWFnZURhdGEod2lkdGgsIGhlaWdodCk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFsZXR0ZSB7XG4gICAgY29uc3RydWN0b3IobmFtZSA9IFwiTmV3IHBhbGV0dGVcIikge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmNvbG9ycyA9IFtbXV07XG4gICAgfVxuICAgIGFkZENvbG9yKGNvbG9yKSB7XG4gICAgICAgIHRoaXMuY29sb3JzLnB1c2goY29sb3IpO1xuICAgIH1cbiAgICByZW1vdmVDb2xvcihpbmRleCkge1xuICAgICAgICB0aGlzLmNvbG9ycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICBzZXRDb2xvcihpbmRleCwgY29sb3IpIHtcbiAgICAgICAgdGhpcy5jb2xvcnNbaW5kZXhdID0gY29sb3I7XG4gICAgfVxuICAgIGdldENvbG9yKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yc1tpbmRleF07XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGRlZmF1bHRQYWxldHRlID0gbmV3IFBhbGV0dGUoXCJEZWZhdWx0XCIpO1xuLy8gTkVTIHBhbGV0dGVcbmRlZmF1bHRQYWxldHRlLmNvbG9ycyA9IFtcbiAgICBbMCwgMCwgMCwgMjU1XSxcbiAgICBbMjUyLCAyNTIsIDI1MiwgMjU1XSxcbiAgICBbMjQ4LCAyNDgsIDI0OCwgMjU1XSxcbiAgICBbMTg4LCAxODgsIDE4OCwgMjU1XSxcbiAgICBbMTI0LCAxMjQsIDEyNCwgMjU1XSxcbiAgICBbMTY0LCAyMjgsIDI1MiwgMjU1XSxcbiAgICBbNjAsIDE4OCwgMjUyLCAyNTVdLFxuICAgIFswLCAxMjAsIDI0OCwgMjU1XSxcbiAgICBbMCwgMCwgMjUyLCAyNTVdLFxuICAgIFsxODQsIDE4NCwgMjQ4LCAyNTVdLFxuICAgIFsxMDQsIDEzNiwgMjUyLCAyNTVdLFxuICAgIFswLCA4OCwgMjQ4LCAyNTVdLFxuICAgIFswLCAwLCAxODgsIDI1NV0sXG4gICAgWzIxNiwgMTg0LCAyNDgsIDI1NV0sXG4gICAgWzE1MiwgMTIwLCAyNDgsIDI1NV0sXG4gICAgWzEwNCwgNjgsIDI1MiwgMjU1XSxcbiAgICBbNjgsIDQwLCAxODgsIDI1NV0sXG4gICAgWzI0OCwgMTg0LCAyNDgsIDI1NV0sXG4gICAgWzI0OCwgMTIwLCAyNDgsIDI1NV0sXG4gICAgWzIxNiwgMCwgMjA0LCAyNTVdLFxuICAgIFsxNDgsIDAsIDEzMiwgMjU1XSxcbiAgICBbMjQ4LCAxNjQsIDE5MiwgMjU1XSxcbiAgICBbMjQ4LCA4OCwgMTUyLCAyNTVdLFxuICAgIFsyMjgsIDAsIDg4LCAyNTVdLFxuICAgIFsxNjgsIDAsIDMyLCAyNTVdLFxuICAgIFsyNDAsIDIwOCwgMTc2LCAyNTVdLFxuICAgIFsyNDgsIDEyMCwgODgsIDI1NV0sXG4gICAgWzI0OCwgNTYsIDAsIDI1NV0sXG4gICAgWzE2OCwgMTYsIDAsIDI1NV0sXG4gICAgWzI1MiwgMjI0LCAxNjgsIDI1NV0sXG4gICAgWzI1MiwgMTYwLCA2OCwgMjU1XSxcbiAgICBbMjI4LCA5MiwgMTYsIDI1NV0sXG4gICAgWzEzNiwgMjAsIDAsIDI1NV0sXG4gICAgWzI0OCwgMjE2LCAxMjAsIDI1NV0sXG4gICAgWzI0OCwgMTg0LCAwLCAyNTVdLFxuICAgIFsxNzIsIDEyNCwgMCwgMjU1XSxcbiAgICBbODAsIDQwLCAwLCAyNTVdLFxuICAgIFsyMTYsIDI0OCwgMTIwLCAyNTVdLFxuICAgIFsxODQsIDI0OCwgMjQsIDI1NV0sXG4gICAgWzAsIDE4NCwgMCwgMjU1XSxcbiAgICBbMCwgMTIwLCAwLCAyNTVdLFxuICAgIFsxODQsIDI0OCwgMTg0LCAyNTVdLFxuICAgIFs4OCwgMjE2LCA4NCwgMjU1XSxcbiAgICBbMCwgMTY4LCAwLCAyNTVdLFxuICAgIFswLCAxMDQsIDAsIDI1NV0sXG4gICAgWzE4NCwgMjQ4LCAyMTYsIDI1NV0sXG4gICAgWzg4LCAyNDgsIDE1MiwgMjU1XSxcbiAgICBbMCwgMTY4LCA2OCwgMjU1XSxcbiAgICBbMCwgODgsIDAsIDI1NV0sXG4gICAgWzAsIDI1MiwgMjUyLCAyNTVdLFxuICAgIFswLCAyMzIsIDIxNiwgMjU1XSxcbiAgICBbMCwgMTM2LCAxMzYsIDI1NV0sXG4gICAgWzAsIDY0LCA4OCwgMjU1XSxcbiAgICBbMjQ4LCAyMTYsIDI0OCwgMjU1XSxcbiAgICBbMTIwLCAxMjAsIDEyMCwgMjU1XSxcbl07XG4iLCJpbXBvcnQgTGF5ZXIgZnJvbSBcIi4vbGF5ZXJcIjtcbmltcG9ydCB7IGRlZmF1bHRQYWxldHRlIH0gZnJvbSBcIi4vcGFsZXR0ZVwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2l6RmlsZSB7XG4gICAgY29uc3RydWN0b3Iod2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5wYWxldHRlID0gZGVmYXVsdFBhbGV0dGU7XG4gICAgICAgIHRoaXMuZGF0YSA9IFtuZXcgTGF5ZXIoXCJCYWNrZ3JvdW5kXCIsIHRydWUsIHdpZHRoLCBoZWlnaHQpXTtcbiAgICB9XG4gICAgc2V0Q2FudmFzU2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKChsYXllcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGxheWVyLmRhdGE7XG4gICAgICAgICAgICBsYXllci5kYXRhID0gbmV3IEltYWdlRGF0YSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIGxheWVyLmRhdGEuZGF0YS5zZXQoZGF0YS5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiY2xhc3MgSGlzdG9yeU5vZGUge1xuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhpc3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm1heCA9IDU7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBbXTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsO1xuICAgIH1cbiAgICBhZGQoZGF0YSkge1xuICAgICAgICBpZiAodGhpcy5zdGFjay5sZW5ndGggPj0gdGhpcy5tYXgpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2suc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YWNrLnB1c2gobmV3IEhpc3RvcnlOb2RlKGRhdGEpKTtcbiAgICB9XG4gICAgdW5kbygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLnN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJlZG8oKSB7XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMuYnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YWNrW3RoaXMuc3RhY2subGVuZ3RoIC0gMV0uZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBbXTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBJbnB1dENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICB0aGlzLmNvbW1hbmRzID0ge1xuICAgICAgICAgICAgbjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLm5ld0ZpbGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBubDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLm5ld0xheWVyKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnVpLmxheWVyc0RpYWxvZy50b2dnbGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlOiAoKSA9PiB7IH0sXG4gICAgICAgICAgICB3OiAodHlwZSwgc2NhbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5zYXZlRmlsZSh0eXBlLCB7IHNjYWxlOiBwYXJzZUludChzY2FsZSkgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnVpLmhlbHBEaWFsb2cudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkubG9nKFwiSGVscFwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkucGFsZXR0ZURpYWxvZy50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC51aS5sb2coXCJPcGVuIHBhbGV0dGVcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgUDogKCkgPT4geyB9LFxuICAgICAgICAgICAgbG9nOiAobXNnKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkubG9nKG1zZyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaHM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC51aS5zdGFydHVwRGlhbG9nLnRvZ2dsZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNzOiAodGhlbWUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC51aS5zZXRDb2xvclNjaGVtZSh0aGVtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pZCA9IFwiSW5wdXRDb21tYW5kXCI7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSBcImlucHV0IGlucHV0LS1jbWRcIjtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5hcHAudWkpO1xuICAgICAgICB0aGlzLmFwcC51aS5fY29udGFpbmVyLmFwcGVuZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlKHRoaXMuZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvcGVuXCIpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gXCI6XCI7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5cIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9IFwiXCI7XG4gICAgfVxuICAgIGV4ZWN1dGUoY21kKSB7XG4gICAgICAgIGNtZCA9IGNtZC5zbGljZSgxKTtcbiAgICAgICAgY29uc3QgW2NvbW1hbmQsIC4uLmFyZ3NdID0gY21kLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgY29uc29sZS5sb2coY29tbWFuZCwgYXJncyk7XG4gICAgICAgIGlmIChjb21tYW5kIGluIHRoaXMuY29tbWFuZHMpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWFuZHNbY29tbWFuZF0oLi4uYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFwcC51aS5sb2coYGNvbW1hbmQgbm90IGZvdW5kOiAke2NvbW1hbmR9YCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnpvb20gPSAyNTtcbiAgICAgICAgdGhpcy5maWxlID0gdGhpcy5hcHAuY3VycmVudEZpbGU7XG4gICAgICAgIHRoaXMuZ3JpZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZ3JpZFNpemUgPSAxNjtcbiAgICAgICAgdGhpcy5fY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgdGhpcy5fY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5hcHAuZmlsZXNbdGhpcy5hcHAuZmlsZUluZGV4XS53aWR0aDtcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5hcHAuZmlsZXNbdGhpcy5hcHAuZmlsZUluZGV4XS5oZWlnaHQ7XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCw8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzE2JyBoZWlnaHQ9JzE2JyB2aWV3Qm94PScwIDAgMTYgMTYnPjxyZWN0IHdpZHRoPScxNicgaGVpZ2h0PScxNicgZmlsbD0nbm9uZScvPjxyZWN0IHg9JzAnIHk9JzAnIHdpZHRoPSc4JyBoZWlnaHQ9JzgnIGZpbGw9JyUyM2YwZjBmMCcvPjxyZWN0IHg9JzgnIHk9JzgnIHdpZHRoPSc4JyBoZWlnaHQ9JzgnIGZpbGw9JyUyM2YwZjBmMCcvPjwvc3ZnPlwiKWA7XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmJhY2tncm91bmRTaXplID0gXCIxNnB4IDE2cHhcIjtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuaW1hZ2VSZW5kZXJpbmcgPSBcInBpeGVsYXRlZFwiO1xuICAgICAgICB0aGlzLnNldFpvb20odGhpcy56b29tKTtcbiAgICAgICAgLy8gYWJpbGl0eSB0byB6b29tIGluIGFuZCBvdXQgd2l0aCBtb3VzZSB3aGVlbFxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuem9vbUNoYW5nZShlLmRlbHRhWSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpblwiKS5hcHBlbmQodGhpcy5jYW52YXMpO1xuICAgICAgICBjb25zdCBpbWFnZURhdGEgPSB0aGlzLmN0eC5jcmVhdGVJbWFnZURhdGEodGhpcy5maWxlLndpZHRoLCB0aGlzLmZpbGUuaGVpZ2h0KTtcbiAgICAgICAgLy8gYWJpbGl0eSB0byBkcmF3IHBpeGVsIHdpdGggbW91c2UgY2xpY2tcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcC5oaXN0b3J5LmFkZCh0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5maWxlLndpZHRoLCB0aGlzLmZpbGUuaGVpZ2h0KSk7XG4gICAgICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBjb25zdCB4ID0gTWF0aC5mbG9vcigoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcigoZS5jbGllbnRZIC0gcmVjdC50b3ApIC8gdGhpcy56b29tKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gKHkgKiB0aGlzLmZpbGUud2lkdGggKyB4KSAqIDQ7XG4gICAgICAgICAgICAvL3RoaXMuZmlsZXNbdGhpcy5maWxlSW5kZXhdLmRhdGFbdGhpcy5sYXllckluZGV4XS5kYXRhW3ldW3hdID0gdGhpcy5jb2xvcjtcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4XSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclswXTtcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSB0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMV07XG4gICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzJdO1xuICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAzXSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclszXTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICAgICAgICAgICAgdGhpcy5hcHAuaGlzdG9yeS5hZGQodGhpcy5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuZmlsZS53aWR0aCwgdGhpcy5maWxlLmhlaWdodCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gYWJpbGl0eSB0byBkcmF3IHBpeGVsIHdpdGggbW91c2UgbW92ZVxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5idXR0b25zID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAuaGlzdG9yeS5hZGQodGhpcy5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuZmlsZS53aWR0aCwgdGhpcy5maWxlLmhlaWdodCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB4ID0gTWF0aC5mbG9vcigoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IE1hdGguZmxvb3IoKGUuY2xpZW50WSAtIHJlY3QudG9wKSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSAoeSAqIHRoaXMuZmlsZS53aWR0aCArIHgpICogNDtcbiAgICAgICAgICAgICAgICAvL3RoaXMuZmlsZXNbdGhpcy5maWxlSW5kZXhdLmRhdGFbdGhpcy5sYXllckluZGV4XS5kYXRhW3ldW3hdID1cbiAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbG9yO1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4XSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclswXTtcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDFdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzFdO1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gPSB0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMl07XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAzXSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclszXTtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5oaXN0b3J5LmFkZCh0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5maWxlLndpZHRoLCB0aGlzLmZpbGUuaGVpZ2h0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgY2FudmFzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FudmFzO1xuICAgIH1cbiAgICBnZXQgY3R4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY3R4O1xuICAgIH1cbiAgICBkcmF3UmVjdCh4LCB5LCB3LCBoLCBjb2xvcikge1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoeCwgeSwgdywgaCk7XG4gICAgfVxuICAgIGZpbGwoc3RhcnRYLCBzdGFydFksIHRhcmdldENvbG9yLCByZXBsYWNlQ29sb3IpIHtcbiAgICAgICAgY29uc3QgbWF0cml4ID0gdGhpcy5maWxlLmRhdGFbdGhpcy5hcHAubGF5ZXJJbmRleF0uZGF0YTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHN0YXJ0IGNvb3JkaW5hdGVzIGFyZSBvdXQgb2YgYm91bmRzXG4gICAgICAgIGlmIChzdGFydFggPCAwIHx8XG4gICAgICAgICAgICBzdGFydFggPj0gbWF0cml4LndpZHRoIHx8XG4gICAgICAgICAgICBzdGFydFkgPCAwIHx8XG4gICAgICAgICAgICBzdGFydFkgPj0gbWF0cml4LmhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gc3RhcnRZICogbWF0cml4LndpZHRoICsgc3RhcnRYO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgdGFyZ2V0IHZhbHVlIG1hdGNoZXMgdGhlIHJlcGxhY2VtZW50IHZhbHVlXG4gICAgICAgIGlmIChtYXRyaXguZGF0YVtpbmRleF0gPT09IHJlcGxhY2VDb2xvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IHZhbHVlIG1hdGNoZXMgdGhlIHRhcmdldCB2YWx1ZVxuICAgICAgICBpZiAobWF0cml4LmRhdGFbaW5kZXhdICE9PSB0YXJnZXRDb2xvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIGN1cnJlbnQgdmFsdWUgd2l0aCB0aGUgcmVwbGFjZW1lbnQgdmFsdWVcbiAgICAgICAgbWF0cml4LmRhdGFbaW5kZXhdID0gcmVwbGFjZUNvbG9yO1xuICAgICAgICAvLyBSZWN1cnNpdmVseSBmaWxsIGFkamFjZW50IGNlbGxzXG4gICAgICAgIHRoaXMuZmlsbChzdGFydFggKyAxLCBzdGFydFksIHRhcmdldENvbG9yLCByZXBsYWNlQ29sb3IpOyAvLyBSaWdodFxuICAgICAgICB0aGlzLmZpbGwoc3RhcnRYIC0gMSwgc3RhcnRZLCB0YXJnZXRDb2xvciwgcmVwbGFjZUNvbG9yKTsgLy8gTGVmdFxuICAgICAgICB0aGlzLmZpbGwoc3RhcnRYLCBzdGFydFkgKyAxLCB0YXJnZXRDb2xvciwgcmVwbGFjZUNvbG9yKTsgLy8gRG93blxuICAgICAgICB0aGlzLmZpbGwoc3RhcnRYLCBzdGFydFkgLSAxLCB0YXJnZXRDb2xvciwgcmVwbGFjZUNvbG9yKTsgLy8gVXBcbiAgICB9XG4gICAgc2V0Wm9vbSh6b29tKSB7XG4gICAgICAgIHRoaXMuem9vbSA9IHpvb207XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLndpZHRoID0gYCR7dGhpcy5maWxlLndpZHRoICogdGhpcy56b29tfXB4YDtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5maWxlLmhlaWdodCAqIHRoaXMuem9vbX1weGA7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIHpvb21DaGFuZ2UoZHQgPSAwKSB7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gTWF0aC5zaWduKGR0KTtcbiAgICAgICAgdGhpcy56b29tICs9IGRlbHRhICogODtcbiAgICAgICAgdGhpcy5zZXRab29tKHRoaXMuem9vbSk7XG4gICAgfVxuICAgIHpvb21JbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ6b29tIGluXCIpO1xuICAgICAgICBpZiAodGhpcy56b29tIDwgMTI4KSB7XG4gICAgICAgICAgICB0aGlzLnpvb21DaGFuZ2UoMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgem9vbU91dCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ6b29tIG91dFwiKTtcbiAgICAgICAgaWYgKHRoaXMuem9vbSA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMuem9vbUNoYW5nZSgtMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgem9vbVJlc2V0KCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInpvb20gcmVzZXRcIik7XG4gICAgICAgIHRoaXMuc2V0Wm9vbSgyNSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlLmJpbmQodGhpcykpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERpYWxvZ0VsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lciwgdGl0bGUgPSBcIkRpYWxvZ1wiLCBjb250ZW50ID0gXCJcIiwgb3BlbiA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHRoaXMuX3RlbXBsYXRlID0gYFxuICAgIDxzdHlsZT5cbiAgICAgIC5kaWFsb2cge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbWlkLWNvbG9yKTtcbiAgICAgICAgY29sb3I6IHZhcigtLWZnLWNvbG9yKTtcbiAgICAgICAgbWluLXdpZHRoOiAzMjBweDtcbiAgICAgICAgd2lkdGg6IDUwMHB4O1xuICAgICAgfVxuICAgIDwvc3R5bGU+XG5cbiAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4XCIgaWQ9XCJEaWFsb2dIZWFkZXIke3RoaXMubmFtZX1cIj5cbiAgICAgIDxkaXYgaWQ9XCJEaWFsb2dUaXRsZSR7dGhpcy5uYW1lfVwiPiR7dGhpcy50aXRsZX08L2Rpdj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLS1pY29uXCIgaWQ9XCJCdG5DbG9zZURpYWxvZyR7dGhpcy5uYW1lfVwiPlxuICAgICAgICBYXG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiRGlhbG9nQm9keSBEaWFsb2dCb2R5JHt0aGlzLm5hbWV9XCIgaWQ9XCJEaWFsb2dCb2R5JHt0aGlzLm5hbWV9XCI+XG4gICAgICAke3RoaXMuY29udGVudH1cbiAgICA8L2Rpdj5cbiAgYDtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpYWxvZ1wiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IGBkaWFsb2cgRGlhbG9nJHt0aGlzLm5hbWV9YDtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9wZW4gPSBvcGVuO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lKTtcbiAgICAgICAgdGhpcy5oZWFkZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihgI0RpYWxvZ0hlYWRlciR7bmFtZX1gKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmlkID0gYERpYWxvZyR7bmFtZX1gO1xuICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5fdGVtcGxhdGU7XG4gICAgICAgIHRoaXMuY2xvc2VCdG4gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihgI0J0bkNsb3NlRGlhbG9nJHtuYW1lfWApO1xuICAgICAgICB0aGlzLmNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkcmFnKGUpIHtcbiAgICAgICAgbGV0IHBvczEgPSAwLCBwb3MyID0gMCwgcG9zMyA9IDAsIHBvczQgPSAwO1xuICAgICAgICBwb3MzID0gZS5jbGllbnRYO1xuICAgICAgICBwb3M0ID0gZS5jbGllbnRZO1xuICAgICAgICBjb25zdCBlbGVtZW50RHJhZyA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBwb3MxID0gcG9zMyAtIGUuY2xpZW50WDtcbiAgICAgICAgICAgIHBvczIgPSBwb3M0IC0gZS5jbGllbnRZO1xuICAgICAgICAgICAgcG9zMyA9IGUuY2xpZW50WDtcbiAgICAgICAgICAgIHBvczQgPSBlLmNsaWVudFk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gdGhpcy5lbGVtZW50Lm9mZnNldFRvcCAtIHBvczIgKyBcInB4XCI7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubGVmdCA9IHRoaXMuZWxlbWVudC5vZmZzZXRMZWZ0IC0gcG9zMSArIFwicHhcIjtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY2xvc2VEcmFnRWxlbWVudCA9ICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGNsb3NlRHJhZ0VsZW1lbnQpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBlbGVtZW50RHJhZyk7XG4gICAgICAgIH07XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGNsb3NlRHJhZ0VsZW1lbnQpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGVsZW1lbnREcmFnKTtcbiAgICB9XG4gICAgbW92ZSh4LCB5KSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7eH1weGA7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSBgJHt5fXB4YDtcbiAgICB9XG4gICAgdG9nZ2xlKCkge1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZShcIm9wZW5cIikpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJvcGVuXCIsIFwiXCIpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcIm9wZW5cIik7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInN0YXJ0dXBcIiwgXCJmYWxzZVwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgRGlhbG9nRWxlbWVudCBmcm9tIFwiLi91aS9kaWFsb2dcIjtcbmNvbnN0IHN0YXJ0dXBDb250ZW50ID0gYFxuICA8ZGl2PlxuICAgIDxiXG4gICAgICA+MjAyMyDCqVxuICAgICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHBzOi8vZmFtaWNsb25lLmRldlwiPmZhbWljbG9uZS5kZXY8L2E+PC9iXG4gICAgPlxuICAgIDxociAvPlxuICAgIDxiciAvPlxuICAgIDxkaXY+XG4gICAgICA8Yj5Fc2M8L2I+IC0gQ29tbWFuZCBtb2RlLCA8Yj46bmV3PC9iPiAtIE5ldyBmaWxlLCA8Yj46aDwvYj4gLSBPcGVuXG4gICAgICBoZWxwXG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuYDtcbmNvbnN0IGhlbHBDb250ZW50ID0gYFxuICA8ZGl2PlxuICAgIDx1bD5cbiAgICAgIDxsaT48Yj5Fc2NhcGU8L2I+IC0gT3BlbiBjb25zb2xlPC9saT5cbiAgICAgIDxsaT48Yj5DbWQrPC9iPiAtIFpvb20gaW48L2xpPlxuICAgICAgPGxpPjxiPkNtZC08L2I+IC0gWm9vbSBvdXQ8L2xpPlxuICAgICAgPGxpPjxiPkNtZDA8L2I+IC0gWm9vbSByZXNldDwvbGk+XG4gICAgICA8bGk+PGI+Oj88L2I+IC0gT3BlbiBoZWxwPC9saT5cbiAgICAgIDxsaT48Yj46cDwvYj4gLSBPcGVuIHBhbGV0dGU8L2xpPlxuICAgICAgPGxpPjxiPjpsPC9iPiAtIExheWVyczwvbGk+XG4gICAgICA8bGk+PGI+Om5sPC9iPiAtIE5ldyBsYXllcjwvbGk+XG4gICAgICA8bGk+PGI+OmxvZyBtZXNzYWdlPC9iPiAtIExvZyBtZXNzYWdlPC9saT5cbiAgICAgIDwhLS0gPGxpPjxiPjpiIC8gZyAvIGU8L2I+IC0gQ2hhbmdlIHRvb2wgKHBlbmNpbC8gYnVja2V0IC8gZXJhc2VyKTwvbGk+IC0tPlxuICAgIDwvdWw+XG4gIDwvZGl2PlxuYDtcbmNsYXNzIFRhYiB7XG4gICAgY29uc3RydWN0b3IodGl0bGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmlkID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnRhYlRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pZCA9IHRoaXMuaWQ7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFiXCIpO1xuICAgICAgICB0aGlzLmNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgdGhpcy5jbG9zZUJ0bi5pZCA9IGAjYnRuQ2xvc2Uke3RoaXMuaWR9YDtcbiAgICAgICAgdGhpcy5jbG9zZUJ0bi50ZXh0Q29udGVudCA9IFwiWFwiO1xuICAgICAgICB0aGlzLnRhYlRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmQodGhpcy50YWJUaXRsZSwgdGhpcy5jbG9zZUJ0bik7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFic1wiKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlVGFiKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICB9XG4gICAgYWN0aXZhdGVUYWIoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIH1cbiAgICByZW5hbWUodGl0bGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLnRhYlRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwib3BlblwiKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSSB7XG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnN0YXJ0dXBEaWFsb2cgPSBuZXcgRGlhbG9nRWxlbWVudChcIlN0YXJ0dXBcIiwgdGhpcy5fY29udGFpbmVyLCBcIm1pbml3aXphcmRcIiwgc3RhcnR1cENvbnRlbnQpO1xuICAgICAgICB0aGlzLmhlbHBEaWFsb2cgPSBuZXcgRGlhbG9nRWxlbWVudChcIkhlbHBcIiwgdGhpcy5fY29udGFpbmVyLCBcIkhlbHBcIiwgaGVscENvbnRlbnQpO1xuICAgICAgICB0aGlzLnpvb21FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN6b29tXCIpO1xuICAgICAgICB0aGlzLnByaW1hcnlDb2xvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rvb2xQckNvbG9yXCIpO1xuICAgICAgICB0aGlzLnN0YXR1c0xpbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0YXR1c0xpbmVcIik7XG4gICAgICAgIHRoaXMubGF5ZXJzRGlhbG9nID0gbmV3IERpYWxvZ0VsZW1lbnQoXCJMYXllcnNcIiwgdGhpcy5fY29udGFpbmVyLCBcIkxheWVyc1wiKTtcbiAgICAgICAgdGhpcy5sYXllcnNXcmFwID0gdGhpcy5sYXllcnNEaWFsb2cuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI0RpYWxvZ0JvZHlMYXllcnNcIik7XG4gICAgICAgIHRoaXMucGFsZXR0ZURpYWxvZyA9IG5ldyBEaWFsb2dFbGVtZW50KFwiUGFsZXR0ZVwiLCB0aGlzLl9jb250YWluZXIpO1xuICAgICAgICB0aGlzLnBhbGV0dGVXcmFwID0gdGhpcy5wYWxldHRlRGlhbG9nLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNEaWFsb2dCb2R5UGFsZXR0ZVwiKTtcbiAgICAgICAgdGhpcy5wYWxldHRlVGl0bGUgPSB0aGlzLnBhbGV0dGVEaWFsb2cuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI0RpYWxvZ1RpdGxlUGFsZXR0ZVwiKTtcbiAgICAgICAgdGhpcy50YWJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YWJzXCIpO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5jb2xvclNjaGVtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY29sb3JzY2hlbWVcIikgfHwgXCJkYXJrXCI7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuc2V0Q29sb3JTY2hlbWUodGhpcy5jb2xvclNjaGVtZSk7XG4gICAgICAgIGlmICghd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic3RhcnR1cFwiKSB8fFxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic3RhcnR1cFwiKSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnR1cERpYWxvZy5vcGVuKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YWJzLmFwcGVuZChuZXcgVGFiKFwiVW50aXRsZWRcIikuZWxlbWVudCk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIHJlbmRlclBhbGV0dGUoKSB7XG4gICAgICAgIHRoaXMucGFsZXR0ZVdyYXAuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHdyYXAuY2xhc3NOYW1lID0gXCJwYWxldHRlLXdyYXBcIjtcbiAgICAgICAgdGhpcy5wYWxldHRlVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLmFwcC5wYWxldHRlLm5hbWU7XG4gICAgICAgIHRoaXMuYXBwLnBhbGV0dGUuY29sb3JzLmZvckVhY2goKGNvbG9yLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChcImNvbG9yLXN3YXRjaFwiKTtcbiAgICAgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGByZ2JhKCR7Y29sb3JbMF19LCAke2NvbG9yWzFdfSwgJHtjb2xvclsyXX0sICR7Y29sb3JbM119KWA7XG4gICAgICAgICAgICB3cmFwLmFwcGVuZChlbCk7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnByaW1hcnlDb2xvciA9IGNvbG9yO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGFsZXR0ZVdyYXAuYXBwZW5kKHdyYXApO1xuICAgIH1cbiAgICByZW5kZXJMYXllcnMoKSB7XG4gICAgICAgIHRoaXMubGF5ZXJzV3JhcC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICB0aGlzLmFwcC5jdXJyZW50RmlsZT8uZGF0YS5mb3JFYWNoKChsYXllciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJsYXllclwiKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5hcHAubGF5ZXJJbmRleCkge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IGxheWVyLm5hbWU7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLmxheWVySW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmxheWVyc1dyYXAuYXBwZW5kKGVsKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldENvbG9yU2NoZW1lKHNjaGVtZSkge1xuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjb2xvcnNjaGVtZVwiKSkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoXCJjb2xvcnNjaGVtZVwiLCBzY2hlbWUpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjb2xvcnNjaGVtZVwiLCBzY2hlbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoXCJjb2xvcnNjaGVtZVwiLCBzY2hlbWUpO1xuICAgICAgICAgICAgdGhpcy5jb2xvclNjaGVtZSA9IHNjaGVtZTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY29sb3JzY2hlbWVcIiwgc2NoZW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvL3RoaXMuY29sb3JTY2hlbWUgPSBzY2hlbWU7XG4gICAgICAgIC8vZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoXCJjb2xvcnNjaGVtZVwiLCBzY2hlbWUpO1xuICAgICAgICAvL2xvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY29sb3JzY2hlbWVcIiwgc2NoZW1lKTtcbiAgICB9XG4gICAgbG9nKG1zZykge1xuICAgICAgICB0aGlzLnRvICYmIGNsZWFyVGltZW91dCh0aGlzLnRvKTtcbiAgICAgICAgdGhpcy5zdGF0dXNMaW5lLmNsYXNzTGlzdC5hZGQoXCJvcGVuXCIpO1xuICAgICAgICB0aGlzLnN0YXR1c0xpbmUudGV4dENvbnRlbnQgPSBtc2c7XG4gICAgICAgIHRoaXMudG8gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzTGluZS5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzTGluZS50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIH0sIDIwMDApO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyUGFsZXR0ZSgpO1xuICAgICAgICB0aGlzLnJlbmRlckxheWVycygpO1xuICAgICAgICB0aGlzLnpvb21FbGVtZW50LnRleHRDb250ZW50ID0gYCR7dGhpcy5hcHAuem9vbSAqIDEwMH0lYDtcbiAgICAgICAgdGhpcy5wcmltYXJ5Q29sb3JFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGByZ2JhKCR7dGhpcy5hcHAucHJpbWFyeUNvbG9yWzBdfSwgJHt0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMV19LCAke3RoaXMuYXBwLnByaW1hcnlDb2xvclsyXX0sICR7dGhpcy5hcHAucHJpbWFyeUNvbG9yWzNdfSlgO1xuICAgIH1cbn1cbiIsImltcG9ydCBBcHAgZnJvbSBcIi4vYXBwXCI7XG5jb25zdCBhcHAgPSBuZXcgQXBwKCk7XG4vL0B0cy1pZ25vcmVcbndpbmRvdy5hcHAgPSBhcHA7XG4iLCJpbXBvcnQgV2l6RmlsZSBmcm9tIFwiLi9maWxlXCI7XG5pbXBvcnQgSGlzdG9yeSBmcm9tIFwiLi9oaXN0b3J5XCI7XG5pbXBvcnQgSW5wdXRDb21tYW5kIGZyb20gXCIuL2lucHV0LWNvbW1hbmRcIjtcbmltcG9ydCBMYXllciBmcm9tIFwiLi9sYXllclwiO1xuaW1wb3J0IHsgZGVmYXVsdFBhbGV0dGUgfSBmcm9tIFwiLi9wYWxldHRlXCI7XG5pbXBvcnQgUmVuZGVyZXIgZnJvbSBcIi4vcmVuZGVyZXJcIjtcbmltcG9ydCBVSSBmcm9tIFwiLi91aVwiO1xuY29uc3QgREVGQVVMVF9XSURUSCA9IDE2O1xuY29uc3QgREVGQVVMVF9IRUlHSFQgPSAxNjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KCk7XG4gICAgICAgIHRoaXMuem9vbSA9IDI1O1xuICAgICAgICB0aGlzLnRvb2wgPSBcInBlbmNpbFwiO1xuICAgICAgICB0aGlzLmNvbG9yID0gMTtcbiAgICAgICAgdGhpcy5maWxlcyA9IFtdO1xuICAgICAgICB0aGlzLmZpbGVJbmRleCA9IDA7XG4gICAgICAgIHRoaXMucGFsZXR0ZSA9IGRlZmF1bHRQYWxldHRlO1xuICAgICAgICB0aGlzLnByaW1hcnlDb2xvciA9IHRoaXMucGFsZXR0ZS5nZXRDb2xvcigwKTtcbiAgICAgICAgdGhpcy5wYWxldHRlcyA9IFt0aGlzLnBhbGV0dGVdO1xuICAgICAgICB0aGlzLnVpID0gbmV3IFVJKHRoaXMpO1xuICAgICAgICB0aGlzLmlucHV0Q29tbWFuZCA9IG5ldyBJbnB1dENvbW1hbmQodGhpcyk7XG4gICAgICAgIHRoaXMubGF5ZXJJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuZmlsZXMucHVzaChuZXcgV2l6RmlsZShERUZBVUxUX1dJRFRILCBERUZBVUxUX0hFSUdIVCkpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKHRoaXMpO1xuICAgICAgICB0aGlzLnNldHVwKCk7XG4gICAgfVxuICAgIGdldCBjdXJyZW50RmlsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsZXNbdGhpcy5maWxlSW5kZXhdO1xuICAgIH1cbiAgICBzZXR1cCgpIHtcbiAgICAgICAgLy8gYWJpbGl0eSB0byB1bmRvIGNoYW5nZXMgd2l0aCBjbWQgKyB6XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5tZXRhS2V5ICYmIGUua2V5ID09PSBcIj1cIikge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnpvb21JbigpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLm1ldGFLZXkgJiYgZS5rZXkgPT09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuem9vbU91dCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLm1ldGFLZXkgJiYgZS5rZXkgPT09IFwiMFwiKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuem9vbVJlc2V0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUubWV0YUtleSAmJiBlLmtleSA9PT0gXCJ6XCIpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy51bmRvKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIGhvbGQgc3BhY2UgYW5kIG1vdmUgbW91c2UsIG1vdmUgY2FudmFzXG4gICAgICAgICAgICAgICAgY2FzZSBcIlNwYWNlXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pbnB1dENvbW1hbmQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJvcGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSBcImdyYWJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5idXR0b25zID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuY2FudmFzLnN0eWxlLmN1cnNvciA9IFwiZ3JhYmJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5jYW52YXMuc3R5bGUubGVmdCA9IGAke2UubW92ZW1lbnRYfXB4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5jYW52YXMuc3R5bGUudG9wID0gYCR7ZS5tb3ZlbWVudFl9cHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCI/XCI6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51aS5oZWxwRGlhbG9nLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiRXNjYXBlXCI6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5wdXRDb21tYW5kLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3BlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dENvbW1hbmQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRDb21tYW5kLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIiBcIjpcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlKCk7XG4gICAgICAgIHRoaXMudWkudXBkYXRlKCk7XG4gICAgfVxuICAgIG5ld0ZpbGUoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibmV3XCIpO1xuICAgIH1cbiAgICBuZXdMYXllcigpIHtcbiAgICAgICAgY29uc3QgbGF5ZXIgPSBuZXcgTGF5ZXIoXCJMYXllciBcIiArICh0aGlzLmN1cnJlbnRGaWxlLmRhdGEubGVuZ3RoICsgMSksIGZhbHNlLCB0aGlzLmN1cnJlbnRGaWxlLndpZHRoLCB0aGlzLmN1cnJlbnRGaWxlLmhlaWdodCk7XG4gICAgICAgIHRoaXMuY3VycmVudEZpbGUuZGF0YS5wdXNoKGxheWVyKTtcbiAgICAgICAgdGhpcy5sYXllckluZGV4ID0gdGhpcy5jdXJyZW50RmlsZS5kYXRhLmxlbmd0aCAtIDE7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIHNhdmVGaWxlKHR5cGUsIG9wdGlvbnMgPSB7IHNjYWxlOiAxIH0pIHtcbiAgICAgICAgaWYgKHR5cGUgPT09IFwicG5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFVcmwgPSB0aGlzLnJlbmRlcmVyLmNhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XG4gICAgICAgICAgICBjb25zdCBjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IGMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBpbWcuc3JjID0gZGF0YVVybDtcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYy53aWR0aCA9IGltZy53aWR0aCAqIG9wdGlvbnMuc2NhbGU7XG4gICAgICAgICAgICAgICAgYy5oZWlnaHQgPSBpbWcuaGVpZ2h0ICogb3B0aW9ucy5zY2FsZTtcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgYy53aWR0aCwgYy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICAgICAgICBhLmhyZWYgPSBjLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcbiAgICAgICAgICAgICAgICBhLmRvd25sb2FkID0gXCJpbWFnZS5wbmdcIjtcbiAgICAgICAgICAgICAgICBhLmNsaWNrKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy51aS5sb2coYHNhdmUgZmlsZSBhcyAke3R5cGV9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51aS5sb2coYGZpbGV0eXBlICR7dHlwZX0gaXMgbm90IHN1cHBvcnRlZGApO1xuICAgIH1cbiAgICB1bmRvKCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkudW5kbygpO1xuICAgIH1cbiAgICByZWRvKCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkucmVkbygpO1xuICAgIH1cbiAgICBjaGFuZ2VUb29sKHRvb2wpIHtcbiAgICAgICAgdGhpcy50b29sID0gdG9vbDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiTGF5ZXIiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJsb2NrZWQiLCJ3aWR0aCIsImhlaWdodCIsInRoaXMiLCJvcGFjaXR5IiwidmlzaWJsZSIsImRhdGEiLCJJbWFnZURhdGEiLCJkZWZhdWx0UGFsZXR0ZSIsImNvbG9ycyIsImFkZENvbG9yIiwiY29sb3IiLCJwdXNoIiwicmVtb3ZlQ29sb3IiLCJpbmRleCIsInNwbGljZSIsInNldENvbG9yIiwiZ2V0Q29sb3IiLCJXaXpGaWxlIiwicGFsZXR0ZSIsInNldENhbnZhc1NpemUiLCJmb3JFYWNoIiwibGF5ZXIiLCJzZXQiLCJIaXN0b3J5Tm9kZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJIaXN0b3J5IiwibWF4Iiwic3RhY2siLCJidWZmZXIiLCJhZGQiLCJsZW5ndGgiLCJzaGlmdCIsInVuZG8iLCJwb3AiLCJyZWRvIiwiY2xlYXIiLCJJbnB1dENvbW1hbmQiLCJhcHAiLCJjb21tYW5kcyIsIm4iLCJuZXdGaWxlIiwibmwiLCJuZXdMYXllciIsImwiLCJ1aSIsImxheWVyc0RpYWxvZyIsInRvZ2dsZSIsImUiLCJ3IiwidHlwZSIsInNjYWxlIiwic2F2ZUZpbGUiLCJwYXJzZUludCIsImgiLCJoZWxwRGlhbG9nIiwibG9nIiwicCIsInBhbGV0dGVEaWFsb2ciLCJQIiwibXNnIiwiaHMiLCJzdGFydHVwRGlhbG9nIiwiY3MiLCJ0aGVtZSIsInNldENvbG9yU2NoZW1lIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlkIiwiY2xhc3NOYW1lIiwiY29uc29sZSIsIl9jb250YWluZXIiLCJhcHBlbmQiLCJhZGRFdmVudExpc3RlbmVyIiwia2V5IiwiZXhlY3V0ZSIsInZhbHVlIiwiY2xvc2UiLCJvcGVuIiwiY2xhc3NMaXN0IiwiZm9jdXMiLCJyZW1vdmUiLCJjbWQiLCJzbGljZSIsImNvbW1hbmQiLCJhcmdzIiwic3BsaXQiLCJSZW5kZXJlciIsInpvb20iLCJmaWxlIiwiY3VycmVudEZpbGUiLCJncmlkIiwiZ3JpZFNpemUiLCJfY2FudmFzIiwiX2N0eCIsImNhbnZhcyIsImdldENvbnRleHQiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImZpbGVzIiwiZmlsZUluZGV4IiwiYmFja2dyb3VuZEltYWdlIiwiYmFja2dyb3VuZFNpemUiLCJpbWFnZVJlbmRlcmluZyIsInNldFpvb20iLCJwcmV2ZW50RGVmYXVsdCIsInpvb21DaGFuZ2UiLCJkZWx0YVkiLCJib2R5IiwicXVlcnlTZWxlY3RvciIsImltYWdlRGF0YSIsImN0eCIsImNyZWF0ZUltYWdlRGF0YSIsImhpc3RvcnkiLCJnZXRJbWFnZURhdGEiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwieCIsIk1hdGgiLCJmbG9vciIsImNsaWVudFgiLCJsZWZ0IiwiY2xpZW50WSIsInRvcCIsInByaW1hcnlDb2xvciIsInB1dEltYWdlRGF0YSIsImJ1dHRvbnMiLCJkcmF3UmVjdCIsInkiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImZpbGwiLCJzdGFydFgiLCJzdGFydFkiLCJ0YXJnZXRDb2xvciIsInJlcGxhY2VDb2xvciIsIm1hdHJpeCIsImxheWVySW5kZXgiLCJ1cGRhdGUiLCJkdCIsImRlbHRhIiwic2lnbiIsInpvb21JbiIsInpvb21PdXQiLCJ6b29tUmVzZXQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiaW5kIiwiRGlhbG9nRWxlbWVudCIsImNvbnRhaW5lciIsInRpdGxlIiwiY29udGVudCIsIl90ZW1wbGF0ZSIsImhlYWRlciIsImlubmVySFRNTCIsImNsb3NlQnRuIiwiZHJhZyIsInBvczEiLCJwb3MyIiwicG9zMyIsInBvczQiLCJlbGVtZW50RHJhZyIsIm9mZnNldFRvcCIsIm9mZnNldExlZnQiLCJjbG9zZURyYWdFbGVtZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm1vdmUiLCJoYXNBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiVGFiIiwidG9TdHJpbmciLCJ0YWJUaXRsZSIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJkZWFjdGl2YXRlVGFiIiwiYWN0aXZhdGVUYWIiLCJyZW5hbWUiLCJVSSIsInpvb21FbGVtZW50IiwicHJpbWFyeUNvbG9yRWxlbWVudCIsInN0YXR1c0xpbmUiLCJsYXllcnNXcmFwIiwicGFsZXR0ZVdyYXAiLCJwYWxldHRlVGl0bGUiLCJ0YWJzIiwiY29sb3JTY2hlbWUiLCJnZXRJdGVtIiwicmVuZGVyUGFsZXR0ZSIsIndyYXAiLCJlbCIsInJlbmRlckxheWVycyIsInNjaGVtZSIsInRvIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInRvb2wiLCJwYWxldHRlcyIsImlucHV0Q29tbWFuZCIsInJlbmRlcmVyIiwic2V0dXAiLCJtZXRhS2V5IiwiY29udGFpbnMiLCJjdXJzb3IiLCJtb3ZlbWVudFgiLCJtb3ZlbWVudFkiLCJvcHRpb25zIiwiZGF0YVVybCIsInRvRGF0YVVSTCIsImMiLCJpbWciLCJJbWFnZSIsInNyYyIsIm9ubG9hZCIsImRyYXdJbWFnZSIsImEiLCJocmVmIiwiZG93bmxvYWQiLCJjbGljayIsImNoYW5nZVRvb2wiXSwic291cmNlUm9vdCI6IiJ9