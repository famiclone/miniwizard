(()=>{"use strict";class t{constructor(t="New layer",e=!1,i,s){this.name=t,this.locked=e,this.width=i,this.height=s,this.opacity=255,this.visible=!0,this.data=new ImageData(i,s)}}const e=new class{constructor(t="New palette"){this.name=t,this.colors=[[]]}addColor(t){this.colors.push(t)}removeColor(t){this.colors.splice(t,1)}setColor(t,e){this.colors[t]=e}getColor(t){return this.colors[t]}}("Default");e.colors=[[0,0,0,255],[252,252,252,255],[248,248,248,255],[188,188,188,255],[124,124,124,255],[164,228,252,255],[60,188,252,255],[0,120,248,255],[0,0,252,255],[184,184,248,255],[104,136,252,255],[0,88,248,255],[0,0,188,255],[216,184,248,255],[152,120,248,255],[104,68,252,255],[68,40,188,255],[248,184,248,255],[248,120,248,255],[216,0,204,255],[148,0,132,255],[248,164,192,255],[248,88,152,255],[228,0,88,255],[168,0,32,255],[240,208,176,255],[248,120,88,255],[248,56,0,255],[168,16,0,255],[252,224,168,255],[252,160,68,255],[228,92,16,255],[136,20,0,255],[248,216,120,255],[248,184,0,255],[172,124,0,255],[80,40,0,255],[216,248,120,255],[184,248,24,255],[0,184,0,255],[0,120,0,255],[184,248,184,255],[88,216,84,255],[0,168,0,255],[0,104,0,255],[184,248,216,255],[88,248,152,255],[0,168,68,255],[0,88,0,255],[0,252,252,255],[0,232,216,255],[0,136,136,255],[0,64,88,255],[248,216,248,255],[120,120,120,255]];class i{constructor(i,s){this.width=i,this.height=s,this.data=[],this.palette=e,this.data=[new t("Background",!0,i,s)]}setCanvasSize(t,e){this.width=t,this.height=e,this.data.forEach((i=>{const s=i.data;i.data=new ImageData(t,e),i.data.data.set(s.data)}))}}class s{constructor(t){this.data=t,this.timestamp=Date.now()}}class a{constructor(){this.max=5,this.stack=[],this.buffer=null}add(t){this.stack.length>=this.max&&this.stack.shift(),this.stack.push(new s(t))}undo(){return this.stack.length>0?(this.buffer=this.stack.pop(),this.buffer.data):null}redo(){return this.buffer?(this.stack.push(this.buffer),this.buffer=null,this.stack[this.stack.length-1].data):null}clear(){this.stack=[]}}class n{constructor(t){this.app=t,this.zoom=25,this.file=this.app.currentFile,this.grid=!0,this.gridSize=16,this._canvas=document.createElement("canvas"),this._ctx=this.canvas.getContext("2d"),this.canvas.style.backgroundColor="white",this.canvas.width=this.app.files[this.app.fileIndex].width,this.canvas.height=this.app.files[this.app.fileIndex].height,this.canvas.style.backgroundImage="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'><rect width='16' height='16' fill='none'/><rect x='0' y='0' width='8' height='8' fill='%23f0f0f0'/><rect x='8' y='8' width='8' height='8' fill='%23f0f0f0'/></svg>\")",this.canvas.style.backgroundSize="16px 16px",this.canvas.style.imageRendering="pixelated",this.setZoom(this.zoom),this.canvas.addEventListener("wheel",(t=>{t.preventDefault(),this.zoomChange(t.deltaY)})),document.body.querySelector("#main").append(this.canvas);const e=this.ctx.createImageData(this.file.width,this.file.height);this.canvas.addEventListener("click",(t=>{this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height));const i=this.canvas.getBoundingClientRect(),s=Math.floor((t.clientX-i.left)/this.zoom),a=4*(Math.floor((t.clientY-i.top)/this.zoom)*this.file.width+s);e.data[a]=this.app.primaryColor[0],e.data[a+1]=this.app.primaryColor[1],e.data[a+2]=this.app.primaryColor[2],e.data[a+3]=this.app.primaryColor[3],this.ctx.putImageData(e,0,0),this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height))})),this.canvas.addEventListener("mousemove",(t=>{if(1===t.buttons){this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height));const i=this.canvas.getBoundingClientRect(),s=Math.floor((t.clientX-i.left)/this.zoom),a=4*(Math.floor((t.clientY-i.top)/this.zoom)*this.file.width+s);e.data[a]=this.app.primaryColor[0],e.data[a+1]=this.app.primaryColor[1],e.data[a+2]=this.app.primaryColor[2],e.data[a+3]=this.app.primaryColor[3],this.ctx.putImageData(e,0,0),this.app.history.add(this.ctx.getImageData(0,0,this.file.width,this.file.height))}}))}get canvas(){return this._canvas}get ctx(){return this._ctx}drawRect(t,e,i,s,a){this.ctx.fillStyle=a,this.ctx.fillRect(t,e,i,s)}fill(t,e,i,s){const a=this.file.data[this.app.layerIndex].data;if(t<0||t>=a.width||e<0||e>=a.height)return;const n=e*a.width+t;a.data[n]!==s&&a.data[n]===i&&(a.data[n]=s,this.fill(t+1,e,i,s),this.fill(t-1,e,i,s),this.fill(t,e+1,i,s),this.fill(t,e-1,i,s))}setZoom(t){this.zoom=t,this.canvas.style.width=this.file.width*this.zoom+"px",this.canvas.style.height=this.file.height*this.zoom+"px",this.update()}zoomChange(t=0){const e=Math.sign(t);this.zoom+=8*e,this.setZoom(this.zoom)}zoomIn(){console.log("zoom in"),this.zoom<128&&this.zoomChange(1)}zoomOut(){console.log("zoom out"),this.zoom>1&&this.zoomChange(-1)}zoomReset(){console.log("zoom reset"),this.setZoom(25)}update(){requestAnimationFrame(this.update.bind(this))}}class o{constructor(t,e,i="Dialog",s="",a=!1){this.name=t,this.container=e,this.title=i,this.content=s,this._template=`\n    <style>\n      .dialog {\n        background-color: var(--bg-color);\n        border-radius: 0.5rem;\n        border: 1px solid var(--mid-color);\n        color: var(--fg-color);\n        min-width: 320px;\n        width: 500px;\n      }\n    </style>\n\n    <div class="d-flex" id="DialogHeader${this.name}">\n      <div id="DialogTitle${this.name}">${this.title}</div>\n      <button class="btn btn--icon" id="BtnCloseDialog${this.name}">\n        X\n      </button>\n    </div>\n    <div class="DialogBody DialogBody${this.name}" id="DialogBody${this.name}">\n      ${this.content}\n    </div>\n  `,this.element=document.createElement("dialog"),this.element.className=`dialog Dialog${this.name}`,this.element.open=a,this.container.append(this.element),console.log(this.name),this.header=this.element.querySelector(`#DialogHeader${t}`),this.element.id=`Dialog${t}`,this.element.innerHTML=this._template,this.closeBtn=this.element.querySelector(`#BtnCloseDialog${t}`),this.closeBtn.addEventListener("click",(()=>{this.close()}))}drag(t){let e=0,i=0,s=0,a=0;s=t.clientX,a=t.clientY;const n=t=>{t.preventDefault(),e=s-t.clientX,i=a-t.clientY,s=t.clientX,a=t.clientY,this.element.style.top=this.element.offsetTop-i+"px",this.element.style.left=this.element.offsetLeft-e+"px"},o=()=>{document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",n)};document.addEventListener("mouseup",o),document.addEventListener("mousemove",n)}move(t,e){this.element.style.left=`${t}px`,this.element.style.top=`${e}px`}toggle(){this.element.hasAttribute("open")?this.close():this.open()}open(){this.element.setAttribute("open","")}close(){this.element.removeAttribute("open"),window.localStorage.setItem("startup","false")}}class l{constructor(t){this.app=t,this.commands={n:()=>{this.app.newFile()},nl:()=>{this.app.newLayer()},l:()=>{this.app.ui.layersDialog.toggle()},e:()=>{},w:(t,e)=>{this.app.saveFile(t,{scale:parseInt(e)})},h:()=>{this.app.ui.helpDialog.toggle(),this.app.ui.log("Help")},p:()=>{this.app.ui.paletteDialog.toggle(),this.app.ui.log("Open palette")},P:()=>{},log:t=>{this.app.ui.log(t)},hs:()=>{this.app.ui.startupDialog.toggle()}},this.element=document.createElement("input"),this.element.id="InputCommand",this.app.ui._container.append(this.element),this.element.addEventListener("keydown",(t=>{"Enter"===t.key&&(this.execute(this.element.value),this.close())}))}open(){this.element.classList.add("open"),this.element.focus(),this.element.value=":"}close(){this.element.classList.remove("open"),this.element.value=""}execute(t){t=t.slice(1);const[e,...i]=t.split(" ");console.log(e,i),e in this.commands?this.commands[e](...i):this.app.ui.log(`command not found: ${e}`)}}class h{constructor(t){this.title=t,this.id=Date.now().toString(),this.element=document.createElement("div"),this.tabTitle=document.createElement("span"),this.element.id=this.id,this.element.classList.add("tab"),this.closeBtn=document.createElement("button"),this.closeBtn.id=`#btnClose${this.id}`,this.closeBtn.textContent="X",this.tabTitle.textContent=t,this.element.append(this.tabTitle,this.closeBtn),document.querySelector("#tabs").appendChild(this.element),this.closeBtn.addEventListener("click",(()=>{this.close()}))}deactivateTab(){this.element.classList.remove("active")}activateTab(){this.element.classList.add("active")}rename(t){this.title=t,this.tabTitle.textContent=t}close(){this.element.removeAttribute("open")}}class r{constructor(t){this.app=t,this._container=document.createElement("div"),this.startupDialog=new o("Startup",this._container,"miniwizard",'\n  <div>\n    <b\n      >2023 Â©\n      <a target="_blank" href="https://famiclone.dev">famiclone.dev</a></b\n    >\n    <hr />\n    <br />\n    <div>\n      <b>Esc</b> - Command mode, <b>:new</b> - New file, <b>:h</b> - Open\n      help\n    </div>\n  </div>\n'),this.helpDialog=new o("Help",this._container,"Help","\n  <div>\n    <ul>\n      <li><b>Escape</b> - Open console</li>\n      <li><b>Cmd+</b> - Zoom in</li>\n      <li><b>Cmd-</b> - Zoom out</li>\n      <li><b>Cmd0</b> - Zoom reset</li>\n      <li><b>:?</b> - Open help</li>\n      <li><b>:p</b> - Open palette</li>\n      <li><b>:l</b> - Layers</li>\n      <li><b>:nl</b> - New layer</li>\n      <li><b>:log message</b> - Log message</li>\n      \x3c!-- <li><b>:b / g / e</b> - Change tool (pencil/ bucket / eraser)</li> --\x3e\n    </ul>\n  </div>\n"),this.inputCommand=new l(this.app),this.zoomElement=document.querySelector("#zoom"),this.primaryColorElement=document.querySelector("#toolPrColor"),this.statusLine=document.querySelector("#statusLine"),this.layersDialog=new o("Layers",this._container,"Layers"),this.layersWrap=document.querySelector("#DialogBodyLayers"),this.paletteDialog=new o("Palette",this._container),this.paletteWrap=this.paletteDialog.element.querySelector("#DialogBodyPalette"),this.paletteTitle=this.paletteDialog.element.querySelector("#DialogTitlePalette"),this.tabs=document.querySelector("#tabs"),this.app=t,document.body.append(this._container),window.localStorage.getItem("startup")&&"true"!==window.localStorage.getItem("startup")||this.startupDialog.open(),this.tabs.append(new h("Untitled").element),this.update()}renderPalette(){this.paletteWrap.innerHTML="";const t=document.createElement("div");t.className="palette-wrap",this.paletteTitle.textContent=this.app.palette.name,this.app.palette.colors.forEach(((e,i)=>{const s=document.createElement("div");s.classList.add("color-swatch"),s.style.backgroundColor=`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`,t.append(s),s.addEventListener("click",(()=>{this.app.primaryColor=e,this.update()}))})),this.paletteWrap.append(t)}renderLayers(){this.layersWrap.innerHTML="",this.app.currentFile?.data.forEach(((t,e)=>{const i=document.createElement("div");i.classList.add("layer"),e===this.app.layerIndex&&i.classList.add("active"),i.textContent=t.name,i.addEventListener("click",(()=>{this.app.layerIndex=e,this.update()})),this.layersWrap.append(i)}))}log(t){this.to&&clearTimeout(this.to),this.statusLine.classList.add("open"),this.statusLine.textContent=t,this.to=setTimeout((()=>{this.statusLine.classList.remove("open"),this.statusLine.textContent=""}),2e3)}update(){this.renderPalette(),this.renderLayers(),this.zoomElement.textContent=100*this.app.zoom+"%",this.primaryColorElement.style.backgroundColor=`rgba(${this.app.primaryColor[0]}, ${this.app.primaryColor[1]}, ${this.app.primaryColor[2]}, ${this.app.primaryColor[3]})`}}const c=new class{constructor(){this.history=new a,this.zoom=25,this.tool="pencil",this.color=1,this.files=[],this.fileIndex=0,this.palette=e,this.primaryColor=this.palette.getColor(0),this.palettes=[this.palette],this.ui=new r(this),this.layerIndex=0,this.files.push(new i(16,16)),this.renderer=new n(this),this.setup()}get currentFile(){return this.files[this.fileIndex]}setup(){document.addEventListener("keydown",(t=>{if(t.metaKey&&"="===t.key)return t.preventDefault(),void this.renderer.zoomIn();if(t.metaKey&&"-"===t.key)return t.preventDefault(),void this.renderer.zoomOut();if(t.metaKey&&"0"===t.key)return t.preventDefault(),void this.renderer.zoomReset();if(t.metaKey&&"z"===t.key)return t.preventDefault(),void this.undo();switch(t.key){case"Space":this.ui.inputCommand.element.classList.contains("open")||(t.preventDefault(),this.renderer.canvas.style.cursor="grab",this.renderer.canvas.addEventListener("mousemove",(t=>{1===t.buttons&&(this.renderer.canvas.style.cursor="grabbing",this.renderer.canvas.style.left=`${t.movementX}px`,this.renderer.canvas.style.top=`${t.movementY}px`)})));break;case"?":t.preventDefault(),this.ui.helpDialog.toggle();break;case"Escape":t.preventDefault(),this.ui.inputCommand.element.classList.contains("open")?this.ui.inputCommand.close():this.ui.inputCommand.open()}})),document.addEventListener("keyup",(t=>{if(" "===t.key)t.preventDefault(),this.renderer.canvas.style.cursor="default"})),this.update()}update(){this.renderer.update(),this.ui.update()}newFile(){console.log("new")}newLayer(){const e=new t("Layer "+(this.currentFile.data.length+1),!1,this.currentFile.width,this.currentFile.height);this.currentFile.data.push(e),this.layerIndex=this.currentFile.data.length-1,this.update()}saveFile(t,e={scale:1}){if("png"===t){const i=this.renderer.canvas.toDataURL("image/png"),s=document.createElement("canvas"),a=s.getContext("2d"),n=new Image;return n.src=i,n.onload=()=>{s.width=n.width*e.scale,s.height=n.height*e.scale,a.drawImage(n,0,0,s.width,s.height);const t=document.createElement("a");t.href=s.toDataURL("image/png"),t.download="image.png",t.click()},void this.ui.log(`save file as ${t}`)}this.ui.log(`filetype ${t} is not supported`)}undo(){this.history.undo()}redo(){this.history.redo()}changeTool(t){this.tool=t}};window.app=c})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJtYXBwaW5ncyI6Im1CQUFlLE1BQU1BLEVBQ2pCQyxZQUFZQyxFQUFPLFlBQWFDLEdBQVMsRUFBT0MsRUFBT0MsR0FDbkRDLEtBQUtKLEtBQU9BLEVBQ1pJLEtBQUtILE9BQVNBLEVBQ2RHLEtBQUtGLE1BQVFBLEVBQ2JFLEtBQUtELE9BQVNBLEVBQ2RDLEtBQUtDLFFBQVUsSUFDZkQsS0FBS0UsU0FBVSxFQUNmRixLQUFLRyxLQUFPLElBQUlDLFVBQVVOLEVBQU9DLEVBQ3JDLEVDU0csTUFBTU0sRUFBaUIsSUFsQmYsTUFDWFYsWUFBWUMsRUFBTyxlQUNmSSxLQUFLSixLQUFPQSxFQUNaSSxLQUFLTSxPQUFTLENBQUMsR0FDbkIsQ0FDQUMsU0FBU0MsR0FDTFIsS0FBS00sT0FBT0csS0FBS0QsRUFDckIsQ0FDQUUsWUFBWUMsR0FDUlgsS0FBS00sT0FBT00sT0FBT0QsRUFBTyxFQUM5QixDQUNBRSxTQUFTRixFQUFPSCxHQUNaUixLQUFLTSxPQUFPSyxHQUFTSCxDQUN6QixDQUNBTSxTQUFTSCxHQUNMLE9BQU9YLEtBQUtNLE9BQU9LLEVBQ3ZCLEdBRXNDLFdBRTFDTixFQUFlQyxPQUFTLENBQ3BCLENBQUMsRUFBRyxFQUFHLEVBQUcsS0FDVixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxHQUFJLElBQUssSUFBSyxLQUNmLENBQUMsRUFBRyxJQUFLLElBQUssS0FDZCxDQUFDLEVBQUcsRUFBRyxJQUFLLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsRUFBRyxHQUFJLElBQUssS0FDYixDQUFDLEVBQUcsRUFBRyxJQUFLLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxHQUFJLElBQUssS0FDZixDQUFDLEdBQUksR0FBSSxJQUFLLEtBQ2QsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxFQUFHLElBQUssS0FDZCxDQUFDLElBQUssRUFBRyxJQUFLLEtBQ2QsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssR0FBSSxJQUFLLEtBQ2YsQ0FBQyxJQUFLLEVBQUcsR0FBSSxLQUNiLENBQUMsSUFBSyxFQUFHLEdBQUksS0FDYixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLEdBQUksS0FDZixDQUFDLElBQUssR0FBSSxFQUFHLEtBQ2IsQ0FBQyxJQUFLLEdBQUksRUFBRyxLQUNiLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxJQUFLLElBQUssR0FBSSxLQUNmLENBQUMsSUFBSyxHQUFJLEdBQUksS0FDZCxDQUFDLElBQUssR0FBSSxFQUFHLEtBQ2IsQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLElBQUssSUFBSyxFQUFHLEtBQ2QsQ0FBQyxJQUFLLElBQUssRUFBRyxLQUNkLENBQUMsR0FBSSxHQUFJLEVBQUcsS0FDWixDQUFDLElBQUssSUFBSyxJQUFLLEtBQ2hCLENBQUMsSUFBSyxJQUFLLEdBQUksS0FDZixDQUFDLEVBQUcsSUFBSyxFQUFHLEtBQ1osQ0FBQyxFQUFHLElBQUssRUFBRyxLQUNaLENBQUMsSUFBSyxJQUFLLElBQUssS0FDaEIsQ0FBQyxHQUFJLElBQUssR0FBSSxLQUNkLENBQUMsRUFBRyxJQUFLLEVBQUcsS0FDWixDQUFDLEVBQUcsSUFBSyxFQUFHLEtBQ1osQ0FBQyxJQUFLLElBQUssSUFBSyxLQUNoQixDQUFDLEdBQUksSUFBSyxJQUFLLEtBQ2YsQ0FBQyxFQUFHLElBQUssR0FBSSxLQUNiLENBQUMsRUFBRyxHQUFJLEVBQUcsS0FDWCxDQUFDLEVBQUcsSUFBSyxJQUFL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LFFBQ3BDLE1BQU1xTixFQUFJeEssU0FBU0MsY0FBYyxLQUNqQ3VLLEVBQUVDLEtBQU9QLEVBQUVELFVBQVUsYUFDckJPLEVBQUVFLFNBQVcsWUFDYkYsRUFBRUcsT0FBTyxPQUVidk4sS0FBS2dKLEdBQUczQyxJQUFJLGdCQUFnQjZDLElBRWhDLENBQ0FsSixLQUFLZ0osR0FBRzNDLElBQUksWUFBWTZDLHFCQUM1QixDQUNBbEgsT0FDSWhDLEtBQUtvRSxRQUFRcEMsTUFDakIsQ0FDQUUsT0FDSWxDLEtBQUtvRSxRQUFRbEMsTUFDakIsQ0FDQXNMLFdBQVd0QixHQUNQbE0sS0FBS2tNLEtBQU9BLENBQ2hCLEdEaklKNUQsT0FBT2pHLElBQU1BLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90c2JwLy4vc3JjL2xheWVyLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvcGFsZXR0ZS50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL2ZpbGUudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9oaXN0b3J5LnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy91aS9kaWFsb2cudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9pbnB1dC1jb21tYW5kLnRzIiwid2VicGFjazovL3RzYnAvLi9zcmMvdWkudHMiLCJ3ZWJwYWNrOi8vdHNicC8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly90c2JwLy4vc3JjL2FwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBMYXllciB7XG4gICAgY29uc3RydWN0b3IobmFtZSA9IFwiTmV3IGxheWVyXCIsIGxvY2tlZCA9IGZhbHNlLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMubG9ja2VkID0gbG9ja2VkO1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLm9wYWNpdHkgPSAyNTU7XG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBJbWFnZURhdGEod2lkdGgsIGhlaWdodCk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFsZXR0ZSB7XG4gICAgY29uc3RydWN0b3IobmFtZSA9IFwiTmV3IHBhbGV0dGVcIikge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmNvbG9ycyA9IFtbXV07XG4gICAgfVxuICAgIGFkZENvbG9yKGNvbG9yKSB7XG4gICAgICAgIHRoaXMuY29sb3JzLnB1c2goY29sb3IpO1xuICAgIH1cbiAgICByZW1vdmVDb2xvcihpbmRleCkge1xuICAgICAgICB0aGlzLmNvbG9ycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgICBzZXRDb2xvcihpbmRleCwgY29sb3IpIHtcbiAgICAgICAgdGhpcy5jb2xvcnNbaW5kZXhdID0gY29sb3I7XG4gICAgfVxuICAgIGdldENvbG9yKGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yc1tpbmRleF07XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IGRlZmF1bHRQYWxldHRlID0gbmV3IFBhbGV0dGUoXCJEZWZhdWx0XCIpO1xuLy8gTkVTIHBhbGV0dGVcbmRlZmF1bHRQYWxldHRlLmNvbG9ycyA9IFtcbiAgICBbMCwgMCwgMCwgMjU1XSxcbiAgICBbMjUyLCAyNTIsIDI1MiwgMjU1XSxcbiAgICBbMjQ4LCAyNDgsIDI0OCwgMjU1XSxcbiAgICBbMTg4LCAxODgsIDE4OCwgMjU1XSxcbiAgICBbMTI0LCAxMjQsIDEyNCwgMjU1XSxcbiAgICBbMTY0LCAyMjgsIDI1MiwgMjU1XSxcbiAgICBbNjAsIDE4OCwgMjUyLCAyNTVdLFxuICAgIFswLCAxMjAsIDI0OCwgMjU1XSxcbiAgICBbMCwgMCwgMjUyLCAyNTVdLFxuICAgIFsxODQsIDE4NCwgMjQ4LCAyNTVdLFxuICAgIFsxMDQsIDEzNiwgMjUyLCAyNTVdLFxuICAgIFswLCA4OCwgMjQ4LCAyNTVdLFxuICAgIFswLCAwLCAxODgsIDI1NV0sXG4gICAgWzIxNiwgMTg0LCAyNDgsIDI1NV0sXG4gICAgWzE1MiwgMTIwLCAyNDgsIDI1NV0sXG4gICAgWzEwNCwgNjgsIDI1MiwgMjU1XSxcbiAgICBbNjgsIDQwLCAxODgsIDI1NV0sXG4gICAgWzI0OCwgMTg0LCAyNDgsIDI1NV0sXG4gICAgWzI0OCwgMTIwLCAyNDgsIDI1NV0sXG4gICAgWzIxNiwgMCwgMjA0LCAyNTVdLFxuICAgIFsxNDgsIDAsIDEzMiwgMjU1XSxcbiAgICBbMjQ4LCAxNjQsIDE5MiwgMjU1XSxcbiAgICBbMjQ4LCA4OCwgMTUyLCAyNTVdLFxuICAgIFsyMjgsIDAsIDg4LCAyNTVdLFxuICAgIFsxNjgsIDAsIDMyLCAyNTVdLFxuICAgIFsyNDAsIDIwOCwgMTc2LCAyNTVdLFxuICAgIFsyNDgsIDEyMCwgODgsIDI1NV0sXG4gICAgWzI0OCwgNTYsIDAsIDI1NV0sXG4gICAgWzE2OCwgMTYsIDAsIDI1NV0sXG4gICAgWzI1MiwgMjI0LCAxNjgsIDI1NV0sXG4gICAgWzI1MiwgMTYwLCA2OCwgMjU1XSxcbiAgICBbMjI4LCA5MiwgMTYsIDI1NV0sXG4gICAgWzEzNiwgMjAsIDAsIDI1NV0sXG4gICAgWzI0OCwgMjE2LCAxMjAsIDI1NV0sXG4gICAgWzI0OCwgMTg0LCAwLCAyNTVdLFxuICAgIFsxNzIsIDEyNCwgMCwgMjU1XSxcbiAgICBbODAsIDQwLCAwLCAyNTVdLFxuICAgIFsyMTYsIDI0OCwgMTIwLCAyNTVdLFxuICAgIFsxODQsIDI0OCwgMjQsIDI1NV0sXG4gICAgWzAsIDE4NCwgMCwgMjU1XSxcbiAgICBbMCwgMTIwLCAwLCAyNTVdLFxuICAgIFsxODQsIDI0OCwgMTg0LCAyNTVdLFxuICAgIFs4OCwgMjE2LCA4NCwgMjU1XSxcbiAgICBbMCwgMTY4LCAwLCAyNTVdLFxuICAgIFswLCAxMDQsIDAsIDI1NV0sXG4gICAgWzE4NCwgMjQ4LCAyMTYsIDI1NV0sXG4gICAgWzg4LCAyNDgsIDE1MiwgMjU1XSxcbiAgICBbMCwgMTY4LCA2OCwgMjU1XSxcbiAgICBbMCwgODgsIDAsIDI1NV0sXG4gICAgWzAsIDI1MiwgMjUyLCAyNTVdLFxuICAgIFswLCAyMzIsIDIxNiwgMjU1XSxcbiAgICBbMCwgMTM2LCAxMzYsIDI1NV0sXG4gICAgWzAsIDY0LCA4OCwgMjU1XSxcbiAgICBbMjQ4LCAyMTYsIDI0OCwgMjU1XSxcbiAgICBbMTIwLCAxMjAsIDEyMCwgMjU1XSxcbl07XG4iLCJpbXBvcnQgTGF5ZXIgZnJvbSBcIi4vbGF5ZXJcIjtcbmltcG9ydCB7IGRlZmF1bHRQYWxldHRlIH0gZnJvbSBcIi4vcGFsZXR0ZVwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2l6RmlsZSB7XG4gICAgY29uc3RydWN0b3Iod2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5wYWxldHRlID0gZGVmYXVsdFBhbGV0dGU7XG4gICAgICAgIHRoaXMuZGF0YSA9IFtuZXcgTGF5ZXIoXCJCYWNrZ3JvdW5kXCIsIHRydWUsIHdpZHRoLCBoZWlnaHQpXTtcbiAgICB9XG4gICAgc2V0Q2FudmFzU2l6ZSh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKChsYXllcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGxheWVyLmRhdGE7XG4gICAgICAgICAgICBsYXllci5kYXRhID0gbmV3IEltYWdlRGF0YSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIGxheWVyLmRhdGEuZGF0YS5zZXQoZGF0YS5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiY2xhc3MgSGlzdG9yeU5vZGUge1xuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhpc3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm1heCA9IDU7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBbXTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsO1xuICAgIH1cbiAgICBhZGQoZGF0YSkge1xuICAgICAgICBpZiAodGhpcy5zdGFjay5sZW5ndGggPj0gdGhpcy5tYXgpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2suc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YWNrLnB1c2gobmV3IEhpc3RvcnlOb2RlKGRhdGEpKTtcbiAgICB9XG4gICAgdW5kbygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLnN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJlZG8oKSB7XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5zdGFjay5wdXNoKHRoaXMuYnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YWNrW3RoaXMuc3RhY2subGVuZ3RoIC0gMV0uZGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuc3RhY2sgPSBbXTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnpvb20gPSAyNTtcbiAgICAgICAgdGhpcy5maWxlID0gdGhpcy5hcHAuY3VycmVudEZpbGU7XG4gICAgICAgIHRoaXMuZ3JpZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZ3JpZFNpemUgPSAxNjtcbiAgICAgICAgdGhpcy5fY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgdGhpcy5fY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5hcHAuZmlsZXNbdGhpcy5hcHAuZmlsZUluZGV4XS53aWR0aDtcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5hcHAuZmlsZXNbdGhpcy5hcHAuZmlsZUluZGV4XS5oZWlnaHQ7XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7dXRmOCw8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzE2JyBoZWlnaHQ9JzE2JyB2aWV3Qm94PScwIDAgMTYgMTYnPjxyZWN0IHdpZHRoPScxNicgaGVpZ2h0PScxNicgZmlsbD0nbm9uZScvPjxyZWN0IHg9JzAnIHk9JzAnIHdpZHRoPSc4JyBoZWlnaHQ9JzgnIGZpbGw9JyUyM2YwZjBmMCcvPjxyZWN0IHg9JzgnIHk9JzgnIHdpZHRoPSc4JyBoZWlnaHQ9JzgnIGZpbGw9JyUyM2YwZjBmMCcvPjwvc3ZnPlwiKWA7XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmJhY2tncm91bmRTaXplID0gXCIxNnB4IDE2cHhcIjtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuaW1hZ2VSZW5kZXJpbmcgPSBcInBpeGVsYXRlZFwiO1xuICAgICAgICB0aGlzLnNldFpvb20odGhpcy56b29tKTtcbiAgICAgICAgLy8gYWJpbGl0eSB0byB6b29tIGluIGFuZCBvdXQgd2l0aCBtb3VzZSB3aGVlbFxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuem9vbUNoYW5nZShlLmRlbHRhWSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpblwiKS5hcHBlbmQodGhpcy5jYW52YXMpO1xuICAgICAgICBjb25zdCBpbWFnZURhdGEgPSB0aGlzLmN0eC5jcmVhdGVJbWFnZURhdGEodGhpcy5maWxlLndpZHRoLCB0aGlzLmZpbGUuaGVpZ2h0KTtcbiAgICAgICAgLy8gYWJpbGl0eSB0byBkcmF3IHBpeGVsIHdpdGggbW91c2UgY2xpY2tcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcC5oaXN0b3J5LmFkZCh0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5maWxlLndpZHRoLCB0aGlzLmZpbGUuaGVpZ2h0KSk7XG4gICAgICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBjb25zdCB4ID0gTWF0aC5mbG9vcigoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcigoZS5jbGllbnRZIC0gcmVjdC50b3ApIC8gdGhpcy56b29tKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gKHkgKiB0aGlzLmZpbGUud2lkdGggKyB4KSAqIDQ7XG4gICAgICAgICAgICAvL3RoaXMuZmlsZXNbdGhpcy5maWxlSW5kZXhdLmRhdGFbdGhpcy5sYXllckluZGV4XS5kYXRhW3ldW3hdID0gdGhpcy5jb2xvcjtcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4XSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclswXTtcbiAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSB0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMV07XG4gICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDJdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzJdO1xuICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAzXSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclszXTtcbiAgICAgICAgICAgIHRoaXMuY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICAgICAgICAgICAgdGhpcy5hcHAuaGlzdG9yeS5hZGQodGhpcy5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuZmlsZS53aWR0aCwgdGhpcy5maWxlLmhlaWdodCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gYWJpbGl0eSB0byBkcmF3IHBpeGVsIHdpdGggbW91c2UgbW92ZVxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5idXR0b25zID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAuaGlzdG9yeS5hZGQodGhpcy5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuZmlsZS53aWR0aCwgdGhpcy5maWxlLmhlaWdodCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB4ID0gTWF0aC5mbG9vcigoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IE1hdGguZmxvb3IoKGUuY2xpZW50WSAtIHJlY3QudG9wKSAvIHRoaXMuem9vbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSAoeSAqIHRoaXMuZmlsZS53aWR0aCArIHgpICogNDtcbiAgICAgICAgICAgICAgICAvL3RoaXMuZmlsZXNbdGhpcy5maWxlSW5kZXhdLmRhdGFbdGhpcy5sYXllckluZGV4XS5kYXRhW3ldW3hdID1cbiAgICAgICAgICAgICAgICAvLyB0aGlzLmNvbG9yO1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4XSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclswXTtcbiAgICAgICAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDFdID0gdGhpcy5hcHAucHJpbWFyeUNvbG9yWzFdO1xuICAgICAgICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMl0gPSB0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMl07XG4gICAgICAgICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAzXSA9IHRoaXMuYXBwLnByaW1hcnlDb2xvclszXTtcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5oaXN0b3J5LmFkZCh0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5maWxlLndpZHRoLCB0aGlzLmZpbGUuaGVpZ2h0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgY2FudmFzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FudmFzO1xuICAgIH1cbiAgICBnZXQgY3R4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY3R4O1xuICAgIH1cbiAgICBkcmF3UmVjdCh4LCB5LCB3LCBoLCBjb2xvcikge1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoeCwgeSwgdywgaCk7XG4gICAgfVxuICAgIGZpbGwoc3RhcnRYLCBzdGFydFksIHRhcmdldENvbG9yLCByZXBsYWNlQ29sb3IpIHtcbiAgICAgICAgY29uc3QgbWF0cml4ID0gdGhpcy5maWxlLmRhdGFbdGhpcy5hcHAubGF5ZXJJbmRleF0uZGF0YTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHN0YXJ0IGNvb3JkaW5hdGVzIGFyZSBvdXQgb2YgYm91bmRzXG4gICAgICAgIGlmIChzdGFydFggPCAwIHx8XG4gICAgICAgICAgICBzdGFydFggPj0gbWF0cml4LndpZHRoIHx8XG4gICAgICAgICAgICBzdGFydFkgPCAwIHx8XG4gICAgICAgICAgICBzdGFydFkgPj0gbWF0cml4LmhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gc3RhcnRZICogbWF0cml4LndpZHRoICsgc3RhcnRYO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgdGFyZ2V0IHZhbHVlIG1hdGNoZXMgdGhlIHJlcGxhY2VtZW50IHZhbHVlXG4gICAgICAgIGlmIChtYXRyaXguZGF0YVtpbmRleF0gPT09IHJlcGxhY2VDb2xvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IHZhbHVlIG1hdGNoZXMgdGhlIHRhcmdldCB2YWx1ZVxuICAgICAgICBpZiAobWF0cml4LmRhdGFbaW5kZXhdICE9PSB0YXJnZXRDb2xvcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIGN1cnJlbnQgdmFsdWUgd2l0aCB0aGUgcmVwbGFjZW1lbnQgdmFsdWVcbiAgICAgICAgbWF0cml4LmRhdGFbaW5kZXhdID0gcmVwbGFjZUNvbG9yO1xuICAgICAgICAvLyBSZWN1cnNpdmVseSBmaWxsIGFkamFjZW50IGNlbGxzXG4gICAgICAgIHRoaXMuZmlsbChzdGFydFggKyAxLCBzdGFydFksIHRhcmdldENvbG9yLCByZXBsYWNlQ29sb3IpOyAvLyBSaWdodFxuICAgICAgICB0aGlzLmZpbGwoc3RhcnRYIC0gMSwgc3RhcnRZLCB0YXJnZXRDb2xvciwgcmVwbGFjZUNvbG9yKTsgLy8gTGVmdFxuICAgICAgICB0aGlzLmZpbGwoc3RhcnRYLCBzdGFydFkgKyAxLCB0YXJnZXRDb2xvciwgcmVwbGFjZUNvbG9yKTsgLy8gRG93blxuICAgICAgICB0aGlzLmZpbGwoc3RhcnRYLCBzdGFydFkgLSAxLCB0YXJnZXRDb2xvciwgcmVwbGFjZUNvbG9yKTsgLy8gVXBcbiAgICB9XG4gICAgc2V0Wm9vbSh6b29tKSB7XG4gICAgICAgIHRoaXMuem9vbSA9IHpvb207XG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLndpZHRoID0gYCR7dGhpcy5maWxlLndpZHRoICogdGhpcy56b29tfXB4YDtcbiAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5maWxlLmhlaWdodCAqIHRoaXMuem9vbX1weGA7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIHpvb21DaGFuZ2UoZHQgPSAwKSB7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gTWF0aC5zaWduKGR0KTtcbiAgICAgICAgdGhpcy56b29tICs9IGRlbHRhICogODtcbiAgICAgICAgdGhpcy5zZXRab29tKHRoaXMuem9vbSk7XG4gICAgfVxuICAgIHpvb21JbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ6b29tIGluXCIpO1xuICAgICAgICBpZiAodGhpcy56b29tIDwgMTI4KSB7XG4gICAgICAgICAgICB0aGlzLnpvb21DaGFuZ2UoMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgem9vbU91dCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ6b29tIG91dFwiKTtcbiAgICAgICAgaWYgKHRoaXMuem9vbSA+IDEpIHtcbiAgICAgICAgICAgIHRoaXMuem9vbUNoYW5nZSgtMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgem9vbVJlc2V0KCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInpvb20gcmVzZXRcIik7XG4gICAgICAgIHRoaXMuc2V0Wm9vbSgyNSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlLmJpbmQodGhpcykpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERpYWxvZ0VsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lciwgdGl0bGUgPSBcIkRpYWxvZ1wiLCBjb250ZW50ID0gXCJcIiwgb3BlbiA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHRoaXMuX3RlbXBsYXRlID0gYFxuICAgIDxzdHlsZT5cbiAgICAgIC5kaWFsb2cge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbWlkLWNvbG9yKTtcbiAgICAgICAgY29sb3I6IHZhcigtLWZnLWNvbG9yKTtcbiAgICAgICAgbWluLXdpZHRoOiAzMjBweDtcbiAgICAgICAgd2lkdGg6IDUwMHB4O1xuICAgICAgfVxuICAgIDwvc3R5bGU+XG5cbiAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4XCIgaWQ9XCJEaWFsb2dIZWFkZXIke3RoaXMubmFtZX1cIj5cbiAgICAgIDxkaXYgaWQ9XCJEaWFsb2dUaXRsZSR7dGhpcy5uYW1lfVwiPiR7dGhpcy50aXRsZX08L2Rpdj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLS1pY29uXCIgaWQ9XCJCdG5DbG9zZURpYWxvZyR7dGhpcy5uYW1lfVwiPlxuICAgICAgICBYXG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiRGlhbG9nQm9keSBEaWFsb2dCb2R5JHt0aGlzLm5hbWV9XCIgaWQ9XCJEaWFsb2dCb2R5JHt0aGlzLm5hbWV9XCI+XG4gICAgICAke3RoaXMuY29udGVudH1cbiAgICA8L2Rpdj5cbiAgYDtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpYWxvZ1wiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IGBkaWFsb2cgRGlhbG9nJHt0aGlzLm5hbWV9YDtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9wZW4gPSBvcGVuO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lKTtcbiAgICAgICAgdGhpcy5oZWFkZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihgI0RpYWxvZ0hlYWRlciR7bmFtZX1gKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmlkID0gYERpYWxvZyR7bmFtZX1gO1xuICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5fdGVtcGxhdGU7XG4gICAgICAgIHRoaXMuY2xvc2VCdG4gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihgI0J0bkNsb3NlRGlhbG9nJHtuYW1lfWApO1xuICAgICAgICB0aGlzLmNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkcmFnKGUpIHtcbiAgICAgICAgbGV0IHBvczEgPSAwLCBwb3MyID0gMCwgcG9zMyA9IDAsIHBvczQgPSAwO1xuICAgICAgICBwb3MzID0gZS5jbGllbnRYO1xuICAgICAgICBwb3M0ID0gZS5jbGllbnRZO1xuICAgICAgICBjb25zdCBlbGVtZW50RHJhZyA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBwb3MxID0gcG9zMyAtIGUuY2xpZW50WDtcbiAgICAgICAgICAgIHBvczIgPSBwb3M0IC0gZS5jbGllbnRZO1xuICAgICAgICAgICAgcG9zMyA9IGUuY2xpZW50WDtcbiAgICAgICAgICAgIHBvczQgPSBlLmNsaWVudFk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUudG9wID0gdGhpcy5lbGVtZW50Lm9mZnNldFRvcCAtIHBvczIgKyBcInB4XCI7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubGVmdCA9IHRoaXMuZWxlbWVudC5vZmZzZXRMZWZ0IC0gcG9zMSArIFwicHhcIjtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY2xvc2VEcmFnRWxlbWVudCA9ICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGNsb3NlRHJhZ0VsZW1lbnQpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBlbGVtZW50RHJhZyk7XG4gICAgICAgIH07XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGNsb3NlRHJhZ0VsZW1lbnQpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGVsZW1lbnREcmFnKTtcbiAgICB9XG4gICAgbW92ZSh4LCB5KSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7eH1weGA7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSBgJHt5fXB4YDtcbiAgICB9XG4gICAgdG9nZ2xlKCkge1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZShcIm9wZW5cIikpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJvcGVuXCIsIFwiXCIpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcIm9wZW5cIik7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInN0YXJ0dXBcIiwgXCJmYWxzZVwiKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBJbnB1dENvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5jb21tYW5kcyA9IHtcbiAgICAgICAgICAgIG46ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5uZXdGaWxlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbmw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5uZXdMYXllcigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC51aS5sYXllcnNEaWFsb2cudG9nZ2xlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZTogKCkgPT4geyB9LFxuICAgICAgICAgICAgdzogKHR5cGUsIHNjYWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAuc2F2ZUZpbGUodHlwZSwgeyBzY2FsZTogcGFyc2VJbnQoc2NhbGUpIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGg6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC51aS5oZWxwRGlhbG9nLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnVpLmxvZyhcIkhlbHBcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnVpLnBhbGV0dGVEaWFsb2cudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkubG9nKFwiT3BlbiBwYWxldHRlXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFA6ICgpID0+IHsgfSxcbiAgICAgICAgICAgIGxvZzogKG1zZykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnVpLmxvZyhtc2cpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAudWkuc3RhcnR1cERpYWxvZy50b2dnbGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmlkID0gXCJJbnB1dENvbW1hbmRcIjtcbiAgICAgICAgdGhpcy5hcHAudWkuX2NvbnRhaW5lci5hcHBlbmQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSh0aGlzLmVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9IFwiOlwiO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuICAgICAgICB0aGlzLmVsZW1lbnQudmFsdWUgPSBcIlwiO1xuICAgIH1cbiAgICBleGVjdXRlKGNtZCkge1xuICAgICAgICBjbWQgPSBjbWQuc2xpY2UoMSk7XG4gICAgICAgIGNvbnN0IFtjb21tYW5kLCAuLi5hcmdzXSA9IGNtZC5zcGxpdChcIiBcIik7XG4gICAgICAgIGNvbnNvbGUubG9nKGNvbW1hbmQsIGFyZ3MpO1xuICAgICAgICBpZiAoY29tbWFuZCBpbiB0aGlzLmNvbW1hbmRzKSB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRzW2NvbW1hbmRdKC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hcHAudWkubG9nKGBjb21tYW5kIG5vdCBmb3VuZDogJHtjb21tYW5kfWApO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IERpYWxvZ0VsZW1lbnQgZnJvbSBcIi4vdWkvZGlhbG9nXCI7XG5pbXBvcnQgSW5wdXRDb21tYW5kIGZyb20gXCIuL2lucHV0LWNvbW1hbmRcIjtcbmNvbnN0IHN0YXJ0dXBDb250ZW50ID0gYFxuICA8ZGl2PlxuICAgIDxiXG4gICAgICA+MjAyMyDCqVxuICAgICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHBzOi8vZmFtaWNsb25lLmRldlwiPmZhbWljbG9uZS5kZXY8L2E+PC9iXG4gICAgPlxuICAgIDxociAvPlxuICAgIDxiciAvPlxuICAgIDxkaXY+XG4gICAgICA8Yj5Fc2M8L2I+IC0gQ29tbWFuZCBtb2RlLCA8Yj46bmV3PC9iPiAtIE5ldyBmaWxlLCA8Yj46aDwvYj4gLSBPcGVuXG4gICAgICBoZWxwXG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuYDtcbmNvbnN0IGhlbHBDb250ZW50ID0gYFxuICA8ZGl2PlxuICAgIDx1bD5cbiAgICAgIDxsaT48Yj5Fc2NhcGU8L2I+IC0gT3BlbiBjb25zb2xlPC9saT5cbiAgICAgIDxsaT48Yj5DbWQrPC9iPiAtIFpvb20gaW48L2xpPlxuICAgICAgPGxpPjxiPkNtZC08L2I+IC0gWm9vbSBvdXQ8L2xpPlxuICAgICAgPGxpPjxiPkNtZDA8L2I+IC0gWm9vbSByZXNldDwvbGk+XG4gICAgICA8bGk+PGI+Oj88L2I+IC0gT3BlbiBoZWxwPC9saT5cbiAgICAgIDxsaT48Yj46cDwvYj4gLSBPcGVuIHBhbGV0dGU8L2xpPlxuICAgICAgPGxpPjxiPjpsPC9iPiAtIExheWVyczwvbGk+XG4gICAgICA8bGk+PGI+Om5sPC9iPiAtIE5ldyBsYXllcjwvbGk+XG4gICAgICA8bGk+PGI+OmxvZyBtZXNzYWdlPC9iPiAtIExvZyBtZXNzYWdlPC9saT5cbiAgICAgIDwhLS0gPGxpPjxiPjpiIC8gZyAvIGU8L2I+IC0gQ2hhbmdlIHRvb2wgKHBlbmNpbC8gYnVja2V0IC8gZXJhc2VyKTwvbGk+IC0tPlxuICAgIDwvdWw+XG4gIDwvZGl2PlxuYDtcbmNsYXNzIFRhYiB7XG4gICAgY29uc3RydWN0b3IodGl0bGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmlkID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnRhYlRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pZCA9IHRoaXMuaWQ7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFiXCIpO1xuICAgICAgICB0aGlzLmNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgdGhpcy5jbG9zZUJ0bi5pZCA9IGAjYnRuQ2xvc2Uke3RoaXMuaWR9YDtcbiAgICAgICAgdGhpcy5jbG9zZUJ0bi50ZXh0Q29udGVudCA9IFwiWFwiO1xuICAgICAgICB0aGlzLnRhYlRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmQodGhpcy50YWJUaXRsZSwgdGhpcy5jbG9zZUJ0bik7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFic1wiKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlVGFiKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICB9XG4gICAgYWN0aXZhdGVUYWIoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIH1cbiAgICByZW5hbWUodGl0bGUpIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLnRhYlRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwib3BlblwiKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSSB7XG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLnN0YXJ0dXBEaWFsb2cgPSBuZXcgRGlhbG9nRWxlbWVudChcIlN0YXJ0dXBcIiwgdGhpcy5fY29udGFpbmVyLCBcIm1pbml3aXphcmRcIiwgc3RhcnR1cENvbnRlbnQpO1xuICAgICAgICB0aGlzLmhlbHBEaWFsb2cgPSBuZXcgRGlhbG9nRWxlbWVudChcIkhlbHBcIiwgdGhpcy5fY29udGFpbmVyLCBcIkhlbHBcIiwgaGVscENvbnRlbnQpO1xuICAgICAgICB0aGlzLmlucHV0Q29tbWFuZCA9IG5ldyBJbnB1dENvbW1hbmQodGhpcy5hcHApO1xuICAgICAgICB0aGlzLnpvb21FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN6b29tXCIpO1xuICAgICAgICB0aGlzLnByaW1hcnlDb2xvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rvb2xQckNvbG9yXCIpO1xuICAgICAgICB0aGlzLnN0YXR1c0xpbmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0YXR1c0xpbmVcIik7XG4gICAgICAgIHRoaXMubGF5ZXJzRGlhbG9nID0gbmV3IERpYWxvZ0VsZW1lbnQoXCJMYXllcnNcIiwgdGhpcy5fY29udGFpbmVyLCBcIkxheWVyc1wiKTtcbiAgICAgICAgdGhpcy5sYXllcnNXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNEaWFsb2dCb2R5TGF5ZXJzXCIpO1xuICAgICAgICB0aGlzLnBhbGV0dGVEaWFsb2cgPSBuZXcgRGlhbG9nRWxlbWVudChcIlBhbGV0dGVcIiwgdGhpcy5fY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5wYWxldHRlV3JhcCA9IHRoaXMucGFsZXR0ZURpYWxvZy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjRGlhbG9nQm9keVBhbGV0dGVcIik7XG4gICAgICAgIHRoaXMucGFsZXR0ZVRpdGxlID0gdGhpcy5wYWxldHRlRGlhbG9nLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNEaWFsb2dUaXRsZVBhbGV0dGVcIik7XG4gICAgICAgIHRoaXMudGFicyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFic1wiKTtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgIGlmICghd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic3RhcnR1cFwiKSB8fFxuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic3RhcnR1cFwiKSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnR1cERpYWxvZy5vcGVuKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YWJzLmFwcGVuZChuZXcgVGFiKFwiVW50aXRsZWRcIikuZWxlbWVudCk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIHJlbmRlclBhbGV0dGUoKSB7XG4gICAgICAgIHRoaXMucGFsZXR0ZVdyYXAuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgY29uc3Qgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHdyYXAuY2xhc3NOYW1lID0gXCJwYWxldHRlLXdyYXBcIjtcbiAgICAgICAgdGhpcy5wYWxldHRlVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLmFwcC5wYWxldHRlLm5hbWU7XG4gICAgICAgIHRoaXMuYXBwLnBhbGV0dGUuY29sb3JzLmZvckVhY2goKGNvbG9yLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChcImNvbG9yLXN3YXRjaFwiKTtcbiAgICAgICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGByZ2JhKCR7Y29sb3JbMF19LCAke2NvbG9yWzFdfSwgJHtjb2xvclsyXX0sICR7Y29sb3JbM119KWA7XG4gICAgICAgICAgICB3cmFwLmFwcGVuZChlbCk7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnByaW1hcnlDb2xvciA9IGNvbG9yO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGFsZXR0ZVdyYXAuYXBwZW5kKHdyYXApO1xuICAgIH1cbiAgICByZW5kZXJMYXllcnMoKSB7XG4gICAgICAgIHRoaXMubGF5ZXJzV3JhcC5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICB0aGlzLmFwcC5jdXJyZW50RmlsZT8uZGF0YS5mb3JFYWNoKChsYXllciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJsYXllclwiKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5hcHAubGF5ZXJJbmRleCkge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IGxheWVyLm5hbWU7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwLmxheWVySW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmxheWVyc1dyYXAuYXBwZW5kKGVsKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxvZyhtc2cpIHtcbiAgICAgICAgdGhpcy50byAmJiBjbGVhclRpbWVvdXQodGhpcy50byk7XG4gICAgICAgIHRoaXMuc3RhdHVzTGluZS5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcbiAgICAgICAgdGhpcy5zdGF0dXNMaW5lLnRleHRDb250ZW50ID0gbXNnO1xuICAgICAgICB0aGlzLnRvID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0xpbmUuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5cIik7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0xpbmUudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICB9LCAyMDAwKTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLnJlbmRlclBhbGV0dGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJMYXllcnMoKTtcbiAgICAgICAgdGhpcy56b29tRWxlbWVudC50ZXh0Q29udGVudCA9IGAke3RoaXMuYXBwLnpvb20gKiAxMDB9JWA7XG4gICAgICAgIHRoaXMucHJpbWFyeUNvbG9yRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBgcmdiYSgke3RoaXMuYXBwLnByaW1hcnlDb2xvclswXX0sICR7dGhpcy5hcHAucHJpbWFyeUNvbG9yWzFdfSwgJHt0aGlzLmFwcC5wcmltYXJ5Q29sb3JbMl19LCAke3RoaXMuYXBwLnByaW1hcnlDb2xvclszXX0pYDtcbiAgICB9XG59XG4iLCJpbXBvcnQgQXBwIGZyb20gXCIuL2FwcFwiO1xuY29uc3QgYXBwID0gbmV3IEFwcCgpO1xuLy9AdHMtaWdub3JlXG53aW5kb3cuYXBwID0gYXBwO1xuIiwiaW1wb3J0IFdpekZpbGUgZnJvbSBcIi4vZmlsZVwiO1xuaW1wb3J0IEhpc3RvcnkgZnJvbSBcIi4vaGlzdG9yeVwiO1xuaW1wb3J0IExheWVyIGZyb20gXCIuL2xheWVyXCI7XG5pbXBvcnQgeyBkZWZhdWx0UGFsZXR0ZSB9IGZyb20gXCIuL3BhbGV0dGVcIjtcbmltcG9ydCBSZW5kZXJlciBmcm9tIFwiLi9yZW5kZXJlclwiO1xuaW1wb3J0IFVJIGZyb20gXCIuL3VpXCI7XG5jb25zdCBERUZBVUxUX1dJRFRIID0gMTY7XG5jb25zdCBERUZBVUxUX0hFSUdIVCA9IDE2O1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gbmV3IEhpc3RvcnkoKTtcbiAgICAgICAgdGhpcy56b29tID0gMjU7XG4gICAgICAgIHRoaXMudG9vbCA9IFwicGVuY2lsXCI7XG4gICAgICAgIHRoaXMuY29sb3IgPSAxO1xuICAgICAgICB0aGlzLmZpbGVzID0gW107XG4gICAgICAgIHRoaXMuZmlsZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5wYWxldHRlID0gZGVmYXVsdFBhbGV0dGU7XG4gICAgICAgIHRoaXMucHJpbWFyeUNvbG9yID0gdGhpcy5wYWxldHRlLmdldENvbG9yKDApO1xuICAgICAgICB0aGlzLnBhbGV0dGVzID0gW3RoaXMucGFsZXR0ZV07XG4gICAgICAgIHRoaXMudWkgPSBuZXcgVUkodGhpcyk7XG4gICAgICAgIHRoaXMubGF5ZXJJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuZmlsZXMucHVzaChuZXcgV2l6RmlsZShERUZBVUxUX1dJRFRILCBERUZBVUxUX0hFSUdIVCkpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKHRoaXMpO1xuICAgICAgICB0aGlzLnNldHVwKCk7XG4gICAgfVxuICAgIGdldCBjdXJyZW50RmlsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsZXNbdGhpcy5maWxlSW5kZXhdO1xuICAgIH1cbiAgICBzZXR1cCgpIHtcbiAgICAgICAgLy8gYWJpbGl0eSB0byB1bmRvIGNoYW5nZXMgd2l0aCBjbWQgKyB6XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5tZXRhS2V5ICYmIGUua2V5ID09PSBcIj1cIikge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnpvb21JbigpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLm1ldGFLZXkgJiYgZS5rZXkgPT09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuem9vbU91dCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLm1ldGFLZXkgJiYgZS5rZXkgPT09IFwiMFwiKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuem9vbVJlc2V0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUubWV0YUtleSAmJiBlLmtleSA9PT0gXCJ6XCIpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy51bmRvKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgIC8vIGlmIGhvbGQgc3BhY2UgYW5kIG1vdmUgbW91c2UsIG1vdmUgY2FudmFzXG4gICAgICAgICAgICAgICAgY2FzZSBcIlNwYWNlXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy51aS5pbnB1dENvbW1hbmQuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJvcGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSBcImdyYWJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5idXR0b25zID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuY2FudmFzLnN0eWxlLmN1cnNvciA9IFwiZ3JhYmJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5jYW52YXMuc3R5bGUubGVmdCA9IGAke2UubW92ZW1lbnRYfXB4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5jYW52YXMuc3R5bGUudG9wID0gYCR7ZS5tb3ZlbWVudFl9cHhgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCI/XCI6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51aS5oZWxwRGlhbG9nLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiRXNjYXBlXCI6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudWkuaW5wdXRDb21tYW5kLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwib3BlblwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51aS5pbnB1dENvbW1hbmQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudWkuaW5wdXRDb21tYW5kLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIChlKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIiBcIjpcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmNhbnZhcy5zdHlsZS5jdXJzb3IgPSBcImRlZmF1bHRcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIudXBkYXRlKCk7XG4gICAgICAgIHRoaXMudWkudXBkYXRlKCk7XG4gICAgfVxuICAgIG5ld0ZpbGUoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibmV3XCIpO1xuICAgIH1cbiAgICBuZXdMYXllcigpIHtcbiAgICAgICAgY29uc3QgbGF5ZXIgPSBuZXcgTGF5ZXIoXCJMYXllciBcIiArICh0aGlzLmN1cnJlbnRGaWxlLmRhdGEubGVuZ3RoICsgMSksIGZhbHNlLCB0aGlzLmN1cnJlbnRGaWxlLndpZHRoLCB0aGlzLmN1cnJlbnRGaWxlLmhlaWdodCk7XG4gICAgICAgIHRoaXMuY3VycmVudEZpbGUuZGF0YS5wdXNoKGxheWVyKTtcbiAgICAgICAgdGhpcy5sYXllckluZGV4ID0gdGhpcy5jdXJyZW50RmlsZS5kYXRhLmxlbmd0aCAtIDE7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIHNhdmVGaWxlKHR5cGUsIG9wdGlvbnMgPSB7IHNjYWxlOiAxIH0pIHtcbiAgICAgICAgaWYgKHR5cGUgPT09IFwicG5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFVcmwgPSB0aGlzLnJlbmRlcmVyLmNhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XG4gICAgICAgICAgICBjb25zdCBjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IGMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBpbWcuc3JjID0gZGF0YVVybDtcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYy53aWR0aCA9IGltZy53aWR0aCAqIG9wdGlvbnMuc2NhbGU7XG4gICAgICAgICAgICAgICAgYy5oZWlnaHQgPSBpbWcuaGVpZ2h0ICogb3B0aW9ucy5zY2FsZTtcbiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgYy53aWR0aCwgYy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICAgICAgICBhLmhyZWYgPSBjLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcbiAgICAgICAgICAgICAgICBhLmRvd25sb2FkID0gXCJpbWFnZS5wbmdcIjtcbiAgICAgICAgICAgICAgICBhLmNsaWNrKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy51aS5sb2coYHNhdmUgZmlsZSBhcyAke3R5cGV9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51aS5sb2coYGZpbGV0eXBlICR7dHlwZX0gaXMgbm90IHN1cHBvcnRlZGApO1xuICAgIH1cbiAgICB1bmRvKCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkudW5kbygpO1xuICAgIH1cbiAgICByZWRvKCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkucmVkbygpO1xuICAgIH1cbiAgICBjaGFuZ2VUb29sKHRvb2wpIHtcbiAgICAgICAgdGhpcy50b29sID0gdG9vbDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiTGF5ZXIiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJsb2NrZWQiLCJ3aWR0aCIsImhlaWdodCIsInRoaXMiLCJvcGFjaXR5IiwidmlzaWJsZSIsImRhdGEiLCJJbWFnZURhdGEiLCJkZWZhdWx0UGFsZXR0ZSIsImNvbG9ycyIsImFkZENvbG9yIiwiY29sb3IiLCJwdXNoIiwicmVtb3ZlQ29sb3IiLCJpbmRleCIsInNwbGljZSIsInNldENvbG9yIiwiZ2V0Q29sb3IiLCJXaXpGaWxlIiwicGFsZXR0ZSIsInNldENhbnZhc1NpemUiLCJmb3JFYWNoIiwibGF5ZXIiLCJzZXQiLCJIaXN0b3J5Tm9kZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJIaXN0b3J5IiwibWF4Iiwic3RhY2siLCJidWZmZXIiLCJhZGQiLCJsZW5ndGgiLCJzaGlmdCIsInVuZG8iLCJwb3AiLCJyZWRvIiwiY2xlYXIiLCJSZW5kZXJlciIsImFwcCIsInpvb20iLCJmaWxlIiwiY3VycmVudEZpbGUiLCJncmlkIiwiZ3JpZFNpemUiLCJfY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiX2N0eCIsImNhbnZhcyIsImdldENvbnRleHQiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImZpbGVzIiwiZmlsZUluZGV4IiwiYmFja2dyb3VuZEltYWdlIiwiYmFja2dyb3VuZFNpemUiLCJpbWFnZVJlbmRlcmluZyIsInNldFpvb20iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0Iiwiem9vbUNoYW5nZSIsImRlbHRhWSIsImJvZHkiLCJxdWVyeVNlbGVjdG9yIiwiYXBwZW5kIiwiaW1hZ2VEYXRhIiwiY3R4IiwiY3JlYXRlSW1hZ2VEYXRhIiwiaGlzdG9yeSIsImdldEltYWdlRGF0YSIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ4IiwiTWF0aCIsImZsb29yIiwiY2xpZW50WCIsImxlZnQiLCJjbGllbnRZIiwidG9wIiwicHJpbWFyeUNvbG9yIiwicHV0SW1hZ2VEYXRhIiwiYnV0dG9ucyIsImRyYXdSZWN0IiwieSIsInciLCJoIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJmaWxsIiwic3RhcnRYIiwic3RhcnRZIiwidGFyZ2V0Q29sb3IiLCJyZXBsYWNlQ29sb3IiLCJtYXRyaXgiLCJsYXllckluZGV4IiwidXBkYXRlIiwiZHQiLCJkZWx0YSIsInNpZ24iLCJ6b29tSW4iLCJjb25zb2xlIiwibG9nIiwiem9vbU91dCIsInpvb21SZXNldCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImJpbmQiLCJEaWFsb2dFbGVtZW50IiwiY29udGFpbmVyIiwidGl0bGUiLCJjb250ZW50Iiwib3BlbiIsIl90ZW1wbGF0ZSIsImVsZW1lbnQiLCJjbGFzc05hbWUiLCJoZWFkZXIiLCJpZCIsImlubmVySFRNTCIsImNsb3NlQnRuIiwiY2xvc2UiLCJkcmFnIiwicG9zMSIsInBvczIiLCJwb3MzIiwicG9zNCIsImVsZW1lbnREcmFnIiwib2Zmc2V0VG9wIiwib2Zmc2V0TGVmdCIsImNsb3NlRHJhZ0VsZW1lbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwibW92ZSIsInRvZ2dsZSIsImhhc0F0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJJbnB1dENvbW1hbmQiLCJjb21tYW5kcyIsIm4iLCJuZXdGaWxlIiwibmwiLCJuZXdMYXllciIsImwiLCJ1aSIsImxheWVyc0RpYWxvZyIsInR5cGUiLCJzY2FsZSIsInNhdmVGaWxlIiwicGFyc2VJbnQiLCJoZWxwRGlhbG9nIiwicCIsInBhbGV0dGVEaWFsb2ciLCJQIiwibXNnIiwiaHMiLCJzdGFydHVwRGlhbG9nIiwiX2NvbnRhaW5lciIsImtleSIsImV4ZWN1dGUiLCJ2YWx1ZSIsImNsYXNzTGlzdCIsImZvY3VzIiwicmVtb3ZlIiwiY21kIiwic2xpY2UiLCJjb21tYW5kIiwiYXJncyIsInNwbGl0IiwiVGFiIiwidG9TdHJpbmciLCJ0YWJUaXRsZSIsInRleHRDb250ZW50IiwiYXBwZW5kQ2hpbGQiLCJkZWFjdGl2YXRlVGFiIiwiYWN0aXZhdGVUYWIiLCJyZW5hbWUiLCJVSSIsImlucHV0Q29tbWFuZCIsInpvb21FbGVtZW50IiwicHJpbWFyeUNvbG9yRWxlbWVudCIsInN0YXR1c0xpbmUiLCJsYXllcnNXcmFwIiwicGFsZXR0ZVdyYXAiLCJwYWxldHRlVGl0bGUiLCJ0YWJzIiwiZ2V0SXRlbSIsInJlbmRlclBhbGV0dGUiLCJ3cmFwIiwiZWwiLCJyZW5kZXJMYXllcnMiLCJ0byIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJ0b29sIiwicGFsZXR0ZXMiLCJyZW5kZXJlciIsInNldHVwIiwibWV0YUtleSIsImNvbnRhaW5zIiwiY3Vyc29yIiwibW92ZW1lbnRYIiwibW92ZW1lbnRZIiwib3B0aW9ucyIsImRhdGFVcmwiLCJ0b0RhdGFVUkwiLCJjIiwiaW1nIiwiSW1hZ2UiLCJzcmMiLCJvbmxvYWQiLCJkcmF3SW1hZ2UiLCJhIiwiaHJlZiIsImRvd25sb2FkIiwiY2xpY2siLCJjaGFuZ2VUb29sIl0sInNvdXJjZVJvb3QiOiIifQ==